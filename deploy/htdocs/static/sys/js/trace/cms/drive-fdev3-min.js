if(window.FD&&(!FD.sys||!FD.sys.Dcms||!FD.sys.Dcms.Drive)){YAHOO.namespace("FD.sys.Dcms.Drive");(function(k,m){var a=null,h=null,i=null,g={init:function(){var n=this;n.write=document.write;n.writeln=document.writeln;document.write=function(o){n._reWrite(o)};document.writeln=function(o){n._reWrite(o+"\n")}},reset:function(){if(this.write){document.write=this.write}if(this.writeln){document.writeln=this.writeln}},_innerShiv:function(r){var t,s=document,o,n="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" ");if(!t){t=s.createElement("div");t.innerHTML="<nav></nav>";o=t.childNodes.length!==1;if(o){var q=document.createDocumentFragment();var p=n.length;while(p--){q.createElement(n[p])}q.appendChild(t)}}t.innerHTML=r;return t},handle:function(v,p,z,x){if(!(v||p)){return}var o=document.createElement("div"),C=this;if(z instanceof Boolean){x=z;z="none"}x=(typeof x!=="undefined")?x:true;o.innerHTML='<span style="display:none">hack ie</span>'+v;switch(z){case"style":C._delElementsByTag("style",o);break;case"script":C._delElementsByTag("script",o);break;case"both":C._delElementsByTag("style",o);C._delElementsByTag("script",o);break}var t=o.getElementsByTagName("script"),w=t.length,s=[];for(var u=0,q=0;u<w;u++){if(t[q]){var y=t[q],B={};B.parent=y.parentNode;B.before=$D.getPreviousSibling(y);B.after=$D.getNextSibling(y);B.script=y.innerHTML;B.src=y.src;s.push(B);y.parentNode.removeChild(y)}else{q++}}var A=$D.getChildren(this._innerShiv(o.innerHTML));if(x){for(var u=0,r=A.length;u<r;u++){$D.insertBefore(A[u],p)}if(p.parentNode){p.parentNode.removeChild(p)}}else{p.innerHTML="";for(var u=0,r=A.length;u<r;u++){p.appendChild(A)}}this._includeScript(s,0);return A},_reWrite:function(q){var s=document.createElement("div");s.innerHTML=q;var p=s.childNodes,n=p.length;if(i&&i.length!==0){for(var o=0;o<n;o++){var r=p[o];$D.insertAfter(p[o],i);i=r}}else{if(h&&h.length!==0){for(var o=0;o<n;o++){var r=p[o];$D.insertBefore(p[o],h);h=r}}else{if(a&&a.length!==0){a.innerHTML=q}}}},_includeScript:function(s,r){var n=s.length;if(!(s||r)||r>=n){return}var p=document.createElement("script"),o=this,q=r+1;p.type="text/javascript";a=s[r].parent;h=s[r].after;i=s[r].before;if(s[r].src){p.src=s[r].src;p.onload=p.onreadystatechange=function(){if(!p.readyState||p.readyState==="loaded"||p.readyState==="complete"){if(q<n){o._includeScript(s,q)}p.onload=p.onreadystatechange=null}};l(p)}else{l(p);p.text=s[r].script;if(q<n){o._includeScript(s,q)}}},_delElementsByTag:function(r,o){var q=o.getElementsByTagName(r);for(var p=0,n=q.length;p<n;p++){var s=q[p];if(s){s.parentNode.removeChild(s);p--}}}},f=[function(){d($$(".dcms-position-beacon-js"))},function(){var n=$$(".dcms-beacon-position"),o=[];if(n.length>0){n.forEach(function(q){var r=$D.getAttribute(q,"data-exposure-id"),p=o.length;if(o[p-1]!==r){o.push(r)}});e(o.join(";"))}b()}];function d(n,o){o=FD.common.applyIf({},o);$D.batch(n,function(r){var q=$D.getAttribute(r,"data-url"),p=$D.getAttribute(r,"data-deletess"),u={},s={onCallback:function(w){if(w&&w.content){g.init();var D=g.handle(w.content,r,p);g.reset();var A=o.success;if(A&&!!(A instanceof Function)){A.call(D)}if(w.pid&&w.rid&&w.tid){var y=w.pid,B=w.rid,x=w.tid,v="pid="+y+"&rid="+B+"&tid="+x,C=y+","+B+","+x+";";$D.batch(D,function(E){if(E.tagName.toUpperCase()==="A"){E.setAttribute("data-click-param",v)}$D.batch($$("a",E),function(F){F.setAttribute("data-click-param",v)});if($D.hasClass(E,"dcms-beacon-position")){E.setAttribute("data-exposure-id",C)}});e(C)}}else{var z=o.error;if(z&&!!(z instanceof Function)){z.call(r)}else{c(r,"\u6570\u636e\u52a0\u8f7d\u5931\u8d25\uff0c\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5")}}},onFailure:function(w){var v=o.error;if(v&&!!(v instanceof Function)){v.call(r)}else{c(r,"\u6570\u636e\u52a0\u8f7d\u5931\u8d25\uff0c\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5")}},onTimeout:function(w){var v=o.error;if(v&&!!(v instanceof Function)){v.call(r)}else{c(r,"\u6570\u636e\u52a0\u8f7d\u5931\u8d25\uff0c\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5")}}},t=FD.common.request("jsonp",q,s,u)})}m.request=d;function c(o,n){if(!(o||n)){return}var p=document.createElement("div");p.innerHTML=n;$D.setStyle(p,"fontSize","16px");$D.setStyle(p,"fontWeight","bolder");$D.insertAfter(p,o);o.parentNode.removeChild(o)}function b(){var n=j();$E.delegate(document,"mousedown",function(r){var s=$D.getAttribute(this,"data-click-param"),q=$D.getAttribute(this,"href"),o=q.indexOf("?"),p=q.indexOf("#");q=(o!==-1)?q.substring(0,o):q;q=(p!==-1)?q.substring(0,p):q;s+="&url="+q;(new Image).src="http://stat.1688.com/click_dcms.htm?"+s+"&st_page_id="+n},"a.dcms-beacon-position-a")}function e(p){var o=j(),n=document.createElement("script");l(n);n.setAttribute("type","text/javascript");n.src="http://ctr.1688.com/ctr_dcms.html?info="+p+"&page_id="+o}function l(p){var n=document.getElementsByTagName("head")[0],o=$$("base",n);(o.length>0)?n.insertBefore(p,o[0]):n.appendChild(p)}function j(){var n=window.dmtrack_pageid||"";j=function(){return n};return n}$E.onDOMReady(function(){for(var o=0,n=f.length;o<n;o++){try{f[o]()}catch(p){if(console&&console.info){console.info("Error at No."+o+"; "+p.name+":"+p.message)}}finally{continue}}})})(window,FD.sys.Dcms.Drive)};
