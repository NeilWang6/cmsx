if(window.FD&&(!FD.sys||!FD.sys.Dcms||!FD.sys.Dcms.Drive)){YAHOO.namespace("FD.sys.Dcms.Drive");(function(m,o){var a=null,j=null,k=null,i={init:function(){var q=this;q.write=document.write;q.writeln=document.writeln;document.write=function(r){q._reWrite(r)};document.writeln=function(r){q._reWrite(r+"\n")}},reset:function(){if(this.write){document.write=this.write}if(this.writeln){document.writeln=this.writeln}},_innerShiv:function(u){var w,v=document,r,q="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" ");if(!w){w=v.createElement("div");w.innerHTML="<nav></nav>";r=w.childNodes.length!==1;if(r){var t=document.createDocumentFragment();var s=q.length;while(s--){t.createElement(q[s])}t.appendChild(w)}}w.innerHTML=u;return w},handle:function(x,r,B,z){if(!(x||r)){return}var q=document.createElement("div"),E=this;if(B instanceof Boolean){z=B;B="none"}z=(typeof z!=="undefined")?z:true;q.innerHTML='<span style="display:none">hack ie</span>'+x;switch(B){case"style":E._delElementsByTag("style",q);break;case"script":E._delElementsByTag("script",q);break;case"both":E._delElementsByTag("style",q);E._delElementsByTag("script",q);break}var v=q.getElementsByTagName("script"),y=v.length,u=[];for(var w=0,s=0;w<y;w++){if(v[s]){var A=v[s],D={};D.parent=A.parentNode;D.before=$D.getPreviousSibling(A);D.after=$D.getNextSibling(A);D.script=A.innerHTML;D.src=A.src;u.push(D);A.parentNode.removeChild(A)}else{s++}}var C=$D.getChildren(this._innerShiv(q.innerHTML));if(z){for(var w=0,t=C.length;w<t;w++){$D.insertBefore(C[w],r)}if(r.parentNode){r.parentNode.removeChild(r)}}else{r.innerHTML="";for(var w=0,t=C.length;w<t;w++){r.appendChild(C)}}this._includeScript(u,0);return C},_reWrite:function(t){var v=document.createElement("div");v.innerHTML=t;var s=v.childNodes,q=s.length;if(k&&k.length!==0){for(var r=0;r<q;r++){var u=s[r];$D.insertAfter(s[r],k);k=u}}else{if(j&&j.length!==0){for(var r=0;r<q;r++){var u=s[r];$D.insertBefore(s[r],j);j=u}}else{if(a&&a.length!==0){a.innerHTML=t}}}},_includeScript:function(v,u){var q=v.length;if(!(v||u)||u>=q){return}var s=document.createElement("script"),r=this,t=u+1;s.type="text/javascript";a=v[u].parent;j=v[u].after;k=v[u].before;if(v[u].src){s.src=v[u].src;s.onload=s.onreadystatechange=function(){if(!s.readyState||s.readyState==="loaded"||s.readyState==="complete"){if(t<q){r._includeScript(v,t)}s.onload=s.onreadystatechange=null}};n(s)}else{n(s);s.text=v[u].script;if(t<q){r._includeScript(v,t)}}},_delElementsByTag:function(u,r){var t=r.getElementsByTagName(u);for(var s=0,q=t.length;s<q;s++){var v=t[s];if(v){v.parentNode.removeChild(v);s--}}}},h=[function(){f($$(".dcms-position-beacon-js"))},function(){var q=$$(".dcms-beacon-position"),r=[];if(q.length>0){q.forEach(function(t){var u=$D.getAttribute(t,"data-exposure-id"),s=r.length;if(r[s-1]!==u){r.push(u)}});g(r.join(";"))}b()}];function f(q,r){r=FD.common.applyIf({},r);$D.batch(q,function(u){var t=$D.getAttribute(u,"data-url");if(t.indexOf("open/error.htm?path=")>-1){d(u,"\u6570\u636e\u5185\u5bb9\u4e3a\u7a7a\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458",t);return}var s=$D.getAttribute(u,"data-deletess"),x={},v={onCallback:function(z){if(z&&z.content){i.init();var G=i.handle(z.content,u,s);i.reset();var D=r.success;if(D&&!!(D instanceof Function)){D.call(G)}if(z.pid&&z.rid&&z.tid){var B=z.pid,E=z.rid,A=z.tid,y="pid="+B+"&rid="+E+"&tid="+A,F=B+","+E+","+A+";";$D.batch(G,function(H){if(H.tagName.toUpperCase()==="A"){H.setAttribute("data-click-param",y)}$D.batch($$("a",H),function(I){I.setAttribute("data-click-param",y)});if($D.hasClass(H,"dcms-beacon-position")){H.setAttribute("data-exposure-id",F)}});g(F)}}else{var C=r.error;if(C&&!!(C instanceof Function)){C.call(u)}else{c(u,"\u6570\u636e\u52a0\u8f7d\u5931\u8d25\uff0c\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5",t)}}},onFailure:function(z){var y=r.error;if(y&&!!(y instanceof Function)){y.call(u)}else{c(u,"\u6570\u636e\u52a0\u8f7d\u5931\u8d25\uff0c\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5",t)}},onTimeout:function(z){var y=r.error;if(y&&!!(y instanceof Function)){y.call(u)}else{c(u,"\u6570\u636e\u52a0\u8f7d\u5931\u8d25\uff0c\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5",t)}}},w=FD.common.request("jsonp",t,v,x)})}o.request=f;function p(r){var s=new RegExp("/([^/]+).htm$","g");var q;if((q=s.exec(r))!=null){return q[1]}return""}function c(u,t,s){if(!(u||t)){return}var q=p(s);if(q){var r=document.getElementById("pos_error_"+q+"");if(r&&r.innerHTML){i.init();var w=i.handle("<div>"+r.innerHTML+"</div>",u,true);i.reset();e(q);return}}var v=document.createElement("div");v.innerHTML=t;$D.insertAfter(v,u);u.parentNode.removeChild(u);e(s+"&care=true")}function d(s,r,q){c(s,r,q)}function b(){var q=l();$E.delegate(document,"mousedown",function(u){var v=$D.getAttribute(this,"data-click-param"),t=$D.getAttribute(this,"href"),r=t.indexOf("?"),s=t.indexOf("#");t=(r!==-1)?t.substring(0,r):t;t=(s!==-1)?t.substring(0,s):t;v+="&url="+t;(new Image).src="http://stat.1688.com/click_dcms.htm?"+v+"&st_page_id="+q},"a.dcms-beacon-position-a")}function g(s){var r=l(),q=document.createElement("script");n(q);q.setAttribute("type","text/javascript");q.src="http://ctr.1688.com/ctr_dcms.html?info="+s+"&page_id="+r}function e(r){var q=document.createElement("script");n(q);q.setAttribute("type","text/javascript");q.src="http://dcms.cn.1688.com/open/pos_error.htm?info="+r}function n(s){var q=document.getElementsByTagName("head")[0],r=$$("base",q);(r.length>0)?q.insertBefore(s,r[0]):q.appendChild(s)}function l(){var q=window.dmtrack_pageid||"";l=function(){return q};return q}$E.onDOMReady(function(){for(var r=0,q=h.length;r<q;r++){try{h[r]()}catch(s){if(console&&console.info){console.info("Error at No."+r+"; "+s.name+":"+s.message)}}finally{continue}}})})(window,FD.sys.Dcms.Drive)};
