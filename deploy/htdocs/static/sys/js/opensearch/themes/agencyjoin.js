var Paging=function(a,b){this.pagination=FYS("li.pagination",a,true);this.pagem=FYS("em",a,true);this.pagenum=FYS("input",a,true);this.pagesubmit=FYS("a.btn-b",a,true);this.configs=b||{}};Paging.prototype={init:function(e,c){var a=/^[1-9]\d*$/,d="";function b(){if(this.value){if(a.test(this.value)){d=this.value}else{this.value=d}}else{d=""}}FYE.on(this.pagenum,"focus",function(){this.select()});FYE.on(this.pagenum,"keydown",function(g,f){if(g.keyCode&&g.keyCode==13){f.pagesubmit.click();this.select()}},this);FYE.on(this.pagenum,"keyup",b);FYE.on(this.pagenum,"blur",b);this.pagem.innerHTML=c;this.pagenum.max=c;FD.OP.Agencyjoin.makeup.more.pagingSubmit(this.pagesubmit,this);this.render(e,c)},render:function(f,d){if(f<1){f=1}if(d<1){d=1}if(f>d){f=d}var b=[],e,c;if(f==1){b.push('<a class="pre-disabled" href="javascript:;"> </a>');b.push('<a class="current" href="javascript:;">1</a>')}else{b.push('<a class="pre" href="javascript:;" page="'+(f-1)+'"> </a>');b.push('<a href="javascript:;" page="1">1</a>')}if(d>1){if(f>4&&d>7){b.push('<a class="omit" href="javascript:;">...</a>')}if(f<3){e=0;c=f==1?5:4;if(f+c>d){c=d-f}}else{if(f==3){e=1;c=3;if(f+c>d){c=d-f}}else{e=2;c=2;if(f+c>d){c=d-f}e=4-c;if(f+3>d){e++}if(f-e<2){e=f-2}}}for(var a=e;0<a;a--){b.push('<a href="javascript:;" page="'+(f-a)+'">'+(f-a)+"</a>")}if(f>1){b.push('<a class="current" href="javascript:;">'+f+"</a>")}for(var a=1;a<c+1;a++){b.push('<a href="javascript:;" page="'+(f+a)+'">'+(f+a)+"</a>")}if(f+c<d-1){b.push('<a class="omit" href="javascript:;">...</a>');b.push('<a href="javascript:;" page="'+d+'">'+d+"</a>")}if(f+c==d-1){b.push('<a href="javascript:;" page="'+d+'">'+d+"</a>")}}if(f==d){b.push('<a class="next-disabled" href="javascript:;">\u4e0b\u4e00\u9875</a>')}else{b.push('<a class="next" href="javascript:;" page="'+(f+1)+'">\u4e0b\u4e00\u9875</a>')}this.pagination.innerHTML=b.join("");if(this.configs.onRender){this.configs.onRender.call(this)}if(this.pagenum.value&&this.pagenum.value*1>d){this.pagenum.value=f}FD.OP.Agencyjoin.makeup.more.paging(this.pagesubmit,this,d)}};(function(b,a){a.theme.agencyjoin={themeConfig:{hasCompany:1,hasQuantity:0,priceLabel:"\u6279\u53d1\u4ef7",companyLabel:"\u8d27\u6e90\uff1a",quantityLabel:"\u8d77\u6279",hasTracelog:0,tracelogParam:"",urlType:"search",callback:function(){}},getHtmlDescription:function(d,e,g,f,c){return'<dt class="vertical-img"><a class="a-img box-img" href="'+d+'" title="'+e+'"><img src="'+a.Util.getOfferImgUrl(g,f,c)+'" alt="'+e+'"/></a></dt><dd class="description"><a href="'+d+'" title="'+e+'">'+e+"</a></dd>"},getHtmlPrice:function(h,d,f,e){if(e){return'<dd class="price">'+h+'<span class="txt">\u4ef7\u683c\u6388\u6743\u53ef\u89c1</span></dd>'}var g="";switch(d){case"\u5143":g='<span class="fd-cny">&yen;</span>';break;case"\u7f8e\u5143":g='<span class="usd">&#36;</span>';break}f=typeof f!=="number"?(f-0):f;return'<dd class="price">'+h+g+'<em class="value">'+a.Util.toFixed(f,2)+"</em></dd>"},getHtmlQuantity:function(f,e,d){var c='<dd class="quantity">'+f+e+d+"</dd>";return c},getHtmlOfferItem:function(j,i,g,f){var c=[],e=0,h=0,d=a.Util.getOfferUrl(i.urlType,j.privateInfo,g,j.displayCatIds,j.id,j.isEtc,f);switch(j.privateInfo){case 1:e=1;break;case 2:h=1;break;case 3:e=1;h=1;break}c.push('<li><dl class="cell-product-2nd fd-clr">');c.push(this.getHtmlDescription(d,j.subject,j.offerImgURI,i.imgType,e));c.push(this.getHtmlPrice(i.priceLabel,j.currency,j.price,h));if(i.hasQuantity-0){c.push(this.getHtmlQuantity(j.quantityBegin,j.unit,i.quantityLabel))}c.push("</dl></li>");return c.join("")},getHtmlOfferList:function(g,j,f){var e=[];for(var h=0,d=g.length,c=f.pagesize;h<d&&h<c;h++){e.push(this.getHtmlOfferItem(g[h],j,f.keywords,f.featureArray))}return e.join("")},tracelog:function(f,c,e){if((f-0)&&(c!=="")){var d=$$("#"+e+" .list-product a");$E.addListener(d,"mousedown",function(){a.Util.tracelog(c)})}},getHtmlRoot:function(c,g,d){var f=[],e,h=Math.floor(c.searchResultCount/20);switch(g.imgType){case 0:e="opensearch-classic type-img-100";break;case 1:e="opensearch-classic type-img-150";break;case 2:e="opensearch-classic type-img-220";break;case 3:e="opensearch-classic type-img-310";break}g=FD.common.applyIf(g,this.themeConfig);f.push('<ul class="list-product '+e+'">');f.push(this.getHtmlOfferList(c.searchResultList,g,d));f.push("</ul>");$(g.containerId).innerHTML=f.join("");this.tracelog(g.hasTracelog,g.tracelogParam,g.containerId);g.callback(h)},getErrorTips:function(d,c){switch(c){case"failure":c="\u52a0\u8f7d\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u64cd\u4f5c\uff01";break;case"timeout":c="\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u64cd\u4f5c\uff01";break}$(d.containerId).innerHTML='<div class="opensearch-agencyjoin-error">'+c+"</div>"},end:0}})(window,FD.sys.opensearch);
