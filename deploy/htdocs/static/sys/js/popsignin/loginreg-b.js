(function(){var e=FDEV.lang,d=FDEV.env.ua,c=FD.Member.LR,b=/^(0|86)?1[3458]\d{9}$/,a=FD.widget.Valid.regExps.isEmail;FD.common.apply(FD.Member.LR,{registUrl:"http://exodus.1688.com/member/join/commonPopValidateJoin.htm",urlUM:"http://exodus.1688.com/member/popSignin.htm",urlMobile:"http://exodus.1688.com/member/checkMobileValidate.htm",urlSendM:"http://exodus.1688.com/member/sendIdentityCodeByMobile.htm",urlSendE:"http://exodus.1688.com/member/sendIdentityCodeByEmail.htm",registByM:true,aliclick:function(h,g){var f=this.registByM?"m":"e";aliclick(h,e.substitute(g,[f]))},render:function(){var g=FYG("modLoginReg"),f=this.loginid||"",i=FYG("popTopInfo"),h=(i&&i.value!="")?i.value:"30秒快速注册，轻松做网商";if(!g){g=document.createElement("div");g.id="modLoginReg";g.style.display="none";document.body.appendChild(g);g.innerHTML=['<div class="wrap">				<div class="title fd-clr">					<h3><img alt="阿里巴巴" src="http://img.china.alibaba.com/cms/upload/member/logo2.gif" /></h3>					<a href="javascript:;" class="close" tabindex="9000"></a>				</div>				<div class="box">				<form action="" method="post" onsubmit="FD.Member.LR.submit();return false;">				<ul class="tab"><li>会员登录</li><li>免费注册</li><li><button type="submit"></button></li></ul>				<fieldset style="display: none;">					<div class="message"></div>					<dl class="account"><dt>帐号：</dt><dd><input type="text" class="text',f?"":" placeholder",'" maxlength="50" style="width: 170px;" value="',f,'" valid="{',f?"lazy:false,":"",'required:true,type:\'remote\',fun:FD.Member.LR.vAccount,key:\'account\'}" vg="login" placeholder="登录名/电子邮箱/手机号码" />							<span style="display: none;"><input id="lname" type="radio" class="rdo" name="ltype" checked="checked" /><label for="lname">登录名</label><input id="lphone" type="radio" class="rdo" name="ltype" />							<label for="lphone">手机</label></span><a href="http://exodus.1688.com/member/retrieve_login_id.htm?tracelog=signin_simple_loginid" target="_blank" tabindex="9001">找回登录名</a></dd>							<dd>&nbsp;<span class="n"></span></dd></dl>					<dl><dt>密码：</dt><dd><input type="password" class="text" maxlength="20" style="width: 170px;" valid="{required:true,key:\'pwd\'}" vg="login" /><a class="forget" href="http://exodus.1688.com/member/retrieve_password.htm" target="_blank" tabindex="9002">找回密码</a></dd>						<dd>&nbsp;<span class="n"></span></dd></dl>					<dl class="code" style="display:none;"><dt>验证码：</dt><dd><input type="text" class="text" maxlength="4" style="width: 60px;" valid="{required:true,min:4,key:\'code\'}" vg="login" /><img src="about:blank" alt="验证码载入中" width="100" height="30" /><a class="vague" href="javascript:;" tabindex="9003">看不清</a></dd>						<dd>&nbsp;<span class="d">请输入4位验证码</span><span class="n">错误信息</span></dd></dl>					<dl class="action"><dt>&nbsp;</dt><dd><a class="login" href="javascript:;"><span class="btn-l"><em>登&nbsp;录</em></span><span class="btn-r"></span></a></dd><dd>&nbsp;</dd></dl>				</fieldset>				<fieldset><div class="topinfo">'+h+'</div><div class="message"></div>					<dl><dt>会员名：</dt><dd><input type="text" class="text" maxlength="20" style="width: 170px;" valid="{required:true,type:\'remote\',fun:FD.Member.LR.vID,key:\'id\'}" vg="regist" /><span class="y">&nbsp;</span></dd>						<dd>&nbsp;<span class="d">请输入以字母开头，4-20位字母或数字</span><span class="n"></span></dd></dl>					<dl><dt>密码：</dt><dd><input type="password" class="text" maxlength="20" style="width: 170px;" valid="{required:true,type:\'fun\',fun:FD.Member.LR.vPwd,cache:false,key:\'pwd\'}" vg="regist" /><span class="y">&nbsp;</span></dd>						<dd>&nbsp;<span class="d">请输入6-20位字母或数字</span><span class="n"></span></dd></dl>					<dl><dt>确认密码：</dt><dd><input type="password" class="text" maxlength="20" style="width: 170px;" valid="{required:true,type:\'fun\',fun:FD.Member.LR.vPwd,cache:false,key:\'repwd\'}" vg="regist" /><span class="y">&nbsp;</span></dd>						<dd>&nbsp;<span class="d">请重复输入密码</span><span class="n"></span></dd></dl>					<dl class="email switch-m"><dt>电子邮箱：</dt><dd><input type="text" class="text placeholder" maxlength="50" style="width: 170px;" placeholder="如：abc@abc.com" valid="{required:true,type:\'remote\',fun:FD.Member.LR.vEmail,key:\'email\'}" vg="regist" /><span class="y">&nbsp;</span></dd>						<dd>&nbsp;<span class="d">请输入常用的电子邮箱，便于日后找回密码</span><span class="s"></span><span class="n"></span></dd></dl>					<dl class="split switch-m"><dt>手机验证&nbsp;&nbsp;</dt><dd></dd></dl>					<dl class="split switch-e" style="display:none"><dt>邮箱验证&nbsp;&nbsp;</dt><dd></dd></dl>					<dl class="mobile switch-m"><dt>手机号码：</dt><dd><a class="send send-disabled" href="javascript:;"><span class="btn-l"><em>发送验证码</em></span><span class="btn-r"></span></a><input type="text" class="text" maxlength="50" style="width: 170px;" valid="{required:true,type:\'fun\',fun:FD.Member.LR.vMobile,key:\'mobile\'}" vg="regist" /><span class="y">&nbsp;</span></dd>						<dd>&nbsp;<span class="d">请输入13/14/15/18开头的手机号码</span><span class="s"></span><span class="n"></span></dd></dl>					<dl class="email switch-e" style="display:none"><dt>电子邮箱：</dt><dd><a class="send send-disabled" href="javascript:;"><span class="btn-l"><em>发送验证码</em></span><span class="btn-r"></span></a><input type="text" class="text placeholder" maxlength="50" style="width: 170px;" placeholder="如：abc@abc.com" valid="{required:true,type:\'fun\',fun:FD.Member.LR.vEmailE,key:\'emaile\'}" vg="regist" /><span class="y">&nbsp;</span></dd>						<dd>&nbsp;<span class="d">请输入常用的电子邮箱，便于日后找回密码</span><span class="s"></span><span class="n"></span></dd></dl>					<dl class="code"><dt>验证码：</dt><dd><input type="text" class="text" maxlength="6" style="width: 60px;" valid="{required:true,min:6,key:\'code\'}" vg="regist" /></dd>						<dd>&nbsp;<span class="d">请输入您收到的6位验证码</span><span class="n">错误信息</span></dd></dl>					<dl class="clause"><dt></dt><dd><input id="rclause" type="checkbox" checked="checked" valid="{required:true,evt:\'click\',key:\'clause\'}" vg="regist" /><label for="rclause">我已看过并同意</label><a title="《阿里巴巴服务条款》" href="http://info.1688.com/biznews/pages/alihome/js_fw.html" onmousedown="FD.Member.LR.aliclick(null, \'?tracelog=reg_simple_{0}_privacy_click\')" target="_blank">《阿里巴巴服务条款》</a></dd>						<dd>&nbsp;<span class="n"></span></dd></dl>					<dl class="action"><dt>&nbsp;</dt><dd><a class="regist" href="javascript:;"><span class="btn-l"><em>立即注册</em></span><span class="btn-r"></span></a></dd>						</dl>					<dl class="switcher"><a href="javascript:;" title="邮箱注册">没有手机？您还可以使用邮箱验证</a></dl>            	</fieldset>				<div class="done" style="display: none;"></div><div class="done" style="display: none;"></div>			</form></div></div>'].join("");this.mod=g}},init:function(){var i=this,H=FYS("form",this.mod,true),q=FYS("ul.tab>li",this.mod),J=FYS("fieldset",this.mod),I=FYS("dl.action",this.mod),t=FYS("div.done",this.mod),K=FYS("input.text",this.mod),v=FYS("div.message",this.mod),L=FYS("a.close",this.mod),D=FYS("a.refresh",this.mod),u=FYS(">button",q[2],true),O=FYS("a.forget",J[0],true),x=FYS("a.send",J[1]),l=K[0],y=FYD.getNextSibling(l),Q=FYS(">input",y,true),E=K[1],B=K[2],A=FYD.getNextSibling(B),h=FYD.getNextSibling(A),s=K[3],p=K[4],M=K[5],g=FYS("dl.switch-m",J[1]),j=FYS("dl.switch-e",J[1]),C=K[6],F=K[7],G=K[8],N=K[9],k=FYS("a.login",this.mod,true),o=FYS("a.regist",this.mod,true),m=FYS("dl.switcher>a",J[1],true),z=false,f=false;q.pop();this.tabs=q;this.form=H;this.emaile=G;this.lcode=B;this.lcodeBox=FYD.getAncestorByClassName(B,"code");this.lcodeActive=false;this.rcode=N;this.switcher=m;this.btnLogin=k;this.btnRegist=o;this.abT=FD.common.getSubCookie("loginreg");if(!this.abT){this.abT=Math.random()<0.5?"A":"B";FD.common.setSubCookie("loginreg",this.abT)}function P(){A.src=i.imgSrc+"?sessionID="+encodeURIComponent(i.sessionId)+"&t="+new Date().getTime()}FYE.on(L,"click",function(S,T){FYE.preventDefault(S);if(T.currentFocus){var R;switch(T.currentFocus){case"id":R=1;break;case"pwd":R=2;break;case"repwd":R=3;break;case"email":case"emaile":R=4;break;case"code":R=6;break}c.aliclick(null,"?tracelog=reg_simple_{0}_close"+R)}T.hide()},this);if(!("placeholder" in document.createElement("input"))){FYE.on([l,G,C],"focus",function(){FYD.removeClass(this,"placeholder")});FYE.on([l,G,C],"blur",function(){if(this.value===""){FYD.addClass(this,"placeholder")}})}else{FYD.removeClass([l,G,C],"placeholder")}FYE.on(u,"focus",function(){this.blur()});FYE.on(h,"click",function(S,R){FYE.preventDefault(S);P();aliclick(null,"?tracelog=signin_simple_chgcode")});FYE.on(q,"click",function(T,U){if(FYD.hasClass(this,"current")){return}var S=q.indexOf(this),R=FYS("input",J[S],true);FYD.removeClass(q,"current");FYD.addClass(this,"current");FYD.setStyle(t,"display","none");FYD.setStyle(J,"display","none");FYD.setStyle([J[S],I[S]],"display","");R.focus();R.value=R.value;if(!S){P()}else{aliclick(null,"?tracelog=reg_simple_m_tab1");if(m.innerHTML==="返回手机验证"){U.fireEventHandler(m,"click")}}U.tabIndex=S;if(T.button==0&&S===0){aliclick(null,"?tracelog=signin_simple_tab")}},this);FYE.on(D,"click",function(R){FYE.preventDefault(R);location.reload()});FYE.on(O,"mousedown",function(){aliclick(null,"?tracelog=signin_simple_pass")});FYE.on([s,p,M,G,C,N],"blur",function(R,S){S.currentFocus=null},this);FYE.on([s,p,M,G,C,N],"focus",function(R,S){S.currentFocus=S.vRegist.getConfig(this).key},this);FYE.on(F,"keyup",function(){if(b.test(this.value)&&!FYD.hasClass(x[0],"send-cd")){FYD.removeClass(x[0],"send-disabled")}else{FYD.addClass(x[0],"send-disabled")}});FYE.on(G,"keyup",function(){if(a.test(this.value)&&!FYD.hasClass(x[1],"send-cd")){FYD.removeClass(x[1],"send-disabled")}else{FYD.addClass(x[1],"send-disabled")}});FYE.on(x,"click",function(aa,V){FYE.preventDefault(aa);if(!FYD.hasClass(this,"send-disabled")){var S,Y=60,T=FYS("em",this,true),ab=FYD.getNextSibling(this),X=FYD.getAncestorByTagName(this,"dl"),ac=FYS("span.s",X,true),W=FYS("span.n",X,true),Z={};c.aliclick(null,"?tracelog=reg_simple_{0}_getcode");FYD.addClass(this,"send-disabled");FYD.addClass(this,"send-cd");function R(){S=e.later(1000,this,function(){if(Y===1){T.innerHTML="发送验证码";FYD.removeClass(this,"send-cd");if(V.vRegist.valid(ab)){FYD.removeClass(this,"send-disabled")}S.cancel()}else{T.innerHTML=--Y+"秒后重发"}},null,true);T.innerHTML="60秒后重发"}function U(){FYD.removeClass(X,"ok");FYD.addClass(X,"err");FYD.removeClass(this,"send-cd");if(V.vRegist.valid(ab)){FYD.removeClass(this,"send-disabled")}W.innerHTML="网络繁忙，请稍后重试"}Z[V.registByM?"mobile":"email"]=ab.value;FD.common.request("JSONP",FD.Member.LR[V.registByM?"urlSendM":"urlSendE"],{fn:V.registByM?"sendm":"sende",scope:this,onCallback:function(ae){if(ae.success){FYD.removeClass(X,"err");FYD.addClass(X,"ok");if(V.registByM){ac.innerHTML="验证码已发送到您的手机，请立即查收"}else{ac.innerHTML='验证码已发送到您的邮箱，<a href="'+ae.data.emailUrl+'" onclick="aliclick(null, \'?tracelog=reg_simple_e_check\')" target="_blank">立即查收</a>'}R.call(this)}else{var ad=V.vRegist.getConfig(ab);ad.isValid=false;FYD.removeClass(X,"ok");FYD.addClass(X,"err");FYD.removeClass(this,"send-cd");if(V.vRegist.valid(ab)){FYD.removeClass(this,"send-disabled")}switch(ae.data.resultCode){case"MEMBER_MP_VALIDATE_MP_ERR":W.innerHTML="请输入正确手机格式";break;case"MOBILE_HAS_VALIDATED":aliclick(null,"?tracelog=reg_simple_m_em2");W.innerHTML="手机号码已被使用，请更换其他号码";break;case"MOBILE_IDENTITY_CODE_TOO_FREQUENTLY":W.innerHTML="您获取验证码过于频繁，请明天再试或更改号码";break;case"DATA_ERROR":W.innerHTML="网络繁忙，请稍后重试";ad.isValid=true;break;case"EXPIRE_CHECK_TIMES":W.innerHTML="您获取验证码过于频繁，请明天再试或更改邮箱";break;case"MEMBER_EMAIL_VALIDATE_EMAIL_USED":W.innerHTML="邮箱已被使用，请更换其他邮箱";c.aliclick(null,"?tracelog=reg_simple_{0}_ee2");break}}},onTimeout:U,onFailure:U},Z)}},this);FYE.on(m,"click",function(T,U){FYE.preventDefault(T);var S="返回手机验证",R="没有手机？您还可以使用邮箱验证";if(this.innerHTML===S){aliclick(null,"?tracelog=reg_simple_m_tab2");FYD.setStyle(j,"display","none");FYD.setStyle(g,"display","");if(a.test(G.value)){FYD.removeClass(C,"placeholder");C.value=G.value}U.vRegist.active(G,false);U.vRegist.active([C,F],true);U.registByM=true;this.innerHTML=R}else{aliclick(null,"?tracelog=reg_simple_e_tab");FYD.setStyle(g,"display","none");FYD.setStyle(j,"display","");if(a.test(C.value)){FYD.removeClass(G,"placeholder");G.value=C.value;if(!FYD.hasClass(x[1],"send-cd")){FYD.removeClass(x[1],"send-disabled")}}U.vRegist.active([C,F],false);U.vRegist.active(G,true);U.vRegist.active(G,false);U.vRegist.active(G,true);U.registByM=false;this.innerHTML=S}U.vRegist.active(N,false);N.value="";U.vRegist.active(N,true)},this);FYE.on(B,d.opera?"keypress":"keydown",function(R,S){if(!R.shiftKey&&R.keyCode&&R.keyCode==9){FYE.preventDefault(R);l.focus()}},this);FYE.on(N,d.opera?"keypress":"keydown",function(R,S){if(!R.shiftKey&&R.keyCode&&R.keyCode==9){FYE.preventDefault(R);s.focus()}},this);FYE.on(l,d.opera?"keypress":"keydown",function(R,S){if(R.shiftKey&&R.keyCode&&R.keyCode==9){FYE.preventDefault(R);B.focus()}},this);FYE.on(s,d.opera?"keypress":"keydown",function(R,S){if(R.shiftKey&&R.keyCode&&R.keyCode==9){FYE.preventDefault(R);N.focus()}},this);FYE.on(K,"focus",function(S){var R=FYD.getAncestorByTagName(this,"dl");if(FYD.hasClass(R,"err")&&this.value){this.select()}else{FYD.addClass(R,"focus")}});FYE.on(K,"blur",function(R){FYD.removeClass(FYD.getAncestorByTagName(this,"dl"),"focus")});this.vLogin=new FD.widget.Valid(FYS("input[vg=login]",this.mod),{onValid:function(S,T){var R=FYD.getAncestorByTagName(this,"dl");n=FYS("span.n",R,true);n.innerHTML="";if(S=="pass"){FYD.removeClass(R,"err");FYD.addClass(R,"ok");switch(T.key){case"account":aliclick(null,"?tracelog=signin_simple_s1");break;case"pwd":aliclick(null,"?tracelog=signin_simple_s2");break;case"code":aliclick(null,"?tracelog=signin_simple_s3");break}}else{if(S=="default"){FYD.removeClass(R,"err");FYD.removeClass(R,"ok")}else{switch(S){default:n.innerHTML="请填写正确的内容。";break;case"required":switch(T.key){case"account":aliclick(null,"?tracelog=signin_simple_null1");return;case"pwd":n.innerHTML="请输入您的密码";aliclick(null,"?tracelog=signin_simple_null2");break;case"code":n.innerHTML="请输入验证码";aliclick(null,"?tracelog=signin_simple_null3");break}break;case"min":n.innerHTML="请输入4位验证码";aliclick(null,"?tracelog=signin_simple_ev1");break;case"fun":n.innerHTML=T.msg;break}FYD.removeClass(R,"ok");FYD.addClass(R,"err")}}if(this.value){switch(T.key){case"account":aliclick(null,"?tracelog=signin_simple_chg1");break;case"pwd":aliclick(null,"?tracelog=signin_simple_chg2");break;case"code":aliclick(null,"?tracelog=signin_simple_chg6");break}}}});this.vRegist=new FD.widget.Valid(FYS("input[vg=regist],input[vg=lr]",this.mod),{onValid:function(S,T){var R=FYD.getAncestorByTagName(this,"dl");n=FYS("span.n",R,true);n.innerHTML="";if(S==="pass"){FYD.removeClass(R,"err");FYD.addClass(R,"ok");if(FYD.getStyle(R,"display")!=="none"){switch(T.key){case"id":c.aliclick(null,"?tracelog=reg_simple_{0}_s1");break;case"pwd":c.aliclick(null,"?tracelog=reg_simple_{0}_s2");break;case"repwd":c.aliclick(null,"?tracelog=reg_simple_{0}_s3");break;case"email":case"emaile":c.aliclick(null,"?tracelog=reg_simple_{0}_s4");case"mobile":c.aliclick(null,"?tracelog=reg_simple_{0}_s5");case"code":c.aliclick(null,"?tracelog=reg_simple_{0}_s6");break}}}else{if(S==="default"){FYD.removeClass(R,"err");FYD.removeClass(R,"ok")}else{switch(S){default:break;case"required":n.innerHTML="此项为必填项";switch(T.key){case"id":c.aliclick(null,"?tracelog=reg_simple_{0}_null1");break;case"pwd":c.aliclick(null,"?tracelog=reg_simple_{0}_null2");break;case"repwd":c.aliclick(null,"?tracelog=reg_simple_{0}_null3");break;case"email":case"emaile":c.aliclick(null,"?tracelog=reg_simple_{0}_null4");break;case"mobile":c.aliclick(null,"?tracelog=reg_simple_{0}_null5");break;case"code":c.aliclick(null,"?tracelog=reg_simple_{0}_null6");break;case"clause":n.innerHTML="需同意《阿里巴巴服务条款》才可注册为会员";c.aliclick(null,"?tracelog=reg_simple_{0}_privacy_cancel");break;default:break}break;case"fun":if(T.msg){n.innerHTML=T.msg}break;case"min":n.innerHTML="请输入您收到的6位验证码";c.aliclick(null,"?tracelog=reg_simple_{0}_e_code");break;case"max":n.innerHTML="请输入50个字符以内的电子邮箱";break;case"noAlidomain":n.innerHTML="不能使用以alibaba-inc.com为后缀的邮箱";break;case"email":case"emaile":n.innerHTML="请输入正确格式的邮箱，如：abc@abc.com";break;case"rEmail":n.innerHTML="邮箱已被使用，请更换其他邮箱";break;case"rMobile":n.innerHTML="手机已被使用，请更换其他手机";break;case"id1":n.innerHTML="请输入以字母开头的会员名";break;case"id2":n.innerHTML="请输入4-20位字母或数字";break;case"rUser":n.innerHTML="会员名已存在";break}FYD.removeClass(R,"ok");FYD.addClass(R,"err");if(S!=="required"){switch(T.key){case"id":c.aliclick(null,"?tracelog=reg_simple_{0}_e_loginid");break;case"pwd":c.aliclick(null,"?tracelog=reg_simple_{0}_e_password");break;case"repwd":c.aliclick(null,"?tracelog=reg_simple_{0}_ecp1");break;case"email":c.aliclick(null,"?tracelog=reg_simple_{0}_e_email");break;case"code":c.aliclick(null,"?tracelog=reg_simple_{0}_e_code");break}}}}if(this.value){switch(T.key){case"id":c.aliclick(null,"?tracelog=reg_simple_{0}_chg1");break;case"pwd":c.aliclick(null,"?tracelog=reg_simple_{0}_chg2");break;case"repwd":c.aliclick(null,"?tracelog=reg_simple_{0}_chg3");break;case"email":case"emaile":c.aliclick(null,"?tracelog=reg_simple_{0}_chg4");break;case"mobile":c.aliclick(null,"?tracelog=reg_simple_{0}_chg5");break;case"code":c.aliclick(null,"?tracelog=reg_simple_{0}_chg6");break}}}});function r(){v[0].innerHTML='<img alt="" src="http://img.china.alibaba.com/images/common/icon_v02/warn7.png" />网络异常，请稍后重试！';z=false;P()}function w(){v[1].innerHTML='<img alt="" src="http://img.china.alibaba.com/images/common/icon_v02/warn7.png" />网络异常，请稍后重试！';f=false}FYE.on(k,"click",function(R,T){FYE.preventDefault(R);if(T.vLogin.valid()){if(z){return}z=true;var S={paramA:l.value,paramB:T._encodeSpecial(E.value),checkCode:B.value};if(FYD.getStyle(y,"display")=="inline"){S.type=(Q.checked?"id":"mobile")}v[0].innerHTML="";FD.common.request("jsonp",T.loginUrl,{scope:T,onCallback:function(aa){var W=aa.ResultSet&&aa.ResultSet.secondValiData;if(W){window.location=W+"&Done="+window.location.href;return}if(aa.ResultSet&&aa.ResultSet["status"]=="success"){FYD.setStyle(J[0],"display","none");FYD.setStyle(t[0],"display","");this.form.reset();if(this.onLoginSuccess){this.onLoginSuccess(t[0],S,aa)}aliclick(null,"?tracelog=signin_simple_sub");if(/^[A-Za-z]{1}[A-Za-z\d]{3,19}$/.test(S.paramA)){aliclick(null,"?tracelog=signin_simple_id")}else{if(/^[1][3|5|8]\d{9}$/.test(S.paramA)){aliclick(null,"?tracelog=signin_simple_mobile")}else{aliclick(null,"?tracelog=signin_simple_email")}}this.activeLCodeBox(false)}else{var V,Z;switch(aa.ResultSet["failType"].toLocaleUpperCase()){case"FAIL_PASSWORD":V=E;Z="您输入的密码不正确，请重新输入";c.aliclick(null,"?tracelog=signin_simple_{0}_password");break;case"CHECKCODEERROR":V=B;Z="您输入的验证码不正确，请重新输入";c.aliclick(null,"?tracelog=reg_simple_{0}_ev1");break;case"FAIL_USERNAME":V=l;Z="您输入的帐号不正确，请重新输入";aliclick(null,"?tracelog=signin_simple_ev2");c.aliclick(null,"?tracelog=signin_simple_{0}_loginid");break;case"FAIL_HISTORY_MOBILE":V=l;Z="ID和手机号码重复";break;case"FAIL_DISABLED":V=l;Z='您的帐号无法正常使用，可能是以下原因之一：<br/>1.涉嫌大量发布广告信息；<a href="http://im.alisoft.com/security.html?flag=1#nogo" target="_blank">查看详情</a><br/>2.违反会员协议或阿里巴巴相关交易规则；<br/>3.帐号已注销。';aliclick(null,"?tracelog=signin_simple_el1");break;default:r();return}var U=FYD.getAncestorByTagName(V,"dl"),X=FYS("span.n",U,true);X.innerHTML=Z;FYD.addClass(U,"err");var Y=aa.ResultSet&&aa.ResultSet.verifyCode;this.activeLCodeBox(Y)}z=false;P()},onTimeout:r,onFailure:r},S)}},this);FYE.on(o,"click",function(R,T){FYE.preventDefault(R);if(T.vRegist.valid()){if(f){return}f=true;var S={userid:s.value,password:T._encodeSpecial(p.value),checkcode:N.value};if(T.registByM){S.mobileno=F.value;S.email=C.value;S.joinfrom="POP_JOIN_M"}else{S.email=G.value;S.joinfrom="POP_JOIN_E"}v[1].innerHTML="";FD.common.request("jsonp",T.registUrl,{scope:T,onCallback:function(Y){if(Y.success){FYD.setStyle(J[1],"display","none");FYD.setStyle(t[1],"display","");this.form.reset();if(this.onRegistSuccess){this.onRegistSuccess(t[1],S,Y)}}else{var V,X;switch(Y.data.toLocaleUpperCase()){case"CHECKCODEERROR":V=N;X="您输入的验证码不正确，请重新输入";c.aliclick(null,"?tracelog=reg_simple_{0}_ev1");break;case"EMAIL_EXIST":V=email1;X="您输入的邮箱已经被使用，请重新输入";break;case"MEMBER_EXIST":V=s;X="会员名已存在";break;case"PASSWORD_UNSAFE":V=p;X="您输入的密码不够安全，请重新输入";break;default:w();return}var U=FYD.getAncestorByTagName(V,"dl"),W=FYS("span.n",U,true);W.innerHTML=X;FYD.removeClass(U,"ok");FYD.addClass(U,"err")}f=false},onTimeout:w,onFailure:w},S)}c.aliclick(null,"?tracelog=reg_simple_{0}_infosub_click")},this);this.handleInputsFocusTrace()},vAccount:function(g,m){var p=FD.Member.LR,h=this,i=this.value,f=g.opt,j=g.cfg,l=FYD.getNextSibling(this),k=function(){j.isValid=true;m.call(this,"pass",f)};FD.common.request("jsonp",p.getLastLoginType,{onCallback:function(s){var r=s.verifyCode;var q=p.lcodeActive;p.activeLCodeBox(r);o();if(q&&!r){p.fireEventHandler(p.btnLogin,"click")}}},{loginId:i});function o(){if(/^[1][3|5|8]\d{9}$/.test(i)){FD.common.request("jsonp",p.urlMobile,{onCallback:function(q){if(q.isHistoryMobile=="true"){FYD.setStyle(h,"width","90px");FYD.setStyle(l,"display","")}k.call(h)},onTimeout:k,onFailure:k},{paramA:i})}else{FYD.setStyle(h,"width","170px");FYD.setStyle(l,"display","none");j.isValid=true;m.call(h,"pass",f)}}},vID:function(h,i){var g=h.opt,f=h.cfg;if(!/^[A-Za-z]{1}[A-Za-z\d]{3,19}$/.test(this.value)){c.aliclick(null,"?tracelog=reg_simple_{0}_el1");if(/^\d+/.test(this.value)){i.call(this,"id1",g);c.aliclick(null,"?tracelog=reg_simple_{0}_e_loginid1");return}if(/[^A-Za-z\d]/.test(this.value)){i.call(this,"id2",g);c.aliclick(null,"?tracelog=reg_simple_{0}_e_loginid2");return}if(this.value.length<4){i.call(this,"id2",g);return}return}i.call(this,"default",g);FD.common.request("JSONP",FD.Member.LR.urlId,{scope:this,fn:"user",onCallback:function(j){if(j.success){f.isValid=true;i.call(this,"pass",g)}else{i.call(this,"rUser",g);c.aliclick(null,"?tracelog=reg_simple_{0}_el2")}},onTimeout:function(){f.isValid=true;i.call(this,"pass",g)},onFailure:function(){f.isValid=true;i.call(this,"pass",g)}},{TPL_NICK:encodeURI(this.value)})},vEmail:function(i,j){var g=FD.Member.LR,h=i.opt,f=i.cfg;if(this.value.indexOf("@alibaba-inc.com")!=-1){j.call(this,"noAlidomain",h);return}if(!a.test(this.value)){j.call(this,"email",h);g.aliclick(null,"?tracelog=reg_simple_{0}_ee1");return"请输入正确格式的邮箱，如：abc@abc.com"}j.call(this,"default",h);FD.common.request("JSONP",FD.Member.LR.urlEmail,{scope:this,fn:"email",onCallback:function(k){if(k.success){f.isValid=true;j.call(this,"pass",h)}else{j.call(this,"rEmail",h);g.aliclick(null,"?tracelog=reg_simple_{0}_ee2")}},onTimeout:function(){f.isValid=true;j.call(this,"pass",h)},onFailure:function(){f.isValid=true;j.call(this,"pass",h)}},{TPL_EMAIL:encodeURI(this.value)})},vEmailE:function(i){var h=FD.Member.LR,g=FYD.getAncestorByTagName(this,"dl"),f=FYS("span.s",g,true);if(this.value.indexOf("@alibaba-inc.com")!=-1){onValid.call(this,"noAlidomain",opt);return}if(!a.test(this.value)){return"请输入正确格式的邮箱，如：abc@abc.com"}f.innerHTML="";return true},vPwd:function(j){var t=FD.Member.LR;if(j.key=="pwd"){if(!/^[a-zA-Z\d]{6,20}$/.test(this.value)){t.aliclick(null,"?tracelog=reg_simple_{0}_ep11");return"请输入6-20位字母或数字"}var k=FYD.getAncestorByTagName(this,"dl"),s=FYD.getPreviousSibling(k),p=FYS("dl.email",t.mod),r=FYS("dl.mobile",t.mod,true),i=FYS("input",s,true),h=FYS("input",r,true),q=FYS("input",p[0],true),g=FYS("input",p[1],true);if(t.vRegist.getConfig(i).isValid){if(i.value==this.value){t.aliclick(null,"?tracelog=reg_simple_{0}_ep1");return"不能使用登录名作为密码"}if((this.value||"").lastIndexOf(i.value)>-1){t.aliclick(null,"?tracelog=reg_simple_{0}_ep2");return"不能在密码中包含登录名"}if((i.value||"").lastIndexOf(this.value)>-1){t.aliclick(null,"?tracelog=reg_simple_{0}_ep3");return"不能用登录名的一部分作为密码"}}if("012345678909876543210".lastIndexOf(this.value)>-1){t.aliclick(null,"?tracelog=reg_simple_{0}_ep4");return"不能使用连续的数字作为密码"}if("ABCDEFGHIJKLMNOPQRSTUVWXYZYXWVUTSRQPONMLKJIHGFEDCBA".lastIndexOf(this.value)>-1){t.aliclick(null,"?tracelog=reg_simple_{0}_ep5");return"不能使用连续的字母作为密码"}if("abcdefghijklmnopqrstuvwxyzyxwvutsrqponmlkjihgfedcba".lastIndexOf(this.value)>-1){t.aliclick(null,"?tracelog=reg_simple_{0}_ep6");return"不能使用连续的字母作为密码"}if(/^(\d)\1+$/.test(this.value)){t.aliclick(null,"?tracelog=reg_simple_{0}_ep7");return"不能使用相同的数字作为密码"}if(/^(\w)\1+$/.test(this.value)){t.aliclick(null,"?tracelog=reg_simple_{0}_ep8");return"不能使用相同的字母作为密码"}var f=t.registByM?q:g;if(t.vRegist.getConfig(f).isValid){if(f.value.split("@")[0]===this.value){t.aliclick(null,"?tracelog=reg_simple_{0}_ep9");return"不能使用邮箱前缀作为密码"}}if(t.registByM&&t.vRegist.getConfig(h).isValid){if(this.value===h.value){aliclick(null,"?tracelog=reg_simple_m_ep12");return"不能使用手机号码作为密码"}}if(this.value==="password"){t.aliclick(null,"?tracelog=reg_simple_{0}_ep10");return'不能使用"password"作为密码'}return true}else{var k=FYD.getAncestorByTagName(this,"dl"),m=FYD.getPreviousSibling(k),l=FYS("input",m,true);if(!t.vRegist.getConfig(l).isValid){return"请先输入正确的密码"}if(this.value===""){aliclick(null,"?tracelog=reg_simple_null3");return"请重复输入密码"}if(l.value!==this.value){return"请重复输入密码"}return true}},vMobile:function(j){var h=FD.Member.LR,g=FYD.getAncestorByTagName(this,"dl"),i=FYS("a.send",g,true),f=FYS("span.s",g,true);if(!/^\d{11}$/.test(this.value.replace(/^(0|86)/,""))){aliclick(null,"?tracelog=reg_simple_m_em1");return"请输入11位数字"}if(!b.test(this.value)){aliclick(null,"?tracelog=reg_simple_m_em1");return"请输入13/14/15/18开头的手机号码"}f.innerHTML="";return true},handleInputsFocusTrace:function(){var h=this,f=FYS("input.text",this.mod),i={"3":"reg_simple_{0}_time1","4":"reg_simple_{0}_time2","5":"reg_simple_{0}_time3","6":"reg_simple_{0}_time4","7":"reg_simple_{0}_time5","8":"reg_simple_{0}_time4","9":"reg_simple_{0}_time6"};for(var g in i){FYE.on(f[g],"focus",function(j,k){h.lastFocusInput=k;c.aliclick(null,"?tracelog="+i[k])},g)}},traceClose:function(){var f=this.lastFocusInput,g={3:"reg_simple_{0}_close1",4:"reg_simple_{0}_close2",5:"reg_simple_{0}_close3",6:"reg_simple_{0}_close4",7:"reg_simple_{0}_close5",8:"reg_simple_{0}_close4",9:"reg_simple_{0}_close6"};this.aliclick(null,"?tracelog=reg_simple_{0}_close");g[f]&&this.aliclick(null,"?tracelog="+g[f])}})})();