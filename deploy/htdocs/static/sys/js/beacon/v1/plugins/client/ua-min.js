(function(a){a.moduleManager.register("ua",function(){var k=this,q=k.globals,o={trident:0,webkit:0,gecko:0,presto:0,khtml:0,name:"other",ver:null},i={ie:0,firefox:0,chrome:0,safari:0,opera:0,konq:0,name:"other",ver:null},j={name:"",ver:null},c={win:false,mac:false,x11:false,name:"other"},d="other",e=q.win,p=e.navigator,b=p.userAgent,f=p.platform,h,l,g=function(r){var t=0;return parseFloat(r.replace(/\./g,function(){return(t++===0)?".":""}))};if(e.opera){o.ver=i.ver=g(e.opera.version());o.presto=i.opera=parseFloat(o.ver);o.name="presto";i.name="opera"}else{if(/AppleWebKit\/(\S+)/.test(b)){o.ver=g(RegExp["$1"]);o.webkit=o.ver;o.name="webkit";if(/Chrome\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.chrome=i.ver;i.name="chrome"}else{if(/Version\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.safari=i.ver;i.name="safari"}else{var n=1;if(o.webkit<100){n=1}else{if(o.webkit<312){n=1.2}else{if(o.webkit<412){n=1.3}else{n=2}}}i.safari=i.ver=n;i.name="safari"}}}else{if(/KHTML\/(\S+)/.test(b)||/Konqueror\/([^;]+)/.test(b)){o.ver=i.ver=g(RegExp["$1"]);o.khtml=i.konq=o.ver;o.name="khtml";i.name="konq"}else{if(/rv:([^\)]+)\) Gecko\/\d{8}/.test(b)){o.ver=g(RegExp["$1"]);o.gecko=o.ver;o.name="gecko";if(/Firefox\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.firefox=i.ver;i.name="firefox"}}else{if(/MSIE ([^;]+)/.test(b)){o.ver=i.ver=g(RegExp["$1"]);o.trident=i.ie=o.ver;o.name="trident";i.name="ie"}}}}}j.name=i.name;j.ver=i.ver;if(h=b.match(/360SE/)){j.name="se360";j.ver=3}else{if((h=b.match(/Maxthon/))&&(l=e.external)){j.name="maxthon";try{j.ver=g(l.max_version)}catch(m){j.ver=0.1}}else{if(h=b.match(/TencentTraveler\s([\d.]*)/)){j.name="tt";j.ver=g(h[1])||0.1}else{if(h=b.match(/TheWorld/)){j.name="theworld";j.ver=3}else{if(h=b.match(/SE\s([\d.]*)/)){j.name="sougou";j.ver=g(h[1])||0.1}}}}}c.win=f.indexOf("Win")==0;c.mac=f.indexOf("Mac")==0;c.x11=(f=="X11")||(f.indexOf("Linux")==0);if(c.win){if(/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(b)){if(RegExp["$1"]=="NT"){switch(RegExp["$2"]){case"5.1":c.win="XP";break;case"6.1":c.win="7";break;case"5.0":c.win="2000";break;case"6.0":c.win="Vista";break;default:c.win="NT";break}}else{if(RegExp["$1"]=="9x"){c.win="ME"}else{c.win=RegExp["$1"]}}}c.name="windows"+c.win}if(c.mac){c.name="mac"}if(c.x11){c.name="x11"}if(c.win=="CE"){d="windows mobile"}else{if(/ Mobile\//.test(b)){d="apple"}else{if((h=b.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))){d=h[0].toLowerCase()}}}return{engine:o,browser:i,extraBrowser:j,system:c,mobile:d,resolution:e.screen.width+"*"+e.screen.height,language:p.language||p.browserLanguage}})})(MAGNETO);
