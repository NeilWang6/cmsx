(function(a){a.moduleManager.register("cookieProcessor",function(){var f=this,c=f.tools,e=f.globals,d=e.doc,h=function(n){var q=n.split(/;\s/g),l=null,o=null,k=null,p={};if(c.isString(n)&&n.length>0){for(var m=0,j=q.length;m<j;m++){k=q[m].match(/([^=]+)=/i);if(k instanceof Array){l=unescape(k[1]);o=unescape(q[m].substring(k[1].length+1))}else{l=unescape(q[m]);o=""}p[l]=o}}return p},b=function(j){var i=new Date;j=new Date(i.getTime()+j);return";expires="+j.toGMTString()},g=function(j,l,i,n,k,m){var o=escape(j)+"="+escape(l);if(i instanceof Date){o+="; expires="+i.toUTCString()}if(c.isNumber(i)&&i!==0){o+=b(i*24*60*60*1000)}if(c.isString(n)&&n!==""){o+="; path="+n}if(c.isString(k)&&k!==""){o+="; domain="+k}if(m===true){o+="; secure"}return o};return{get:function(i){if(!c.isString(i)||i===""){return null}var j=h(d.cookie);return i in j?j[i]:null},getSub:function(i,j){var k=this.getSubCookies(i);if(k){if(!c.isString(j)||j===""){return null}return j in k?k[j]:null}else{return null}},getSubCookies:function(i){var j=this.get(i),k;if(j){k=c.parseParam(j,"|");return k}else{return null}},set:function(j,k,i){i=i||{};if(c.isString(j)&&k!==undefined){var l=g(j,k,i.expires,i.path,i.domain,i.secure);d.cookie=l}},setSub:function(j,l,k,i){if(!c.isString(j)||j===""){return}if(!c.isString(l)||l===""){return}if(!k){return}var m=this.getSubCookies(j),n={};if(m===null){m={}}n[l]=k;this.set(j,c.combineParam(m,n,"|",true),i)},setSubs:function(j,l,i){if(!c.isString(j)||j===""){return}var k=this.getSubCookies(j)||{};this.set(j,c.combineParam(k,l,"|",true),i)},remove:function(j,i){i=i||{};var k=g(j,"",new Date(0),i.path,i.domain,i.secure);d.cookie=k},removeSub:function(i,j){if(!c.isString(i)||i===""){return}if(!c.isString(j)||j===""){return}var k=this.getSubCookies(i);if(k&&k.hasOwnProperty(j)){delete k[j];this.set(i,c.combineParam(k,{},"|"))}}}},true)})(MAGNETO);
