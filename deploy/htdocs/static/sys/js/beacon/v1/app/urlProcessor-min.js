(function(a){a.moduleManager.register("urlProcessor",function(){var d=this,c=d.tools,e=window.location,b=function(i){var m={},n=i.split("&"),k=/([^=]*)=(.*)/;for(var g=0;g<n.length;g++){var f=k.exec(n[g]);if(!f){continue}var h=decodeURIComponent(f[1]);var l=f[2]?decodeURIComponent(f[2]):undefined;if(m[h]!==undefined){if(m[h].constructor!=Array){m[h]=[m[h]]}if(l){m[h].push(l)}}else{m[h]=l}}return m};return{getDomain:function(g){var f="";if(g){f=g.split("://")[1].toLowerCase();if(f.indexof("/")>-1){f=f.split("/")[0]}}else{f=e.host}return f},getParams:function(g){var f="",h=g.split("?")[1];if(h){f=b(g.split("?")[1])}return f},getParam:function(f,h){var g=this.getParams(f);return g[h]},setParams:function(h,k,l){h=h||e.href;var g=h.split("#"),f=h.split("?")[0],i=c.combineParam(this.getParams(h),k,"&",l),j=g[1]||"";if(i){f+="?"+i}if(j){f+="?"+j}return f}}},true)}(MAGNETO));
