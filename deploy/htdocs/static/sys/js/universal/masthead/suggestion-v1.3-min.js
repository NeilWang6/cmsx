(function(a){a(function(){var e,c="offer",f="sale",b=true,h=a("#alisearch-input"),g=a("#alisearch-submit"),d=a("#search-category");if("undefined"===typeof baseClick){a.getScript("http://"+a.styleDomain+"/js/sys/trace/aliclick-min.js")}a.use("ui-autocomplete",function(){h.autocomplete({source:function(j,i){e&&e.abort();e=a.ajax({url:"http://suggest.1688.com/bin/suggest",dataType:"script",data:a.paramSpecial({type:function(){return c},q:j.term}),success:function(){var p=window._suggest_result_,k=p.result||{},o=p.category,n=0,r,q,m;if(p.pCity){r=p.pCity[0][1]+p.pCity[0][2];k.splice(0,0,p.pCity[0])}if("undefined"!==typeof baseClick){q="?sectionexp="+f+"_search_suggest_show_"+(!!(p.pCity)?(encodeURIComponent(r))+"_":"")+encodeURIComponent(j.term);m="http://stat.1688.com/sectionexp.html";baseClick(m,q)}var l=a.map(k,function(u){var t=u[0].replace("_","<em>"),v=u[0].replace("_",""),s=!!u[2]?(u[1]+u[2]):u[1];t=t.replace("%","</em>");v=v.replace("%","");return{label:t,desc:s,value:v,index:n++}});if(d.length&&o){a.each(o,function(t,s){s.category=true;s.label=j.term,l.unshift(s)})}i(l)}})},select:function(j,k){if("undefined"!==typeof baseClick){var i="http://stat.1688.com/search/queryreport.html",l="?"+f+"_suggest_"+encodeURIComponent(this.value)+"_"+(/^\d+$/.test(k.item.desc)?(encodeURIComponent(k.item.desc))+"_":"")+encodeURIComponent(k.item.value)+"_"+k.item.index;baseClick(i,l)}if(d.length&&k.item.category){d.val(k.item.id)}else{d.val("")}this.value=k.item.value;g.click()},open:function(i,j){j.menu.element.width(473)},change:function(){return c},minLength:0,appendTo:"#alisearch-container",position:{my:"left top",at:"left bottom",offset:"-30 6"}});h.bind("focus.suggestion",function(){var i=a("#alisearch-basic-list .alisearch-current").attr("data-alisearch-type");switch(i){case"product":case"pifa":case"buy":c="offer";f="sale";b=true;break;case"company":c="company";f="company";b=true;break;default:b=false}a(this).autocomplete(b?"enable":"disable")}).triggerHandler("focus");h.data("autocomplete")._renderItem=function(i,j){return a("<li></li>").data("item.autocomplete",j).append(function(){if(d.length&&j.category){return'<a><span class="suggest-key">'+j.label+'</span><span class="suggest-category">在<em>“'+j.name+"”</em>下搜索</span></a>"}else{if(/^\d+$/.test(j.desc)){return'<a><span class="suggest-key">'+j.label+'</span><span class="suggest-result">约'+j.desc+"条结果</span></a>"}else{return'<a><span class="suggest-key">'+j.label+'</span><span class="suggest-city">在<em>“'+j.desc+"”</em>里找</span></a>"}}}).appendTo(i)}})})})(jQuery);
