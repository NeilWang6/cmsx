(function(){function T(br,bq){for(var bp in bq){br[bp]=bq[bp]}}var U=["-resize","beforeeditdelete","beforeeditadd","beforeeditmove","drawend","drawstart","selectstart","\u8857\u9053","\u5168\u56fd","\u7f29\u5c0f","\u653e\u5927","refresh","zoomcursor","zoomout","zoomin","moveright","moveleft","movedown","moveup","auto","#FF6600","solid ","left","#FFFFFF","current","contextmenu","center","centerandzoom","dblclick","mouseout","mouseover","touchstart","maptypechanged","geocenterchange","dragend","dragstart","scalestart","moveend","scaleend","aftermove","movestart","afterscalechange","beforescalechange","initialize","zoomlevelschange","projectionchange","afterresize","click","number","nowrap","12px","url(#default#VML)","dotted","stroke-dasharray","stroke-width","#000000","http://www.w3.org/2000/svg","round","transparent","polygon","polyline","oval","start","mouseup","mousemove","mousedown","pointer","object","_ali_PrintPanel","relative","repeat-x","transform","MozTransform","WebkitTransform","string","progid:DXImageTransform.Microsoft.Alpha(opacity=","default","100%","absolute","visible","hidden","none","undefined","__E__"];
var aL=(location.protocol=="https:"?"https:":"http:")+"//api.ditu.aliyun.com/v0.24/img/";function N(){}function S(bp){bp=bp?bp:a0(arguments)[0];bh(bp);be(document,bp.type,[bp])}function Q(bs,br,bp,bq){return bd(bs,br,K(bs)?aZ(bp,bq):a6(bp,bq))}function P(bp){return document.all?bp.button:(bp.button==2?2:1)}function M(){var bq=N.allEvents;if(bq){for(var bp=bq.length-1;bp>=0;bp--){a7(bq[bp])}}N.allEvents=null}function K(bp){return(bp.tagName||bp==window||bp==document)}function J(){if(!N.allEvents){N.allEvents=[]
}if(!N.unLoadListener){N.unLoadListener=bd(window,"unload",M)}}function bh(){var bq=a0(arguments)[0];if(!bq){return}try{bq.stopPropagation()}catch(bp){bq.cancelBubble=true}}function bg(bp,bq){if(!bp){return}if(bp.parentNode&&!bq){bp.parentNode.removeChild(bp)}if(!bq){a9(bp)}var br;while(br=bp.firstChild){bg(br)}}function be(bu,bp,by,bA){if(K(bu)){try{if(bu.fireEvent){bu.fireEvent("on"+bp,by?by[0]:null)}if(bu.dispatchEvent){var bx=document.createEvent("MouseEvent"),bw=by?by[0]:null;if(bx&&bw){bx.initMouseEvent(bp,(bA!==false),true,bw.view,bw.detail,bw.screenX,bw.screenY,bw.clientX,bw.clientY,bw.ctrlKey,bw.altKey,bw.shiftKey,bw.metaKey,bw.button,bw.relatedTarget);
bx.wheelDelta=bw.wheelDelta;bu.dispatchEvent(bx)}}}catch(bw){}}if(!by){by=[]}var bq=true,bz=bu[U[83]+bp];if(bz&&bz.length>0){bz=bz.concat([]);var bv=bz.length;for(var bt=0;bt<bv;bt++){var bs=bz[bt];if(bs&&bs.handle){var br=bs.handle.apply(bu,by);if(br===false){bq=false}}}}return bq}function bd(bt,bq,bs){if(!bs){return}if(K(bt)){bs=aZ(bt,bs);if(bt.addEventListener){bt.addEventListener(bq,bs,false)}else{if(bt.attachEvent){bt.attachEvent("on"+bq,bs)}else{var bp=bt["on"+bq];if(typeof(bp)=="function"){bt["on"+bq]=function(){bp();
bs()}}else{bt["on"+bq]=bs}}}}var br={object:bt,eventName:bq,handle:bs};if(!bt.__E__){bt.__E__=[]}if(aa(bt.__E__,bq)<0){bt.__E__.push(bq)}if(!bt[U[83]+bq]){bt[U[83]+bq]=[]}bt[U[83]+bq].push(br);if(bq!="unload"){J();N.allEvents.push(br)}return br}function bc(){var bq=a0(arguments)[0];if(!bq){return}try{bq.stopPropagation()}catch(bp){bq.cancelBubble=true}try{bq.preventDefault()}catch(bp){bq.returnValue=false}}function ba(bs,br){var bp={x:0,y:0};var bq=bs;while(bq&&bq.offsetParent&&bq!=br){bp.x+=bq.offsetLeft;bp.y+=bq.offsetTop;
bq=bq.offsetParent;if(bq){bp.x-=bq.scrollLeft;bp.y-=bq.scrollTop}}return bp}function a9(bt,br){if(!bt||!bt.__E__){return}if(!br){for(var bp=bt.__E__.length-1;bp>=0;bp--){a9(bt,bt.__E__[bp])}return}var bs,bq=bt[U[83]+br];while(bs=bq.pop()){a7(bs)}}function a8(bs,bq){var bw,bt,bv=bs.changedTouches;bw=bv?bv[0].clientX:bs.clientX;bt=bv?bv[0].clientY:bs.clientY;if(typeof bw!=U[82]&&bq.getBoundingClientRect){var bu=bq.getBoundingClientRect();return{x:bw-bu.left,y:bt-bu.top}}bw=bv?bv[0].offsetX:bs.offsetX;bt=bv?bv[0].offsetY:bs.offsetY;
if(typeof bw!=U[82]){var bp=bs.target||bs.srcElement;var br={x:bw,y:bt};while(bp&&bp!=bq){if(!(bp.clientWidth==0&&bp.clientHeight==0&&bp.offsetParent&&bp.offsetParent.nodeName=="TD")){br.x+=bp.offsetLeft;br.y+=bp.offsetTop}bp=bp.offsetParent;if(bp){br.x-=bp.scrollLeft;br.y-=bp.scrollTop}else{var bx=ba(bq);return{x:br.x-bx.x,y:br.y-bx.y}}}return br}bw=bv?bv[0].pageX:bs.pageX;bt=bv?bv[0].pageY:bs.pageY;if(typeof bw!=U[82]){var br=ba(bq);return{x:bw-br.x,y:bt-br.y}}return{x:0,y:0}}function a7(bp){if(!bp||!bp.object){return
}if(K(bp.object)){if(bp.object.removeEventListener){bp.object.removeEventListener(bp.eventName,bp.handle,false)}else{if(bp.object.detachEvent){bp.object.detachEvent("on"+bp.eventName,bp.handle)}else{bp.object["on"+bp.eventName]=null}}}az(bp.object[U[83]+bp.eventName],bp);az(N.allEvents,bp);delete bp.object;delete bp.handle;delete bp.eventName;bp=null}function a6(bq,bp){return function(){return bp.apply(bq,arguments)}}function a0(bp){if(!bp){bp=[]}if(!bp[0]){bp[0]=window.event}if(bp[0]&&!bp[0].target&&bp[0].srcElement){bp[0].target=bp[0].srcElement
}return bp}function aZ(bp,bq){return function(){var bt=a0(arguments),bw,bv;if(bt&&(bw=bt[0])&&(bv=bw.target)&&bv.__pointerEvents==U[81]){if(bw.__copyed==true){return}var br=typeof(bw.pageX)!=U[82]?(bw.pageX):(bw.clientX),by=typeof(bw.pageY)!=U[82]?(bw.pageY):(bw.clientY);if(document.elementFromPoint(br,by)!=bv){br-=document.documentElement.scrollLeft+document.body.scrollLeft;by-=document.documentElement.scrollTop+document.body.scrollTop}var bs=[],bx=bv;bv.style.visibility=U[80];bs.push(bv);do{var bu=document.elementFromPoint(br,by);
if(bu!=bx&&bu&&bu.__pointerEvents==U[81]){bu.style.visibility=U[80];bs.push(bu);bx=bu}else{break}}while(bu);while(bv=bs.pop()){bv.style.visibility=U[79]}bw.__copyed=true;if(bu){be(bu,bw.type,bt)}return}bq.apply(bp,bt)}}T(N,{toDocument:S,bind:Q,getEventButton:P,clearAllListeners:M,isHtmlControl:K,init:J,returnTrue:bh,deposeNode:bg,trigger:be,addListener:bd,returnFalse:bc,getPageOffset:ba,clearListeners:a9,getEventPosition:a8,removeListener:a7,getCallback:a6,getWindowEvent:a0,createAdapter:aZ});function aj(){}function aY(bu,bq){bq=bq?bq:{};
var bp;if(bq.spritePoint&&(bq.spriteSize||bq.size)){if(!bq.spriteSize){bq.spriteSize=bq.size}if(!bq.size){bq.size=bq.spriteSize}bp=document.createElement("div");ad(bp,{overflow:U[80]});var br=bq.imageSize?{x:bq.imageSize.x*bq.size.x/bq.spriteSize.x,y:bq.imageSize.y*bq.size.y/bq.spriteSize.y}:null;var bs=aY(bu,{position:{x:-bq.spritePoint.x*bq.size.x/bq.spriteSize.x,y:-bq.spritePoint.y*bq.size.y/bq.spriteSize.y},size:br,utf:bq.utf});ad(bs,{position:U[78]});bp.appendChild(bs)}else{if(bu.indexOf(".png")>0&&(bq.utf!==false)&&aU(bq.utf)){bp=document.createElement("div");
ad(bp,{overflow:U[80]});var bt=document.createElement("img");ad(bt,{visibility:U[80],width:U[77],height:U[77]});bd(bt,"load",aW);bp.appendChild(bt)}else{bp=document.createElement("img");bp.hspace=0}}ab(bp,bu);if(bq.position){aS(bp,bq.position)}if(bq.size){aF(bp,bq.size)}return bp}function aX(bp){return bp.parentNode&&bp.parentNode.nodeType!=11}function aW(){a9(this);var bp=this.parentNode,bq=this.src;ad(bp,{filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+bq+'")'});ad(this,{position:U[78]})
}function aV(bt,bs,bp){var bq=bt.style;bp=bp?bp:U[76];if(bs.indexOf("openhand")>=0&&!window.chrome&&!document.all){try{bq.cursor="-moz-grab";return}catch(br){}try{bq.cursor="-webkit-grab";return}catch(br){}}if(bs.indexOf("closedhand")>=0&&!window.chrome&&!document.all){try{bq.cursor="-moz-grabbing";return}catch(br){}try{bq.cursor="-webkit-grabbing";return}catch(br){}}if(document.all){bs=bs.replace(new RegExp("\\)\\s*[0-9]+\\s+[0-9]+"),")")}if(bs.toLowerCase().indexOf("url")>=0){try{bq.cursor=bs+","+bp;return
}catch(br){}}try{bq.cursor=bs;return}catch(br){}try{bq.cursor=bp;return}catch(br){}}function aU(bp){if(bp&&document.all){return true}if(typeof(aj._UFT)==U[82]){aj._UFT=(document.all&&!window.XMLHttpRequest)?true:false}return aj._UFT}function aT(bq,bp){ad(bq,{filter:(bp<1?(U[75]+parseInt(bp*100)+")"):""),MozOpacity:bp,opacity:bp})}function aS(bq,bp){ad(bq,{left:Math.round(bp.x)+"px",top:Math.round(bp.y)+"px"})}function aR(bq){var bp=aj.sln;if(!bp){return}for(var br=bp.length-1;br>=0;br--){if(bp[br].src==bq){bg(bp[br]);
bp[br].src="";bp[br].removeAttribute("src");bp.splice(br,1);break}}}function aH(bp){if(document.all){bp.unselectable="on";bp.onselectstart=aB}else{ad(bp,{MozUserSelect:"-moz-none"});ad(bp,{WebkitUserSelect:U[81]})}}function aF(bq,bp){ad(bq,{width:Math.round(bp.x)+"px",height:Math.round(bp.y)+"px"})}function aE(br,bq){for(var bp in bq){br[bp]=bq[bp]}}function aB(){return false}function az(bs,br,bq){for(var bp=bs.length-1;bp>=0;bp--){if(bs[bp]==br){bs.splice(bp,1);if(!bq){return}}}return}function ay(bx,bD,bz,bE,bs){bD=Math.round(bD%360);
var bH=bD*Math.PI/180,bF=bx.style;var bv,bt=U[74];if(typeof(bF[(bv=U[73])])==bt||typeof(bF[(bv=U[72])])==bt||typeof(bF[(bv=U[71])])==bt){var bu=(bD==0)?"":"rotate("+bD+"deg)",bw={};bw[bv]=bu;ad(bx,bw);if(bE&&bs&&bz){var bq=bs.x,bp=bs.y,bC=bz.x,bA=bz.x,bB=bE.x,by=bE.y,bI;var br=Math.sqrt(Math.pow(bq-bC/2,2)+Math.pow(bp-bA/2,2));if(br>0){var bG=Math.acos((bp-bA/2)/br);if(bq-bC/2<0){bG=-bG}bI={x:bB+bq-bC/2-br*Math.sin(bG-bH),y:by+bp-bA/2-br*Math.cos(bG-bH)};aS(bx,bI)}}return true}if(typeof(bF.filter)==U[74]&&document.body.filters){ad(bx,{filter:(bD==0)?"":"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11="+Math.cos(bH)+",M12="+(-Math.sin(bH))+",M21="+Math.sin(bH)+",M22="+Math.cos(bH)+")"});
if(bE&&bs&&bz){var bq=bs.x,bp=bs.y,bC=bz.x,bA=bz.x,bB=bE.x,by=bE.y,bI;if(bD<=90){bI={x:(((bA-bp)*Math.tan(bH)+bq)*Math.cos(bH)),y:((bp+bq*Math.tan(bH))*Math.cos(bH))}}else{if(bD<=180){bI={x:(((bC-bq)*Math.tan(bH-Math.PI/2)+(bA-bp))*Math.cos(bH-Math.PI/2)),y:(((bA-bp)*Math.tan(bH-Math.PI/2)+bq)*Math.cos(bH-Math.PI/2))}}else{if(bD<=270){bI={x:((bp*Math.tan(bH-Math.PI)+(bC-bq))*Math.cos(bH-Math.PI)),y:(((bC-bq)*Math.tan(bH-Math.PI)+(bA-bp))*Math.cos(bH-Math.PI))}}else{bI={x:((bq*Math.tan(bH-Math.PI*3/2)+bp)*Math.cos(bH-Math.PI*3/2)),y:((bp*Math.tan(bH-Math.PI*3/2)+(bC-bq))*Math.cos(bH-Math.PI*3/2))}
}}}aS(bx,{x:bB-bI.x+bq,y:by-bI.y+bp})}return true}return false}function ax(bt){if(!window._ali_noPrint){window._ali_noPrint=true;var br="@media print{.AliNoPrint{display:none}}",bq=document.createElement("style");try{bq.setAttribute("type","text/css");if(bq.styleSheet){bq.styleSheet.cssText=br}else{bq.appendChild(document.createTextNode(br))}var bp=document.head;if(!bp){bp=document.getElementsByTagName("head")[0]}bp.appendChild(bq)}catch(bs){}}bt.className="AliNoPrint"}function aw(bs,bw){var bq=aj.sln,bv=new Date().valueOf();
if(!bq){bq=aj.sln=[]}else{var bp=bq.length;for(var bt=0;bt<bq.length;bt++){if(bq[bt]._slt-bv>5000){bg(bq[bt]);bq.splice(bt,1);bt--}else{break}}}var br=document.createElement("script");br.defer=true;bq.push(br);br.charset=bw?bw:"utf-8";var bu=document.body?document.body:document.head;bu.insertBefore(br,bu.firstChild);br.src=bs}function at(bq,bp,bs){for(var br=bq.firstChild;br;br=br.nextSibling){if(br._isbg){bg(br);break}}if(!bp){ad(bq,{backgroundImage:""});return}bs=bs?bs:{};if(bq.canHaveChildren!==false&&(bs.canPrint||bp.indexOf(".png")>0&&(bs.utf!==false)&&aU(bs.utf))){var bt=aY(bp,{utf:bs.utf}),bv=bt;
if(bs.spritePoint&&bs.imageSize){bv=document.createElement("div");var bw=bs.repeat==U[70]||bs.repeat=="repeat";var bu=bs.repeat=="repeat-y"||bs.repeat=="repeat";ad(bt,{position:U[69],border:"0px",width:(bw?U[77]:(bs.imageSize.x+"px")),height:(bu?U[77]:(bs.imageSize.y+"px")),left:(bw?(100*bs.spritePoint.x/bs.imageSize.x+"%"):(-bs.spritePoint.x+"px")),top:(bu?(100*bs.spritePoint.y/bs.imageSize.y+"%"):(-bs.spritePoint.y+"px")),zIndex:-1});bv.appendChild(bt)}ad(bv,{position:U[78],border:"0px",width:U[77],height:U[77],left:"0px",top:"0px",zIndex:-1,overflow:U[80]});
bq.appendChild(bv);bv._isbg=true}else{var bx=bs.spritePoint||{x:0,y:0};ad(bq,{backgroundImage:"url("+bp+")",backgroundPosition:(-bx.x)+"px "+(-bx.y)+"px"})}}function aq(bu,bs){if(!window[U[68]+bs]){window[U[68]+bs]=true;var br=".AliPrintPanel"+bs+"{overflow:"+bs+";}";br+="@media print{.AliPrintPanel"+bs+"{overflow:visible;display:inline;}}";var bq=document.createElement("style");try{bq.setAttribute("type","text/css");if(bq.styleSheet){bq.styleSheet.cssText=br}else{bq.appendChild(document.createTextNode(br))}var bp=document.head;
if(!bp){bp=document.getElementsByTagName("head")[0]}bp.appendChild(bq)}catch(bt){}}bu.className="AliPrintPanel"+bs}function af(bp){return(typeof(bp)==U[67])?bp:document.getElementById(bp)}function ae(bp,bx,br,bv){var bq=bp.style;var bu,bw=U[74];if(typeof(bq[(bu=U[73])])==bw||typeof(bq[(bu=U[72])])==bw||typeof(bq[(bu=U[71])])==bw){var bs=(bx==1)?"":"scale("+bx+")",bt={};bt[bu]=bs;ad(bp,bt);if(br&&bv){aS(bp,{x:br.x-bv.x*(bx-1),y:br.y-bv.y*(bx-1)})}return true}if(typeof(bq.zoom)==U[74]&&typeof(bq.boxSizing)!=U[74]){if(bq.zoom!=bx){ad(bp,{zoom:bx})
}if(br&&bv){aS(bp,{x:br.x-bv.x*(bx-1),y:br.y-bv.y*(bx-1)})}return true}return false}function ad(bp,bw,bt){if(bt){bp._cssObj=false}if(bw&&bw.cursor==U[66]&&document.all){bw.cursor="hand"}if(document.all&&!bt&&bp._cssObj!==false&&typeof(bp.style.cssText)==U[74]){var bx,bv=bp._cssObj,bs=new RegExp("[A-Z]","g");if(!bv){bv=bp._cssObj={}}var br=0;for(bx in bw){var bu;switch(bx){case"styleFloat":bu="float";break;default:bu=bx.replace(bs,function(by){return"-"+by.toLowerCase()});break}bv[bu]=bw[bx];br++}if(br<2){aE(bp.style,bw);
return}var bq=[];for(bx in bv){bq.push(bx+":"+bv[bx])}if(document.all){bp.style.cssText=bq.join(";")}else{bp.setAttribute("style",bq.join(";"))}}else{aE(bp.style,bw)}}function ac(bp){var bq={x:bp.offsetWidth,y:bp.offsetHeight};if(bp==document.body&&!document.all){bq.y=bp.clientHeight}if(!bq.x){bq.x=bp.clientWidth}if(!bq.x){bq.x=parseInt(bp.style.width)}if(!bq.y){bq.y=bp.clientHeight}if(!bq.y){bq.y=parseInt(bp.style.height)}if(!bq.x||!bq.y){bp=bp.parentElement||bp.parentNode;while(bp){if(!bq.x&&bp.offsetWidth){bq.x=bp.offsetWidth
}if(!bq.y&&bp.offsetHeight){bq.y=bp.offsetHeight}if(bq.x&&bq.y){break}bp=bp.parentElement||bp.parentNode}}return bq}function ab(bp,br){if(!document.all){bp.removeAttribute("src")}bp.src=br;var bq=bp.firstChild;while(bq){if(bq.nodeName=="IMG"){break}bq=bq.nextSibling}if(!bq){return}a9(bq);if(br.indexOf(".png")>0&&aU()){ad(bq,{visibility:U[80]});bd(bq,"load",aW)}else{ad(bp,{filter:""});ad(bq,{visibility:""})}bq.src=br}function aa(br,bq){for(var bp=br.length-1;bp>=0;bp--){if(br[bp]==bq){return bp}}return -1}T(aj,{createImage:aY,isInDocument:aX,setAlphaImage:aW,setCursor:aV,useFilterTransparent:aU,setOpacity:aT,setElementPosition:aS,removeScript:aR,setUnSelectable:aH,setElementSize:aF,setProperty:aE,falseFunction:aB,deleteFrom:az,setRotate:ay,noPrint:ax,loadScript:aw,setBackgroundImage:at,setPrintPanel:aq,getElement:af,setZoom:ae,setStyle:ad,getElementSize:ac,setImageSrc:ab,indexOf:aa});
function F(br,bq,bp){aE(this,{div:br,handle:bq,container:br,interval:256});aE(this,bp)}T(F.prototype,{onMouseMove:function(bw){bc(bw);var bp=a8(bw,this.container),bt=this.rtp;aE(this,{lp:bp,moveed:true});if(bt){var br=this.dsp,bv=this.sp;var bs=br.x+bt.x*(bp.x-bv.x),bq=br.y+bt.y*(bp.y-bv.y);if(bt.x==0){bp.x=this.sp.x}if(bt.y==0){bp.y=this.sp.y}var bu=this.rtpLimit;if(bu){if(bu.minX){bs=Math.max(bs,bu.minX)}if(bu.maxX){bs=Math.min(bs,bu.maxX)}if(bu.minY){bq=Math.max(bq,bu.minY)}if(bu.maxY){bq=Math.min(bq,bu.maxY)
}}aS(this.div,{x:bs,y:bq})}},onMouseDown:function(br){bc(br);var bs=this.div;if(bs.setCapture){bs.setCapture()}var bp=a8(br,this.container);aE(this,{ml:Q(document,U[64],this,this.onMouseMove),ul:Q(document,U[63],this,this.onMouseUp),sp:bp,lp:bp,times:0,timeout:window.setInterval(a6(this,this.onTime),this.interval)});if(this.rtp){var bq=bs.style;this.dsp={x:parseInt(bq.left),y:parseInt(bq.top)}}this.handle(bp,bp,U[62])},onTime:function(){if(this.div&&this.moveed){if(this.times||Math.abs(this.sp.x-this.lp.x)+Math.abs(this.sp.y-this.lp.y)>2){this.handle(this.sp,this.lp);
this.times++;this.moveed=false}}},onMouseUp:function(bp){this.onTime();bc(bp);a7(this.ml);a7(this.ul);window.clearInterval(this.timeout);delete this.timeout;delete this.div;delete this.container;if(document.releaseCapture){document.releaseCapture()}this.handle(this.sp,this.lp,"end")}});function Z(br,bq,bp){return bd(br,U[65],function(bt){if(P(bt)!=1){return}var bs=new F(br,bq,bp);bs.onMouseDown(bt)})}T(F,{setup:Z});function bk(bp,bq){this.x=bp;this.y=bq}function a(bq,bp){this.min=bq;this.max=bp}T(a.prototype,{getMax:function(){return this.max
},extend:function(br){var bq=br.x,bt=br.y,bs=this.min,bp=this.max;if(bs.x>bq){bs.x=bq}if(bp.x<bq){bp.x=bq}if(bs.y>bt){bs.y=bt}if(bp.y<bt){bp.y=bt}return this},getMin:function(){return this.min},containsRectangle:function(bp){return(bp.min.x>=this.min.x&&bp.max.x<=this.max.x&&bp.min.y>=this.min.y&&bp.max.y<=this.max.y)},containsPoint:function(bp){return(bp.x>=this.min.x&&bp.x<this.max.x&&bp.y>=this.min.y&&bp.y<this.max.y)}});function L(){if(arguments.length<1){return}this.div=document.createElement("div")}T(L.prototype,{setLineBorder:function(){},init:function(bp,bq,br){},setPointerEvents:function(bp){this.div.__pointerEvents=bp
},setPosition:function(bp){ad(this.div,{position:U[78],left:bp.x+"px",top:bp.y+"px"})},setScale:function(){},setLineColor:function(){},getPanel:function(){return this.div},clear:function(){},setLineStyle:function(){},setFillColor:function(){},drawPolyline:function(bp){return this.drawPolygon(bp,true)},setLineWeight:function(){},setOpacity:function(){},setLineArrow:function(){}});function aM(bp){bp=bp?bp:{};var bq=this.div=document.createElement("canvas");ad(bq,{position:U[78]});this.shape=bp.shape}aM.prototype=new L();
T(aM.prototype,{init:function(bp,bq,br){aE(this,{minPoint:bp,maxPoint:bq,scale:br});this.clear();switch(this.shape){case U[61]:this.pathArr.push({type:U[61]});break}},setPosition:function(bp){if(!bp){return}this.lastPosition=bp;var bq=this.lineWeight;ad(this.div,{position:U[78],left:(bp.x-bq/2)+"px",top:(bp.y-bq/2)+"px"})},setScale:function(bs){this.lastScale=bs;var br=this.maxPoint,bp=this.minPoint,bq=this.lineWeight;ad(this.div,{width:Math.abs(br.x-bp.x)/bs+bq+"px",height:Math.abs(br.y-bp.y)/bs+bq+"px"});this.reDraw()
},drawPolygon:function(bq,bp){this.pathArr.push({points:bq,type:bp?U[60]:U[59]});this.lastScale=this.scale;this.reDraw()},setLineColor:function(bp){if(bp==U[58]){bp=""}this.lineColor=bp;this.reDraw()},clear:function(){this.pathArr=[]},setFillColor:function(bp){if(bp==U[58]){bp=""}this.bgcolor=bp;this.reDraw()},setLineWeight:function(bp){this.lineWeight=bp;this.reDraw()},reDraw:function(){var bL=this.scale,bw=this.lastScale,bH=this.maxPoint,bA=this.minPoint,bz=this.div,bq=this.lineWeight,bp=this.pathArr;if(!bH||!bp||bp.length==0){return
}aE(bz,{width:Math.abs(bH.x-bA.x)/this.lastScale+bq,height:Math.abs(bH.y-bA.y)/this.lastScale+bq});var bC=bz.getContext("2d");aE(bC,{fillStyle:this.bgcolor,globalAlpha:this.opacity});if(bq>0&&this.lineColor!=U[58]&&this.lineColor!=""){aE(bC,{lineCap:U[57],lineJoin:U[57],lineWidth:bq*bw/bL,strokeStyle:this.lineColor})}bC.beginPath();bC.scale(bL/bw,bL/bw);var by=bq*bw/bL/2;var bK=bA.x,bI=bA.y,bJ=bH.x,bG=bH.y;for(var bF=0;bF<bp.length;bF++){var bB=bp[bF];switch(bB.type){case U[60]:case U[59]:var bD,bE=bB.points,bu=bE.length;
bD=bE[0];bC.moveTo((bD.x-bK)/bL+by,(bD.y-bI)/bL+by);for(var bF=1;bF<bu;bF++){bD=bE[bF];bC.lineTo((bD.x-bK)/bL+by,(bD.y-bI)/bL+by)}if(bB.type==U[59]){bD=bE[0];bC.lineTo((bD.x-bK)/bL+by,(bD.y-bI)/bL+by)}break;case U[61]:var bs=(bJ-bK)/2/bL+by,br=(bG-bI)/2/bL+by;var bv=(bJ-bK)/2/bL,bt=(bG-bI)/2/bL,bs=bv+by,br=bt+by,bx=0.5522848;bC.moveTo(bs-bv,br);bC.bezierCurveTo(bs-bv,br-bt*bx,bs-bv*bx,br-bt,bs,br-bt);bC.bezierCurveTo(bs+bv*bx,br-bt,bs+bv,br-bt*bx,bs+bv,br);bC.bezierCurveTo(bs+bv,br+bt*bx,bs+bv*bx,br+bt,bs,br+bt);
bC.bezierCurveTo(bs-bv*bx,br+bt,bs-bv,br+bt*bx,bs-bv,br);break}}if(this.bgcolor){bC.fill()}if(bq>0&&this.lineColor!=U[58]&&this.lineColor!=""){bC.stroke()}},setOpacity:function(bp){this.opacity=bp;this.reDraw()}});function X(){if(typeof(aM._isSupport)==U[82]){aM._isSupport=!!document.createElement("canvas").getContext}return aM._isSupport}T(aM,{isSupport:X});function ah(){var bp=this.div=document.createElement("div");ad(bp,{position:U[78]});this.ctx=new window.jsGraphics(bp)}ah.prototype=new L();T(ah.prototype,{init:function(bp,bq,br){aE(this,{minPoint:bp,maxPoint:bq,scale:br});
this.clear()},setScale:function(br){this.lastScale=this.scale=br;var bq=this.maxPoint,bp=this.minPoint;ad(this.div,{width:Math.abs(bq.x-bp.x)/br+"px",height:Math.abs(bq.y-bp.y)/br+"px"});this.reDraw()},drawPolygon:function(bq,bp){this.pathArr.push({points:bq,type:bp?U[60]:U[59]});this.lastScale=this.scale;this.reDraw()},setLineColor:function(bp){if(bp==U[58]){bp=""}this.lineColor=bp;this.reDraw()},clear:function(){this.pathArr=[];bg(this.div,true)},setLineStyle:function(bp){this.lineStyle=bp.toLowerCase()},setLineWeight:function(bp){this.lineWeight=bp;
this.reDraw()},setFillColor:function(bp){if(bp==U[58]){bp=""}this.bgcolor=bp;this.reDraw()},reDraw:function(){var bM=this.scale,bv=this.lastScale,bI=this.maxPoint,bA=this.minPoint,bz=this.div,bp=this.pathArr;if(!bI||!bp||bp.length==0){return}aE(bz,{width:Math.abs(bI.x-bA.x)/bv,height:Math.abs(bI.y-bA.y)/bv});var bC=this.ctx,bL=bA.x,bJ=bA.y,bK=bI.x,bG=bI.y;bC.clear();for(var bF=0;bF<bp.length;bF++){var bB=bp[bF];switch(bB.type){case U[60]:case U[59]:var bD,bE=bB.points,bt=bE.length,bw=[],bH=[];for(var bF=0;bF<bt;
bF++){bD=bE[bF];bw.push((bD.x-bL)/bM);bH.push((bD.y-bJ)/bM)}if(this.bgcolor){bC.setColor(this.bgcolor);bC.fillPolygon(bw,bH)}if(this.lineColor){bC.setColor(this.lineColor);bC.setStroke((this.lineStyle&&this.lineStyle!="solid"&&window.Stroke)?window.Stroke.DOTTED:this.lineWeight);bC.drawPolyline(bw,bH)}break;case U[61]:var by=this.lineWeight*bv/bM/2;var br=(bK-bL)/2/bM+by,bq=(bG-bJ)/2/bM+by;var bu=(bK-bL)/2/bM,bs=(bG-bJ)/2/bM,br=bu+by,bq=bs+by,bx=0.5522848;bC.drawEllipse(br-bu,bq-bs,br+bu,bq+bs);break}}bC.paint()
},setOpacity:function(bp){ad(this.div,{filter:U[75]+parseInt(bp*100)+")",MozOpacity:bp,opacity:bp})}});function W(){return !!window.jsGraphics}T(ah,{isSupport:W});function bl(bp){bp=bp?bp:{};var br=U[56];var bs=this.div=document.createElementNS(br,"svg");ad(bs,{position:U[78]});if(!window.opera||!window.opera.version){bs.__pointerEvents=U[81]}this.shape=bp.shape;var bq=this.path=this.create();bs.appendChild(bq);this.lineBorder=0}bl.prototype=new L();T(bl.prototype,{setLineBorder:function(bs,bp,br){var bq=this.border;
if(bs){if(!bq){bq=this.border=this.create();bq.setAttribute("fill",U[81]);this.div.insertBefore(bq,this.div.firstChild)}this.lineBorder=bs;bq.setAttribute("stroke",bp?bp:U[55]);bq.setAttribute("opacity",br?br:1)}else{if(bq){bg(bq);delete this.border}}},init:function(bp,bq,br){aE(this,{minPoint:bp,maxPoint:bq,scale:br});this.clear()},setPointerEvents:function(bp){this.path.__pointerEvents=bp},setPosition:function(bp){if(!bp){return}this.lastPosition=bp;var bq=this.lineWeight,br=this.lineBorder;ad(this.div,{position:U[78],left:(bp.x-bq/2-br)+"px",top:(bp.y-bq/2-br)+"px"})
},setScale:function(bw){var bp=this.minPoint,br=this.maxPoint,bq=this.lineWeight,bv=this.lineBorder;if(!br){return}ad(this.div,{width:(br.x-bp.x)/bw+bq+bv*2+"px",height:(br.y-bp.y)/bw+bq+bv*2+"px"});this.path.setAttribute(U[71],"scale("+(this.scale/bw)+") translate("+((bv+bq/2)*bw/this.scale)+","+((bv+bq/2)*bw/this.scale)+")");if(this.border){this.border.setAttribute(U[71],this.path.getAttribute(U[71]))}if(!this.lastWeight||Math.floor(this.lastWeight*this.scale/bw)!=bq){this.lastWeight=bq;this.path.setAttribute(U[54],(bq)/this.scale*bw);
if(this.border){this.border.setAttribute(U[54],(bq+bv*2)/this.scale*bw)}}var bs=this.dashArray;if(bs){var bu=[];for(var bt=0;bt<bs.length;bt++){bu.push(bs[bt]/this.scale*bw)}this.path.setAttribute(U[53],bu)}else{this.path.removeAttribute(U[53])}this.lastScale=bw},drawPolygon:function(by,bu){var bv=by.length,bs=by[0],bz=[],bq=this.scale,bw=this.minPoint,br=bw.x,bp=bw.y,bx;if(bv>1){bx=by[0];bz.push("M");bz.push(parseInt((bx.x-br)/bq));bz.push(parseInt((bx.y-bp)/bq));bz.push("L");for(var bt=1;bt<bv;bt++){bx=by[bt];
bz.push(parseInt((bx.x-br)/bq));bz.push(parseInt((bx.y-bp)/bq))}if(!bu){bx=by[0];bz.push(parseInt((bx.x-br)/bq));bz.push(parseInt((bx.y-bp)/bq))}this.pathArr.push(bz.join(" "));this.path.setAttribute("d",this.pathArr.join(" "));if(this.border){this.border.setAttribute("d",this.pathArr.join(" "))}}},setLineColor:function(bp){if(bp==U[58]||!bp){bp=U[81]}this.lineColor=bp;this.path.setAttribute("stroke",(this.lineWeight>0&&this.lineColor!=U[58]&&this.lineColor!="")?this.lineColor:U[81])},clear:function(){switch(this.shape){case U[61]:this.path.setAttribute("cx",(this.maxPoint.x-this.minPoint.x)/2);
this.path.setAttribute("cy",(this.maxPoint.y-this.minPoint.y)/2);this.path.setAttribute("rx",(this.maxPoint.x-this.minPoint.x)/2);this.path.setAttribute("ry",(this.maxPoint.y-this.minPoint.y)/2);break;default:this.pathArr=[];this.path.setAttribute("d","M 0 0");if(this.border){this.border.setAttribute("d","M 0 0")}break}delete this.lastWeight},create:function(){var bq=U[56],bp;switch(this.shape){case U[61]:bp=document.createElementNS(bq,"ellipse");break;default:bp=document.createElementNS(bq,"path");bp.setAttribute("stroke-linecap",U[57]);
bp.setAttribute("stroke-linejoin",U[57]);break}return bp},setLineStyle:function(bq){var bp;switch(bq.toLowerCase()){case U[52]:bp=[1,10];break;case"dashed":bp=[10,10];break;default:break}this.dashArray=bp;this.setScale(this.lastScale);this.setPosition(this.lastPosition)},setFillColor:function(bp){if(bp==U[58]||!bp){bp=U[81]}this.bgcolor=bp;this.path.setAttribute("fill",(bp?bp:U[81]))},setLineWeight:function(bp){this.lineWeight=parseInt(bp);this.path.setAttribute("stroke",(this.lineWeight>0&&this.lineColor!=U[58]&&this.lineColor!="")?this.lineColor:U[81]);
this.setScale(this.lastScale);this.setPosition(this.lastPosition)},setOpacity:function(bp){this.path.setAttribute("opacity",this.opacity=parseFloat(bp))}});function V(){if(typeof(bl._isSupport)==U[82]){if(document.createElementNS){var bp=U[56];var bq=document.createElementNS(bp,"svg");bl._isSupport=typeof(bq.ownerSVGElement)==U[67]}else{bl._isSupport=false}}return bl._isSupport}T(bl,{isSupport:V});function G(bp){bp=bp?bp:{};this.shape=bp.shape;var bq=this.div=this.create()}G.prototype=new L();T(G.prototype,{setLineBorder:function(bs,bp,br){var bq=this.border;
if(bs){if(!bq){bq=this.border=this.create();ad(this.border,{zIndex:-1});bq.filled=false;this.div.appendChild(bq)}this.lineBorder=bs;bq.strokecolor=bp?bp:U[55];bq.firstChild.opacity=br?br:1}else{if(bq){bg(bq);delete this.border}}},init:function(bp,bq,br){aE(this,{minPoint:bp,maxPoint:bq,scale:br,pathArr:[]});switch(this.shape){case U[61]:break;default:this.div.coordsize=parseInt(Math.abs(bq.x-bp.x)*256/br)+","+parseInt(Math.abs(bq.y-bp.y)*256/br);if(this.border){this.border.coordsize=this.div.coordsize}this.div.path="e";
break}},setPosition:function(bp){if(!bp){return}this.lastPosition=bp;var br=this.lineBorder,bq=this.lineWeight;ad(this.div,{position:U[78],left:(bp.x)+"px",top:(bp.y)+"px"});setTimeout(a6(this,function(){if(this.border){ad(this.border,{position:U[78],left:-this.div.offsetLeft+parseInt(this.div.style.left)+"px",top:-this.div.offsetTop+parseInt(this.div.style.top)+"px"})}}),64);if(this.border){ad(this.border,{position:U[78],left:-this.div.offsetLeft+parseInt(this.div.style.left)+"px",top:-this.div.offsetTop+parseInt(this.div.style.top)+"px"})
}},setScale:function(bs){var bp=this.minPoint,bq=this.maxPoint;var br={width:(bq.x-bp.x)/bs+"px",height:(bq.y-bp.y)/bs+"px"};ad(this.div,br);if(this.border){ad(this.border,br)}},drawPolygon:function(bz,bu){var bv=bz.length,bs=bz[0],bw=this.pathArr,bq=this.scale,bx=this.minPoint,br=bx.x,bp=bx.y,by;if(bv>1){by=bz[0];bw.push("m");bw.push(parseInt((by.x-br)*256/bq));bw.push(parseInt((by.y-bp)*256/bq));bw.push("l");for(var bt=1;bt<bv;bt++){by=bz[bt];bw.push(parseInt((by.x-br)*256/bq));bw.push(parseInt((by.y-bp)*256/bq))
}if(!bu){by=bz[0];bw.push(parseInt((by.x-br)*256/bq));bw.push(parseInt((by.y-bp)*256/bq))}this.div.path=bw.join(" ");if(this.border){this.border.path=bw.join(" ")}this.setScale(bq)}},setLineColor:function(bp){var bq=this.div;bq.strokecolor=bp;bq.stroked=bp!=U[58]&&bp!=""&&bq.strokeweight>0},clear:function(){this.div.style.display=U[81];this.pathArr=[];this.div.path="e";this.div.style.display=""},create:function(){var br;switch(this.shape){case U[61]:br=document.createElement("v:oval");break;default:br=document.createElement("v:shape");
break}ad(br,{behavior:U[51],position:U[78]});ad(br,{},true);aE(br,{unselectable:"on",filled:"true"});var bq=document.createElement("v:stroke");aE(bq,{joinstyle:U[57],endcap:U[57]});br.appendChild(bq);var bp=document.createElement("v:fill");br.appendChild(bp);ad(bp,{behavior:U[51]});ad(bq,{behavior:U[51]});return br},setLineStyle:function(bp){switch(bp.toLowerCase()){case U[52]:bp="ShortDot";break;case"dashed":bp="ShortDash";break}this.div.firstChild.dashstyle=bp},setFillColor:function(bp){var bq=this.div;if(bp==U[58]||bp==""){bq.filled=false
}else{bq.filled=true;bq.fillcolor=bp}},setLineWeight:function(bp){var bq=this.div;bq.strokeweight=bp*3/4;this.lineWeight=bp;bq.stroked=bq.strokecolor!=U[58]&&bq.strokecolor!=""&&bp>0;if(this.border){this.border.strokeweight=(bp+this.lineBorder*2)*3/4}},setOpacity:function(bp){this.div.firstChild.opacity=bp;this.div.firstChild.nextSibling.opacity=bp},setLineArrow:function(bp){if(bp[0]){this.div.firstChild.startarrow=bp[0]}if(bp[1]){this.div.firstChild.endarrow=bp[1]}}});function C(){if(typeof(G._isSupport)==U[82]){try{if(document.namespaces){if(!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml")
}var bq=document.createElement("v:shape");ad(bq,{behavior:U[51]});bq.style.behavior=U[51];document.body.appendChild(bq);G._isSupport=typeof(bq.Path)==U[67];bq.parentNode.removeChild(bq)}else{G._isSupport=false}}catch(bp){G._isSupport=false}}return G._isSupport}T(G,{isSupport:C});function bb(bp){aE(this,{scaleFactor:{x:1,y:-1}});aE(this,bp)}T(bb.prototype,{isRectilinear:function(){return true},fromLatLngToPixel:function(bq){var bp=this.scaleFactor;return{x:bq.lng()*bp.x,y:bq.lat()*bp.y}},fromPixelToLatLng:function(bp){var bq=this.scaleFactor;
return new r(bp.y/bq.y,bp.x/bq.x)}});function E(bp){aE(this,{eccentricity:1,centerLng:0});aE(this,bp)}E.prototype=new bb();T(E.prototype,{fromLatLngToPixel:function(bv){var bs=this.eccentricity,br=Math.PI,bp=180/br,bq=((bv.la+90)%180)-90,bu;if(bs==1){bu=-Math.log(Math.tan(br/4+0.5*bq/bp))*bp}else{var bt=Math.sin(bq/bp)*bs;bu=Math.log(Math.tan(0.5*(br/2-bq/bp))/Math.pow((1-bt)/(1+bt),0.5*bs))*bp}return{x:bv.lo-this.centerLng,y:bu}},fromPixelToLatLng:function(by){var bq=this.eccentricity,bu=Math.PI,bs=180/bu,br,bx=by.y;
if(bq==1){br=(Math.PI/2-2*Math.atan(Math.exp(bx/bs)))*bs}else{var bw=Math.exp(bx/bs),bp,bv,bt=15;br=bu/2-2*Math.atan(bw);do{bp=bq*Math.sin(br);bv=bu/2-2*Math.atan(bw*Math.pow((1-bp)/(1+bp),0.5*bq))-br;br+=bv}while(Math.abs(bv)>1e-10&&--bt!=0);br=br*bs}return new r(br,by.x+this.centerLng)}});function ar(bp,bq){aE(this,{render:bp,id:bq})}T(ar.prototype,{load:function(bt){if(!bt){return}var br=this.render,bp,bq,bu=br.layer.control.htmlBufImgs;if(bu&&(bp=bu[bt])){this.img=bp.parentNode?bp.cloneNode():bp;br.layer.onTileLoaded(this.id)
}else{if(br.utf){bp=this.img=document.createElement("div");var bs=document.createElement("img");ad(bs,{visibility:U[80],width:U[77],height:U[77]});this.ll=Q(bs,"load",this,this.onLoad);this.el=Q(bs,"error",this,this.onError);bp.appendChild(bs)}else{bp=this.img=document.createElement("img");this.ll=Q(bp,"load",this,this.onLoad);this.el=Q(bp,"error",this,this.onError);aE(bp,{galleryImg:false})}ab(bp,bt);aH(bp);if(bq=br.tileStyle){ad(bp,bq)}if(bq=br.opacity){aT(bp,bq)}}},show:function(){if(!this.img){return}if(!aX(this.img)){this.render.layer.getMapDiv(this.id.z).div.appendChild(this.img)
}},setPosition:function(bw){if(!this.img){return}var bs=this.render,bq=bs.layer.control.map,br=this.id,bt=bq.getScale(),bv=this.img;if(x()){var bx=bt,bB=bs.layer.getMapDiv(this.id.z),bp=bB.div,bz=bq.getViewSize();bt=bs.layer.levels[br.z].scale;if(bp._zoom!=bt/bx){bp._zoom=bt/bx;var bu=bB.offset;if(!bu){bu={x:0,y:0}}ae(bp,bt/bx,bu,{x:bz.x/2-bu.x,y:bz.y/2-bu.y})}if(!bw){return}}var bA=bs.layer.getPixelRectById(br,bt),by=bs.tilePad;ad(bv,{position:U[78],width:(bA.max.x-bA.min.x+by.x*2)+"px",height:(bA.max.y-bA.min.y+by.y*2)+"px",left:bA.min.x-by.x+"px",top:bA.min.y-by.y+"px"})
},stop:function(){a7(this.ll);a7(this.el);delete this.ll;delete this.el},addBuffer:function(){var bu=this.render.layer.control,bw=bu.htmlBufImgs,bs=bu.htmlBufNum,bv=this.img.src;if(!bw){bw=bu.htmlBufImgs=[];bs=bu.htmlBufNum=500}if(bs<=0||bw[bv]){return}bw[bv]=this.img;bw.push(bv);var bt=bw.length-bs;for(var br=0;bt>0&&br<bw.length;br++){var bp=bw[br],bq=bw[bp];if(!bq.isShow){if(bw[bp]){delete bw[bp]}bw.splice(br,1);br--;bt--}}},onLoad:function(){this.stop();var bq=this.render,bp=this.img;bq.layer.onTileLoaded(this.id);
this.addBuffer(this);bp.isShow=true;if(!aX(this.img)){bq.layer.getMapDiv(this.id.z).div.appendChild(this.img)}if(bq.utf){aW.apply(this.img.firstChild)}},hide:function(){if(!this.img){return}this.stop();var bp=this.img,bq=bp.parentNode;if(bq){bq.removeChild(bp)}},onError:function(){this.stop();var bp=this.render;bp.layer.onTileError(this.id);if(bp.errorImgUrl){this.img.src=bp.errorImgUrl}else{ad(this.img,{display:U[81]})}if(!aX(this.img)){bp.layer.getMapDiv(this.id.z).div.appendChild(this.img)}},depose:function(){this.hide();
bg(this.img);delete this.render;delete this.img}});function A(bp){var bq=document.createElement("div");ad(bq,{position:U[78],zIndex:bp.zIndex});bp.layer.control.map.getGeoPanel().appendChild(bq);return bq}function z(){return true}function y(){return true}function x(){if(typeof(ar._scaleByDiv)!="boolean"){var bp=document.createElement("div");ar._scaleByDiv=ae(bp,2)}return ar._scaleByDiv}T(ar,{getContainer:A,isSupport:z,hasLoadEvent:y,scaleByDiv:x});function bn(bp){aE(this,{config:bp,zIndex:100,scalePower:0.8,tilePad:{x:0,y:0}});
aE(this,bp)}T(bn.prototype,{isTranPng:function(){return !!this._isTranPng},getTileType:function(){var bq=[ar];for(var bp=0;bp<bq.length;bp++){if(bq[bp].isSupport(this)){return bq[bp]}}},removeDiv:function(bp){bg(bp.div);delete bp.div},setPosition:function(bq,bp){bq.tile.setPosition(bp)},loadTile:function(bs,bq){if(!bs.tile&&!bq){var br=this.tileType;var bp=bs.tile=new br(this,bs);bp.load(this.getImgUrl(bs))}return !!bs.tile},getImgUrl:function(bp){var by=bp.x,bw=bp.y,bA=this.layer.getZoomLevels()[bp.z].name;
var bu=(this.sslImgURLs&&location.protocol=="https:")?this.sslImgURLs:this.imgURLs,bC=bu[Math.abs(by+bw)%bu.length];var bz=1<<bA;if(bw<0||bw>=bz){return""}while(by<0){by+=bz}while(by>=bz){by-=bz}if(!this.useStaticPath){var bq=this.zTag;return[bC,"x=",by,"&y=",bw,"&",(bq=bq?bq:"z"),"=",bA].join("")}var bv=Math.floor(bA/4),bB=[bC];for(var bs=0;bs<bv;bs++){var bx=1<<(bA-4*bs-4);var bt=parseInt(by/bx)%16,br=parseInt(bw/bx)%16;bB=bB.concat((br>9)?br:"0"+br,(bt>9)?bt:"0"+bt,"/")}bB=bB.concat(by,"_",bw,".png");return bB.join("")
},setCurrentIndex:function(bp,bq){if(bq){ad(bq.div,{zIndex:this.zIndex})}ad(bp.div,{zIndex:this.zIndex+1})},initialize:function(bp){this.layer=bp;this.tileType=this.getTileType();this.utf=this.isTranPng()&&aU()},remove:function(){delete this.layer;delete this.tileType},deposeTile:function(bp){this.hideTile(bp);bp.tile.depose()},initDiv:function(bp){bp.div=this.tileType.getContainer(this)},showTile:function(bq){var bp=bq.tile;bp.show();bp.setPosition(true)},hideTile:function(bp){bp.tile.hide()},copy:function(){return new bn(this.config)
}});function bo(bp){aE(this,{config:bp,zIndex:400,scalePower:0});aE(this,bp)}T(bo.prototype,{getBuffer:function(br){var bq=this.layer.control,bp=bq.jsonBufData;return bp?bp[br]:null},removeDiv:function(bp){},setPosition:function(bq,bp){},loadTile:function(bq,bp){return !!bq.overlays},addBuffer:function(bp,bs){var br=this.layer.control,bw=br.jsonBufData,bq=br.jsonBufNum;if(!bw){bw=br.jsonBufData=[];bq=br.jsonBufNum=500}if(bq<=0||bw[bp]){return}bw[bp]=bs;bw.push(bp);var bt=bw.length-bq;for(var bu=0;bt>0&&bu<bw.length;
bu++){var bv=bw[bu],bx=bw[bv];if(bw[bv]){delete bw[bv]}bw.splice(bu,1);bu--;bt--}},setCurrentIndex:function(bp,bq){},initialize:function(bp){this.layer=bp},remove:function(){delete this.layer},deposeTile:function(bp){if(bp.dataUrl){aR(bp.dataUrl)}this.hideTile(bp);delete bp.overlays},initDiv:function(bp){},showTile:function(bp){},hideTile:function(bs){var bp,bq=bs.overlays,br=this.layer.control.map;if(bq){while(bp=bq.pop()){br.removeOverlay(bp);bp.depose()}}},copy:function(){return new bo(this.config)}});function au(bp){aE(this,{config:bp,scalePower:0,blockSize:2,eventName:"tilepoiclick",showTip:true,tipStyle:{border:"solid 1px #C2C2C2",fontSize:U[50],fontWeight:"bolder",backgroundColor:"#FFFFD5",padding:"3px",paddingTop:"5px",whiteSpace:U[49]}});
aE(this,bp);if(!au._index){au._index=0}this.cbName="_MATR"+(au._index++);window[this.cbName]=a6(this,this.onLoad);this.loadMap={}}T(au.prototype,{remove:function(){var bs=this.layer.control.map,bp=bs.getGeoPanel();if(this.pointed&&bp.pointed&&bp._atIndex==this.index){aV(bp,"");this.pointed=bp.pointed=false}var br,bq=this.listeners;if(bq){while(br=bq.pop()){a7(br)}delete this.listeners}if(this.tips){bs.removeOverlay(this.tips);this.tips.depose();delete this.tips}delete this.layer},hideTile:function(){},deposeTile:function(){},check:function(bu,bB){var bE=bB.points,bx=bu.left,bD=bu.top,bp,bs=this.layer.control.map,bq=bs.getGeoPanel();
if(bq.pointed||this.index!=bq._atIndex){return}for(var bA=bE.length-1;bA>=0;bA--){var bw=bE[bA],bC=bw.rect,bt=8,bz=Math.max(0,Math.floor((bt-bC[2]+bC[0])/2)),by=Math.max(0,Math.floor((bt-bC[3]+bC[1])/2));if(bx>=bC[0]-bz&&bx<=bC[2]+bz&&bD>=bC[1]-by&&bD<=bC[3]+by){bp=bw;break}}if(bp){aV(bq,U[66]);this.pointed=bq.pointed=true;var bv=this.getLatLng(bu,bp);if(this.showTip&&(bp.title||bp.name)){if(!this.tips){var br=document.createElement("div");ad(br,this.tipStyle);this.tips=new ak(bv,br,{offset:{x:14,y:10}})}this.tips.setLatLng(bv);
this.tips.div.innerHTML=bp.title||bp.name;bs.addOverlay(this.tips)}}else{if(this.tips){bs.removeOverlay(this.tips)}}this.currentPoi=bp},onInfoLoaded:function(br){if(!br||!this.currentPoi||br.Id!=this.currentPoi.id){return}var bq=[],bs=document.createElement("div");ad(bs,{width:"300px"});if(br.TelNo){bq.push("\u7535\u8bdd\uff1a"+br.TelNo)}if(br.DistName){bq.push("\u5730\u5740\uff1a"+br.DistName)}if(br.ZipCode){bq.push("\u90ae\u7f16\uff1a"+br.ZipCode)}if(br.Url){bq.push("<a href='"+br.Url+"' target='_blank' style='color:#0088cc;margin:0px;line-height:20px;'>\u66f4\u591a\u4fe1\u606f</a>")
}bs.innerHTML=bq.join("<br/>");var bp=this.layer.control.map.openInfoWindow(new r(br.Geo[0],br.Geo[1]),br.Name,bs);bp._name=br.Name;bp.moveIntoView()},setCurrentIndex:function(){},copy:function(){return new au(this.config)},getBuffer:function(bq){var bp=this._bufferData;return bp?bp[bq]:null},getLatLng:function(bw,bu){var bq=this.layer,bt=bq.levels[bw.z-bq.minLevel].scale,br=bq.tileSize,bp=bq.tileOrigin;var bv=(bw.x*br.x+(bu.rect[0]+bu.rect[2])/2)*bt+bp.x;var bs=(bw.y*br.y+(bu.rect[1]+bu.rect[3])/2)*bt+bp.y;
return bq.prj.fromPixelToLatLng({x:bv,y:bs})},removeDiv:function(bp){},onMouseMove:function(bB){var bq=this.layer.control.map,bp=bq.getGeoPanel(),bw=bp._atIndex,bA=bp._atPoint;if(!bw){bw=bp._atIndex=1}if(bA!=bB){aV(bp,"");this.pointed=bp.pointed=false;bp._atPoint=bB;bp._atIndex=++bw}if(bp.pointed){if(this.tips){bq.removeOverlay(this.tips)}return}this.index=bw;var br=this.currentId=this.getId(bB);if(!br){return}var bC=[br.x,br.y,br.z].join(","),bv=this.getBuffer(bC);if(bv){this.check(br,bv)}else{delete this.currentPoi;
var bx=this.blockSize,bt=br.x-(br.x%bx),bs=br.y-(br.y%bx),bu=[bt,bs,br.z].join(",");if(!this.loadMap[bu]){this.loadMap[bu]=true;var bD=[];for(var bz=bt;bz<bt+bx;bz++){for(var by=bs;by<bs+bx;by++){bD.push([bz,by,br.z].join(","))}}aw(this.servUrl+"p="+bD.join("|")+"&c="+this.cbName,"gb2312")}}},getId:function(by){var bv=this.layer,bp=bv.control.map,bs=bp.fromContainerPixelToLatLng(by);if(!bs){return}var bw=bv.prj.fromLatLngToPixel(bs),bx=bv.getZoomIndex(bp.getScale());var bt=bv.levels[bx].scale,bz=bv.tileSize,bu=bv.tileOrigin;
if(Math.abs(Math.log(bt/bp.getScale()))>0.1){return}var br=Math.floor((bw.x-bu.x)/bt),bq=Math.floor((bw.y-bu.y)/bt);return{x:Math.floor(br/bz.x),y:Math.floor(bq/bz.y),left:Math.floor(br%bz.x),top:Math.floor(bq%bz.y),z:bx+bv.minLevel}},showTile:function(){},addBuffer:function(bt,bw){var bp=this._bufferData,bu=this._bufferNum;if(!bp){bp=this._bufferData=[];bu=this._bufferNum=500}if(bu<=0||bp[bt]){return}bp[bt]=bw;bp.push(bt);var bv=bp.length-bu;for(var bs=0;bv>0&&bs<bp.length;bs++){var bq=bp[bs],br=bp[bq];if(bp[bq]){delete bp[bq]
}bp.splice(bs,1);bs--;bv--}},onClick:function(bq,bu){if(bu!=1){return}this.onMouseMove(bq);var bs=this.currentPoi,bv=this.layer.control.map;if(bv.isMarking&&bv.isMarking()){return}if(bs){var bw=this.getLatLng(this.currentId,bs);var bp=be(bv,this.eventName,[bs,bw]);if(!bp){return}if(this.infoServ&&bs.id){if(!window[this.cbName+"_Info"]){window[this.cbName+"_Info"]=a6(this,this.onInfoLoaded)}var bt=typeof(bs.id)==U[48]?bs.id.toFixed():bs.id.toString();aw(this.infoServ+"i="+bt+"&cb="+this.cbName+"_Info")}else{var br=bv.openInfoWindow(bw,bs.name,bs.name);
br._name=bs.name;br.moveIntoView()}}},initDiv:function(bp){},setPosition:function(){},onLoad:function(bq){if(!bq||!this.layer){return}var bp=this.currentId;for(var bs=bq.length-1;bs>=0;bs--){var bu=bq[bs],bt=bu.id,br=[bt.x,bt.y,bt.z].join(",");delete this.loadMap[br];this.addBuffer(br,bu);if(bp&&bp.x==bt.x&&bp.y==bt.y&&bp.z==bt.z){this.check(bp,bu)}}},initialize:function(bp){this.layer=bp;var bq=bp.control.map;this.listeners=[Q(bq,U[64],this,this.onMouseMove),Q(bq,"zoom",this,function(){if(this.tips&&this.tips.map){this.tips.map.removeOverlay(this.tips)
}}),Q(bq,U[47],this,this.onClick)]},loadTile:function(){}});function aP(bq){aE(this,{tileSize:{x:256,y:256},tileOrigin:{x:0,y:0},startScale:360/256});aE(this,bq);if(this.prj&&this.prj.cla&&!this.prj.fromLatLngToPixel){this.prj=new this.prj.cla(this.prj.config)}if(!this.prj){this.prj=new bb()}if(this.tileRender.cla&&!this.tileRender.initialize){this.tileRender=new this.tileRender.cla(this.tileRender.config)}if(!this.levels){var bs=this.levels=[];var bp=this.maxLevel?this.maxLevel:20;var bt=this.minLevel?this.minLevel:0;
for(var br=bt;br<=bp;br++){bs.push({scale:this.startScale/Math.pow(2,br),name:br})}}}T(aP.prototype,{onMapScale:function(bu){var br=this.control.map,bt=br.getScale(),bp=br.getCenter();if(!bp){return}var bw=this.zoomIndex=this.getZoomIndex(bt);var by=this.getMapDiv(bw);this.setCurrentIndex(bw);var bs=this.mapDivs;if(bs){for(var bx in bs){var bq=bs[bx];if(!bq||!bq.mapTiles){continue}if(this.singleTileDiv&&bq!=by){this.removeDiv(bx);continue}var bv=(bq!=by)||(br.getTargetScale&&this.getZoomIndex(br.getTargetScale())!=bw);
this.showTiles(bx,true,bu,bv)}}},remove:function(){this.currentIndex=-1;var bq=this.mapDivs;for(var bp in bq){if(!bq[bp].mapTiles){return}this.removeDiv(bp)}this.tileRender.remove();delete this.mapDivs},hideTile:function(bq,bp){if(bq.isError){this.setTileStat(bq.z,"error",-1)}if(bq.isLoaded){this.setTileStat(bq.z,"show",-1);this.tileRender.hideTile(bq)}else{this.tileRender.deposeTile(bq)}this.setTileStat(bq.z,"total",-1);delete bp["Tile_"+bq.x+"_"+bq.y+"_"+bq.z]},toMapId:function(bp,bq){var bt=this.levels[bq].scale,bs=this.tileSize,br=this.tileOrigin;
return{x:Math.floor((bp.x-br.x)/bt/bs.x),y:Math.floor((bp.y-br.y)/bt/bs.y)}},getProjection:function(){return this.prj},setCurrentIndex:function(bp){var bq=this.currentIndex;if(bq==bp){return}if(this.cTimeout){window.clearTimeout(this.cTimeout);delete this.cTimeout}this.currentIndex=bp;this.tileRender.setCurrentIndex(this.getMapDiv(bp),this.getMapDiv(bq))},copy:function(){var bp={};aE(bp,this.config);bp.tileRender=this.tileRender.copy();return new aP(this.config)},getMapDiv:function(bq){if(typeof(bq)==U[82]||bq<0){return
}var br=this.mapDivs;if(!br){br=this.mapDivs={}}var bp=br[bq];if(!bp){bp=br[bq]={mapTiles:{},tileStat:{total:0,error:0,show:0},index:bq};this.tileRender.initDiv(bp)}return bp},onMapMove:function(){if(this.currentIndex>=0){this.showTiles(this.currentIndex)}},removeDiv:function(bq){this.clearDiv(bq);var bp=this.getMapDiv(bq);if(bq==this.currentIndex){this.currentIndex=-1}delete this.mapDivs[bq]},getTile:function(bp,br,bq){return this.getMapDiv(bq).mapTiles["Tile_"+bp+"_"+br+"_"+bq]},onTileError:function(bp){bp.isError=true;
this.setTileStat(bp.z,"error",1)},clearDiv:function(br){var bq=this.getMapDiv(br),bp=bq.mapTiles;for(var bt in bp){var bs=bp[bt];if(!bs.x){continue}this.hideTile(bs,bp)}bq.mapTiles={};bq.tileRectangle=null;this.tileRender.removeDiv(bq)},setTileStat:function(bq,bp,br){var bs=this.getMapDiv(bq).tileStat;bs[bp]+=br;if(this.control.setTileStat){this.control.setTileStat(bp,br)}if(bp=="show"&&this.currentIndex==bq&&!this.cTimeout){this.cTimeout=setTimeout(a6(this,this.checkTile),100)}},checkTile:function(){var bp=this.currentIndex;
if(bp>0){var bs=this.getMapDiv(bp).tileStat;if(bs.total==bs.show){var br=this.mapDivs;for(var bq in br){if(bq!=bp&&br[bq].mapTiles){this.removeDiv(bq)}}}}delete this.cTimeout},showTiles:function(bP,bW,bF,bJ){var bG=this.getMapDiv(bP),bH=bG.tileRectangle,bT=this.control.map,bI;var bv=this.getZoomLevels(),bR=bT.getCenter(),bV=bT.getScale(),bt=bT.getViewSize();if(this.prj!=bT.getProjection()&&bG.div){var bB=this.prj,bw=bv[bP].scale,br=bT.getGeoPosition(bT.fromLatLngToPixel(bR,bw)),bq=bT.getGeoPosition(bB.fromLatLngToPixel(bR,bw,bB)),bX=bG.div._zoom;
var bu=bG.offset={x:br.x-bq.x,y:br.y-bq.y};if(bX&&bX!=1){var bt=bT.getViewSize();bu={x:bu.x-bt.x/2*(bX-1),y:bu.y-bt.y/2*(bX-1)}}aS(bG.div,bu)}else{if(bF&&bG.div&&bG.offset){delete bG.offset;var bt=bT.getViewSize(),bX=bG.div._zoom,bu={x:0,y:0};if(bX&&bX!=1){var bt=bT.getViewSize();bu={x:-bt.x/2*(bX-1),y:-bt.y/2*(bX-1)}}aS(bG.div,bu)}}var bs=bT.getTargetScale?(bJ?Math.max(bV,bT.getTargetScale()):Math.min(bV,bT.getTargetScale())):bV;var bE=this.prj.fromLatLngToPixel(bR);bI=new a(new bk(bE.x-bt.x/2*bs,bE.y-bt.y/2*bs),new bk(bE.x+bt.x/2*bs,bE.y+bt.y/2*bs));
if(bW||bF){bH=null}if(bH&&bH.containsRectangle(bI)){return}var bK=this.tileRender;if(bv&&Math.abs(Math.log(bV/bv[bP].scale))>bK.scalePower){this.removeDiv(bP);return}var bA=this.toMapId(bI.min,bP),bC=this.toMapId(bI.max,bP);var bO=bA.x,bN=bA.y,bM=bC.x,bL=bC.y;var bp=bG.mapTiles,bU;for(var bS in bp){bU=bp[bS];if(typeof(bU.x)!=U[48]){continue}if(bO>bU.x||bM<bU.x||bN>bU.y||bL<bU.y||(bJ&&!bU.isLoaded)){this.hideTile(bU,bp);continue}bK.setPosition(bU,bF)}for(var bz=bO;bz<=bM;bz++){for(var bx=bN;bx<=bL;bx++){var bQ="Tile_"+bz+"_"+bx+"_"+bP,bU=bp[bQ];
if(!bU){bU={x:bz,y:bx,z:bP};bU.coords=this.getRectangleById(bU);if(bK.loadTile(bU,bJ)){bp[bQ]=bU;this.setTileStat(bU.z,"total",1)}}}}var by=this.getRectangleById({x:bO,y:bN,z:bP}),bD=this.getRectangleById({x:bM,y:bL,z:bP});bG.tileRectangle=by.extend(bD.min).extend(bD.max)},getZoomLevels:function(){return this.levels},getZoomIndex:function(bt){var bq=this.levels,bp=bq.length;for(var bs=0;bs<bp;bs++){var br=bq[bs].scale;if(bt>=br){if(bs>0&&bt/bq[bs-1].scale>br/bt){return bs-1}return bs}}return bp-1},getPixelRectById:function(bw,bv){var br=this.getRectangleById(bw),bp=this.prj,bt=this.control.map,bu=this.getMapDiv(bw.z).offset;
var bs=bt.getGeoPosition(br.min,bv,bp),bq=bt.getGeoPosition(br.max,bv,bp);return new a(bs,bq)},onTileLoaded:function(bp){if(!bp.isLoaded){bp.isLoaded=true;this.setTileStat(bp.z,"show",1);this.tileRender.showTile(bp)}},initialize:function(bp){this.control=bp;this.tileRender.initialize(this)},getRectangleById:function(bs){var br=this.levels[bs.z].scale,bq=this.tileSize,bp=this.tileOrigin;return new a(new bk(bs.x*br*bq.x+bp.x,bs.y*br*bq.y+bp.y),new bk((bs.x+1)*br*bq.x+bp.x,(bs.y+1)*br*bq.y+bp.y))}});function o(){}T(o.prototype,{depose:function(){this.remove()
},getContainer:function(){return this.div},setLayout:function(bp){this.layout=bp=bp?bp:{x:0,y:0};if(bp.x||bp.y){if(this.map&&!this.rslis){this.rslis=Q(this.map,U[46],this,this.onMapResize)}}else{if(this.rslis){a7(this.rslis);delete this.rslis}}this.onMapResize()},onMapResize:function(){var br=this.map,bq=this.layout,bp=this.position,bs=br?br.getViewSize():{x:0,y:0};if(!bp||!bq){return}aS(this.getContainer(),{x:Math.ceil(bs.x*bq.x+bp.x),y:Math.ceil(bs.y*bq.y+bp.y)})},setPosition:function(bp){this.position=bp?bp:{x:0,y:0};
this.onMapResize()},initialize:function(bp){return true},remove:function(){var bq=this.listeners;if(bq){for(var bp=bq.length-1;bp>=0;bp--){a7(bq[bp])}}a7(this.rslis);delete this.listeners;delete this.rslis;delete this.map}});function ai(){}ai.prototype=new o();T(ai.prototype,{getProjection:function(){return this.prj},getBounds:function(br,bq,bp,bs){if(!bp){bp=this.map.getCenter()}if(!bp){return null}var bt=this.map.getViewSize();return new ao(this.fromContainerPixelToLatLng(br?br:{x:0,y:bt.y},bp,bs),this.fromContainerPixelToLatLng(bq?bq:{x:bt.x,y:0},bp,bs))
},fromLatLngToPixel:function(bp){return this.prj?this.prj.fromLatLngToPixel(bp):{x:bp.lng(),y:bp.lat()}},initialize:function(bp){if(this.map){return false}aE(bp,{setProjection:a6(this,this.setProjection),getProjection:a6(this,this.getProjection),fromLatLngToPixel:a6(this,this.fromLatLngToPixel),fromPixelToLatLng:a6(this,this.fromPixelToLatLng),fromContainerPixelToLatLng:a6(this,this.fromContainerPixelToLatLng),fromLatLngToContainerPixel:a6(this,this.fromLatLngToContainerPixel),getBounds:a6(this,this.getBounds),getRectangle:a6(this,this.getRectangle)});
this.map=bp;return true},fromContainerPixelToLatLng:function(bq,bp,bt,br){bt=bt?bt:this.map.getScale();bp=bp?bp:this.map.getCenter();if(!bp||!bt){return}if(!br){var bu=this.map.getViewSize();br={x:bu.x/2,y:bu.y/2}}var bs=this.fromLatLngToPixel(bp);return this.fromPixelToLatLng({x:bs.x+(bq.x-br.x)*bt,y:bs.y+(bq.y-br.y)*bt})},remove:function(){var bp=this.map;delete bp.setProjection;delete bp.getProjection;delete bp.fromLatLngToPixel;delete bp.fromPixelToLatLng;delete bp.fromContainerPixelToLatLng;delete bp.fromLatLngToContainerPixel;
delete bp.getRectangle;delete bp.getBounds;o.prototype.remove.apply(this,arguments)},getRectangle:function(br,bq,bp,bu){var bs=this.map;bp=bp?bp:bs.getCenter();bu=bu?bu:bs.getScale();if(!bp||!bu){return null}var bv=bs.getViewSize(),bt=this.fromLatLngToPixel(bp);br=br?br:{x:0,y:0};bq=bq?bq:bv;return new a(new bk(bt.x+(br.x-bv.x/2)*bu,bt.y+(br.y-bv.y/2)*bu),new bk(bt.x+(bq.x-bv.x/2)*bu,bt.y+(bq.y-bv.y/2)*bu))},fromLatLngToContainerPixel:function(bv,bp,bt,br){bt=bt?bt:this.map.getScale();bp=bp?bp:this.map.getCenter();
if(!br){var bu=this.map.getViewSize();br={x:bu.x/2,y:bu.y/2}}var bs=this.fromLatLngToPixel(bp);var bq=this.fromLatLngToPixel(bv);return{x:Math.floor((bq.x-bs.x)/bt+br.x),y:Math.floor((bq.y-bs.y)/bt+br.y)}},setProjection:function(bp){if(bp==this.prj){return}this.prj=bp;be(this.map,U[45],[bp])},fromPixelToLatLng:function(bp){return this.prj?this.prj.fromPixelToLatLng(bp):new r(bp.y,bp.x)}});function aI(){}aI.prototype=new o();T(aI.prototype,{remove:function(){var bp=this.map;delete bp.setZoomScales;delete bp.getZoomScales;
delete bp.isStepZoom;delete bp.centerAndZoom;delete bp.getBoundsZoom;delete bp.getZoom;delete bp.setZoom;delete bp.zoomIn;delete bp.zoomOut;delete bp.getZoomScale;delete bp.checkScale;delete bp.savePosition;delete bp.returnToSavedPosition;delete bp.fitBounds;o.prototype.remove.apply(this,arguments)},zoomIn:function(){var bp=this.map,bq=bp.getScale();if(this.levels){this.setZoomIndex(this.getZoomIndex(bq,1)+1)}else{if(bp.panScale){bp.panScale(bq/2)}else{bp.setScale(bq/2)}}},getZoomScale:function(bq,bp){if(!this.levels){return bq
}return this.levels[this.getZoomIndex(bq,bp)].scale},savePosition:function(){var bp=this.map;this.savedPosition={ll:(bp.getTargetCenter?bp.getTargetCenter():bp.getCenter()),scale:(bp.getTargetScale?bp.getTargetScale():bp.getScale())}},onMapInit:function(){if(!this.levels){return}var bp=this.map;if(this._isStepZoom&&this.levels){this.setZoomIndex(this.getZoomIndex(bp.getScale()))}this.savePosition()},setZoomIndex:function(bq,bt){if(!this.levels[bq]){return}var br=this.map,bp=this.zoomIndex,bs=this.levels[bq].scale;
this.zoomIndex=bq;if(!bt&&br.panScale){br.panScale(bs)}else{br.setScale(bs)}if(bq!=bp){be(this.map,"zoom",[this.levels[bq].name])}},onAfterScaleChange:function(bq){if(!this.levels){return}var bp=this.getZoomIndex(bq);if(bp!=this.zoomIndex){this.zoomIndex=bp;be(this.map,"zoom",[this.levels[bp].name])}},getZoom:function(){var bp=this.map.getScale();if(!bp){return}return this.levels[this.getZoomIndex(bp)].name},zoomOut:function(){var bp=this.map,bq=bp.getScale();if(this.levels){this.setZoomIndex(this.getZoomIndex(bq,-1)-1)
}else{if(bp.panScale){bp.panScale(bq*2)}else{bp.setScale(bq*2)}}},getBoundsZoom:function(bs,bu){bu=bu?bu:10;var bt=this.map,bq=bt.getViewSize(),br=bt.fromLatLngToPixel(bs.sw),bp=bt.fromLatLngToPixel(bs.ne);var bv=Math.max(Math.abs(br.x-bp.x)/Math.max(bu,bq.x-bu*2),Math.abs(br.y-bp.y)/Math.max(bu,bq.y-bu*2));return this.levels[this.getZoomIndex(bv,1)].name},returnPosition:function(){var bp=this.savedPosition;if(bp){var br=bp.ll,bq=this.map;if(bq.panTo){bq.panTo(br)}else{bq.setCenter(br)}bq.setScale(bp.scale)}},isStepZoom:function(){return this._isStepZoom
},checkScale:function(bq,bt){var br=this.map,bs=br.getScale();if(!bs){return}var bp=this.getZoomIndex(bs,bq);this.setZoomIndex(bp,bt)},setZoomScales:function(bp){if(this.levels==bp){return false}this.levels=bp;be(this.map,U[44],[bp]);this.checkScale(0,true)},setZoom:function(bq,bs){var br=this.levels;for(var bp=br.length-1;bp>=0;bp--){if(bq==br[bp].name){this.setZoomIndex(bp,bs);break}}bq=parseInt(bq);if(!isNaN(bq)){this.setZoomIndex(this.getZoomIndex(360/256/Math.pow(2,bq)),bs)}},centerAndZoom:function(bp,bq){this.setZoom(bq);
this.map.setCenter(bp);this.savePosition()},fitBounds:function(bq){if(!bq){return}var bu=20,br=this.map,by=br.getViewSize(),bs=br.getProjection();var bw=bs.fromLatLngToPixel(bq.sw),bv=bs.fromLatLngToPixel(bq.ne);var bt=Math.max(Math.abs(bw.x-bv.x)/Math.max(bu,by.x-bu),Math.abs(bw.y-bv.y)/Math.max(bu,by.y-bu));var bp=br.fromPixelToLatLng({x:(bw.x+bv.x)/2,y:(bw.y+bv.y)/2});if(this._isStepZoom){var bx=this.getZoomIndex(bt,1);if(true&&br.loaded){this.setZoomIndex(bx);br.panTo(bp);br.savePosition()}else{this.centerAndZoom(bp,bx)
}}else{br.panScale(bt);br.panTo(bp);br.savePosition()}},onBeforeScaleChange:function(bs){var br=this.map,bq=this.levels;if(!bq){return}var bp=bq[0].scale;if(bp<bs){this.setZoomIndex(0,true);return false}bp=bq[bq.length-1].scale;if(bp>bs){this.setZoomIndex(bq.length-1,true);return false}return true},getZoomScales:function(){return this.levels},getZoomIndex:function(bu,br){br=br?br:0;var bt=this.levels,bp=bt.length;for(var bs=0;bs<bp;bs++){var bq=bt[bs].scale;if(bu==bq){return bs}if(bu>bq){if(bs>0&&((br==1)||(br==0&&bu/bt[bs-1].scale>bq/bu))){return bs-1
}return bs}}return bp-1},initialize:function(bp){if(this.map){return false}aE(bp,{setZoomScales:a6(this,this.setZoomScales),getZoomScales:a6(this,this.getZoomScales),isStepZoom:a6(this,this.isStepZoom),centerAndZoom:a6(this,this.centerAndZoom),getBoundsZoom:a6(this,this.getBoundsZoom),getZoom:a6(this,this.getZoom),setZoom:a6(this,this.setZoom),zoomIn:a6(this,this.zoomIn),zoomOut:a6(this,this.zoomOut),getZoomScale:a6(this,this.getZoomScale),getZoomIndex:a6(this,this.getZoomIndex),checkScale:a6(this,this.checkScale),savePosition:a6(this,this.savePosition),returnToSavedPosition:a6(this,this.returnPosition),fitBounds:a6(this,this.fitBounds)});
this.listeners=[Q(bp,U[43],this,this.onMapInit),Q(bp,U[42],this,this.onBeforeScaleChange),Q(bp,U[41],this,this.onAfterScaleChange)];this.map=bp;this._isStepZoom=!bp.config.steplessZoom;return true}});function aA(){this.slideNum=8;this.intervalTime=32;this.enableMove=true;this.enableScale=true}aA.prototype=new o();T(aA.prototype,{panTo:function(bw){var bs=this.map;if(!bs.loaded){bs.setCenter(bw);return}var bq=bs.fromLatLngToContainerPixel(bw),bv=bs.getViewSize();var bu={x:bq.x-bv.x/2,y:bq.y-bv.y/2},br=1;if((Math.abs(bu.x)<this.slideNum&&Math.abs(bu.y)<this.slideNum)||Math.abs(bu.x)>bv.x*br||Math.abs(bu.y)>bv.y*br){bs.setCenter(bw);
return}var bt=this.slideObj,bp=bs.getCenter();if(!bt){bt=this.startSlide()}if(!bt.toPoint){be(bs,U[40])}aE(bt,{number:0,toPoint:bw,fromPoint:bp,moveOffset:{x:bw.lng()-bp.lng(),y:bw.lat()-bp.lat()},ml:Q(bs,U[39],this,this.onMapMove)});this.slide()},onMapMove:function(){var bp=this.slideObj;if(!bp||bp.startSetCenter){return}if(bp.toPoint){bp.toPoint=null;be(this.map,U[38])}a7(bp.ml);if(!bp.toScale&&!bp.toPoint){this.slideEnd()}},getTargetScale:function(){var bq=this.slideObj;if(bq){var bp=bq.toScale;if(bp){return bp
}}return this.map.getScale()},startSlide:function(){return this.slideObj={timeout:window.setInterval(a6(this,this.slide),this.intervalTime)}},onMapScaleChange:function(){var bp=this.slideObj;if(!bp||bp.startSetScale){return}if(bp.toScale){bp.toScale=null;be(this.map,U[38])}a7(bp.sl);if(!bp.toScale&&!bp.toPoint){this.slideEnd()}},panBy:function(bp){var br=this.map,bs=br.getViewSize();var bq=br.fromContainerPixelToLatLng({x:bs.x/2+bp.x,y:bs.y/2+bp.y});this.panTo(bq)},slideEnd:function(){var bq=this.slideObj,bp=this.map;
if(!bq){return}this.slideObj=null;window.clearInterval(bq.timeout);a7(bq.ml);a7(bq.sl);if(bq.toPoint){be(bp,U[37]);bp.setCenter(bq.toPoint)}if(bq.toScale){be(bp,U[38]);bp.setScale(bq.toScale)}},slide:function(){var bu=this.slideObj,br;if(!bu){return}var bs=this.slideNum;if(bu.number>=(bu.scaleByPoint?bs:(bs-1))){this.slideEnd();return}bu.number++;var bw=(Math.sin(Math.PI*(bu.number/bs-0.5))/2+0.5);var bq=this.map,bv=bq.getViewSize();if(bu.toScale){br=bu.scaleOffset;var bt=bu.fromScale;bu.startSetScale=true;bq.setScale(bt*Math.pow(Math.E,br*bw));
bu.startSetScale=false;if(!bu.toPoint&&bu.scaleByPoint){var bx=bu.scaleByPoint;var bp=bq.fromContainerPixelToLatLng({x:bv.x-bx.x,y:bv.y-bx.y},bu.scaleByll);bq.setCenter(bp)}}if(bu.toPoint){br=bu.moveOffset;bu.startSetCenter=true;bq.setCenter(new r(bu.fromPoint.lat()+br.y*bw,bu.fromPoint.lng()+br.x*bw));bu.startSetCenter=false}},initialize:function(bp){if(this.map){return false}this.map=bp;if(this.enableMove){bp.getTargetCenter=a6(this,this.getTargetCenter);bp.panTo=a6(this,this.panTo);bp.panBy=a6(this,this.panBy)
}if(this.enableScale){bp.getTargetScale=a6(this,this.getTargetScale);bp.panScale=a6(this,this.panScale)}return true},remove:function(){if(this.slideObj){this.slideEnd()}var bp=this.map;if(this.enableMove){delete bp.panTo;delete bp.panBy;delete bp.getTargetCenter}if(this.enableScale){delete bp.panScale;delete bp.getTargetScale}o.prototype.remove.apply(this,arguments)},getTargetCenter:function(){var bq=this.slideObj;if(bq){var bp=bq.toPoint;if(bp){return bp}}return this.map.getCenter()},panScale:function(bt,bp){var br=this.map;
if(!br.loaded){br.setScale(bt);return}var bq=br.getScale(),bu=Math.abs(Math.log(bt/bq));if(bu<0.1||bu>3){br.setScale(bt);return}var bs=this.slideObj;if(!bs){bs=this.startSlide()}if(!bs.toScale){be(br,U[36])}aE(bs,{number:0,toScale:bt,fromScale:bq,scaleByPoint:bp,scaleOffset:Math.log(bt/bq),sl:Q(br,U[41],this,this.onMapScaleChange)});if(bp){aE(bs,{scaleByPoint:bp,scaleByll:br.fromContainerPixelToLatLng(bp)})}this.slide()}});function I(){this.enableMove=true;this.enableScale=true}I.prototype=new o();T(I.prototype,{slideMove:function(bp,bs){if(bp&&bp.x==0&&bp.y==0){bp=null
}var br=this.getSlideObj(),bq=this.map;if(!br.moveSpeed&&bp){be(bq,U[40])}if(br.moveSpeed&&!bp){be(bq,U[37])}br.moveSpeed=bp;br.moveSpeedup=!!bs;br.moveTimes=0;this.checkSlide()},onMapMove:function(){var bp=this.slideObj;if(!bp||bp.startSet){return}this.slideMove()},slide:function(){var br=this.slideObj;if(!br){return}var bq=this.map,bu=br.moveSpeed,bt=br.scaleSpeed,bs=bq.getViewSize();br.startSet=true;if(bu){var bp=br.moveSpeedup?Math.min(br.moveTimes/128,1):1;br.moveTimes++;bq.setCenter(bq.fromContainerPixelToLatLng({x:bu.x*bp*-32,y:bu.y*bp*-32},null,null,{x:0,y:0}))
}if(bt){if(br.scaleSpeedup){bt=bt*Math.min(br.scaleTimes/32,1)}br.scaleTimes++;bq.setScale(bq.getScale()*Math.pow(2,bt))}br.startSet=false},initialize:function(bp){if(this.map){return false}this.map=bp;if(this.enableMove){bp.slideMove=a6(this,this.slideMove);bp.startAutoSlide=a6(this,this.startAutoSlide);bp.endAutoSlide=a6(this,this.endAutoSlide)}if(this.enableScale){bp.slideScale=a6(this,this.slideScale)}return true},slideScale:function(bp,bs){var br=this.getSlideObj(),bq=this.map;if(!br.scaleSpeed&&bp){be(bq,U[36])
}if(br.scaleSpeed&&!bp){be(bq,U[38]);if(bq.isStepZoom&&bq.isStepZoom()){bq.checkScale(br.scaleSpeed>0?1:-1)}}br.scaleSpeed=bp;br.scaleSpeedup=!!bs;br.scaleTimes=0;this.checkSlide()},remove:function(){this.onMapMove();var bp=this.map;if(this.enableMove){delete bp.slideMove;delete bp.startAutoSlide;delete bp.endAutoSlide}if(this.enableScale){delete bp.slideScale}o.prototype.remove.apply(this,arguments)},startAutoSlide:function(bp){bp=bp?bp:{};var bq=bp.speed;if(!bq){bq=0.5}if(this.asObj){this.endAutoSlide()}this.asObj={speed:bq,padding:bp.padding?bp.padding:16,speedup:bp.speedup,ml:Q(document,U[64],this,this.onMouseMove)}
},checkSlide:function(){var bq=this.slideObj,br=bq.moveSpeed,bp=this.map;if((br&&(br.x!=0||br.y!=0))||bq.scaleSpeed){if(!bq.timeout){bq.timeout=window.setInterval(a6(this,this.slide),32)}if(!bq.ml){bq.ml=Q(bp,U[39],this,this.onMapMove);bq.md=Q(bp,U[65],this,this.onMapMove)}}else{if(bq.timeout){window.clearInterval(bq.timeout);delete bq.timeout}if(bq.ml){a7(bq.ml);a7(bq.md);delete bq.ml;delete bq.md}}},onMouseMove:function(bt){var bp=this.asObj;if(!bp){return}var bA=a8(bt,this.map.getContainer()),bx=document.documentElement,bw=a8(bt,bx);
var bv=this.map.getViewSize(),bz=bp.padding,bq=bp.speed,bs=0,br=0,by=bA.x,bu=bA.y;if(by<bz){bs=bq}if(bu<bz){br=bq}if(by>bv.x-bz){bs=-bq}if(bu>bv.y-bz){br=-bq}if(bs==bp.speedX&&br==bp.speedY){return}bp.speedX=bs;bp.speedY=br;if(bs||br){this.slideMove({x:bs,y:br},bp.speedup);bp.started=true}else{this.slideMove();bp.started=false}},getSlideObj:function(){var bp=this.slideObj;if(!bp){bp=this.slideObj={}}return bp},endAutoSlide:function(){var bp=this.asObj;if(!bp){return}delete this.asObj;a7(bp.ml);if(bp.started){this.map.slideMove()
}}});function a4(){var bq={normal:"url(%i%openhand_8_8.cur) 9 9",mark:"url(%i%crosshairs.cur) 9 9",move:"url(%i%closedhand_8_8.cur) 9 9"};this.cursors={};if(bq){for(var bp in bq){if(typeof(bq[bp])!=U[74]){continue}this.cursors[bp]=bq[bp].replace("%i%",aL)}}}a4.prototype=new o();T(a4.prototype,{setCursor:function(bq,bp){this.cursors[bq]=bp;var br=this.cursorStack;if(br[br.length-1]==bq){this.setCursorStyle(bq,bp)}},onDragStart:function(){this.applyCursor("move")},applyCursor:function(bp){var bq=this.cursorStack;
if(bp){bq.push(bp)}else{bq.pop();bp=bq[bq.length-1]}var br=this.cursors[bp];if(!br||!this.map){return}this.setCursorStyle(bp,br)},getCursor:function(bp){return this.cursors[bp]},setCursorStyle:function(bp,bq){switch(bp){case"normal":bp=U[76];break;case"mark":bp="crosshair";break}aV(this.map.getContainer(),bq,bp)},initialize:function(bp){if(this.map){return false}this.listeners=[Q(bp,U[35],this,this.onDragStart),Q(bp,U[34],this,this.applyCursor)];aE(bp,{applyCursor:a6(this,this.applyCursor),setCursor:a6(this,this.setCursor),getCursor:a6(this,this.getCursor)});
this.map=bp;this.cursorStack=[];this.applyCursor("normal");return true},remove:function(){var bp=this.map;delete bp.applyCursor;delete bp.setCursor;o.prototype.remove.apply(this,arguments)}});function ap(){}ap.prototype=new o();T(ap.prototype,{startMarking:function(){var bp=this.map;if(bp.applyCursor){bp.applyCursor("mark")}this.isMark=true},endMarking:function(){var bp=this.map;if(bp.applyCursor){bp.applyCursor()}this.isMark=false},isMarking:function(bp,bq){return this.isMark},initialize:function(bp){if(this.map){return false
}this.map=bp;aE(bp,{startMarking:a6(this,this.startMarking),endMarking:a6(this,this.endMarking),isMarking:a6(this,this.isMarking)});this.isMark=false;return true}});function bj(){}bj.prototype=new o();T(bj.prototype,{hide:function(){bg(this.div)},setText:function(bq,bp){if(bq){if(this.div){this.hide()}var br=this.div=document.createElement("div");bp=bp?bp:{};this.offset=bp.offset?bp.offset:{x:0,y:0};ad(br,{padding:"2px",fontSize:U[50],border:"solid 1px #5A5C2A",backgroundColor:"#FCFFE9"});br.__pointerEvents=U[81];
if(bp.style){ad(br,bp.style)}ad(br,{position:U[78],zIndex:1000});this.map.container.appendChild(br);if(typeof(bq)!=U[67]){br.innerHTML=bq}else{br.appendChild(bq)}if(!this.listeners){this.listeners=[Q(this.map,U[64],this,this.show)]}ad(this.div,{display:U[81]});if(this.lastPosition&&(this.showDelay||bp.show)){this.show(this.lastPosition)}}else{if(this.listeners){a7(this.listeners[0]);delete this.listeners}this.hide()}},show:function(bp){var bq=this.offset;this.lastPosition=bp;ad(this.div,{display:""});aS(this.div,{x:bp.x+bq.x,y:bp.y+bq.y});
this.showDelay=true;if(this.showTimeout){window.clearTimeout(this.showTimeout)}this.showTimeout=window.setTimeout(a6(this,function(){this.showDelay=false;delete this.showTimeout},10))},initialize:function(bp){if(this.map){return false}this.map=bp;bp.setCursorText=a6(this,this.setText);return true},remove:function(){this.setText();delete this.showTimeout;delete this.map.setCursorText}});function m(){}m.prototype=new o();T(m.prototype,{checkResize:function(){this.map.setViewSize()},initialize:function(br){if(this.map){return false
}br.checkResize=br.setViewSize;var bp=br.getContainer(),bq=bp.style;if(!bq.width||bq.width.indexOf("%")>0||bq.height||bq.height.indexOf("%")>0){this.listeners=[Q(bp,"resize",this,this.checkResize),Q(window,"resize",this,this.checkResize),Q(window,"load",this,this.checkResize)]}this.map=br;return true}});function aO(){this.maxPixel=100000}aO.prototype=new o();T(aO.prototype,{getGeoPanel:function(){return this.div},onMapMove:function(){var bu=this.map,bv=bu.getScale(),bt=this.geoLatlng,br=bu.getCenter();if(!br){return
}if(!bt){bt=this.geoLatlng=br}var bq=bu.fromLatLngToPixel(bt),bw=bu.fromLatLngToPixel(br);var bs=this.maxPixel,bp={x:Math.floor((bq.x-bw.x)/bv),y:Math.floor((bq.y-bw.y)/bv)};if(Math.abs(bp.x)>bs||Math.abs(bp.y)>bs){this.geoLatlng=br;be(bu,U[33]);bp={x:0,y:0}}aS(this.div,bp)},initialize:function(bq,bp){if(this.map||!bq.fromLatLngToContainerPixel){return false}var br=this.div=document.createElement("div");ad(br,{position:U[78],zIndex:100,overflow:U[79],width:U[77]});aH(br);bp.appendChild(br);bq.getGeoPanel=a6(this,this.getGeoPanel);
bq.getGeoPosition=a6(this,this.getGeoPosition);this.listeners=[Q(bq,U[43],this,this.onMapMove),Q(bq,U[41],this,this.onMapMove),Q(bq,U[45],this,this.onMapMove),Q(bq,U[39],this,this.onMapMove)];this.map=bq;return true},getGeoPosition:function(bq,bu,br){var bt=this.map,bv=bt.getViewSize(),bs=this.geoLatlng,bp=(br?br:bt).fromLatLngToPixel(bs);bu=bu?bu:this.map.getScale();return{x:Math.floor((bq.x-bp.x)/bu+bv.x/2),y:Math.floor((bq.y-bp.y)/bu+bv.y/2)}},remove:function(){bg(this.div);delete this.div;var bp=this.map;
delete bp.getGeoPanel;delete bp.getGeoPosition;o.prototype.remove.apply(this,arguments)}});function H(){this.tileStat={total:0,error:0,show:0};this.layers=[]}H.prototype=new o();T(H.prototype,{getLayers:function(){return this.layers},onGeoChange:function(){var bq=this.layers;for(var bp=0;bp<bq.length;bp++){bq[bp].onMapScale(true)}},addLayer:function(bq){var br=this.layers;for(var bp=br.length-1;bp>=0;bp--){if(br[bp]==bq){return}}br.push(bq);bq.initialize(this);bq.onMapScale()},onInit:function(){this.onScale();
this.onMove()},getTileStat:function(){return this.tileStat},setTileStat:function(bp,bq){this.tileStat[bp]+=bq;be(this.map,"tilechange",[bp,bq])},initialize:function(bp){if(this.map||!bp.getGeoPanel){return false}this.map=bp;aE(bp,{addMapLayer:a6(this,this.addLayer),removeMapLayer:a6(this,this.removeLayer),getMapLayers:a6(this,this.getLayers),clearMapLayers:a6(this,this.clearLayers)});this.listeners=[Q(bp,U[43],this,this.onInit),Q(bp,U[41],this,this.onScale),Q(bp,U[33],this,this.onGeoChange),Q(bp,U[45],this,this.onGeoChange),Q(bp,U[46],this,this.onGeoChange),Q(bp,U[39],this,this.onMove)]
},remove:function(){this.clearLayers();var bp=this.map;delete bp.addMapLayer;delete bp.removeMapLayer;delete bp.getMapLayers;delete bp.removeMapLayer;o.prototype.remove.apply(this,arguments)},clearLayers:function(){var bp=this.layers;while(bp[0]){this.removeLayer(bp[0])}},onScale:function(){var bq=this.layers;for(var bp=0;bp<bq.length;bp++){bq[bp].onMapScale()}},removeLayer:function(bq){if(!bq){return}var br=this.layers;for(var bp=br.length-1;bp>=0;bp--){if(br[bp]==bq){bq.remove();br.splice(bp,1);break}}},onMove:function(){var bq=this.layers;
for(var bp=0;bp<bq.length;bp++){bq[bp].onMapMove()}}});function a2(bp){this.id="";aE(this,bp)}function j(){this.types=[];this.typeIds={};this.layerIds={}}j.prototype=new o();T(j.prototype,{getLayerById:function(bp){if(typeof(bp)!=U[74]){if(bp.control&&bp.control.map!=this.map){return bp.copy()}return bp}return this.layerIds[bp]},addType:function(bp){if(typeof(bp)==U[74]){bp=this.getTypeById(bp)}if(!bp||aa(this.types,bp)>=0){return}this.types.push(bp);if(bp.id&&!this.typeIds[bp.id]){this.typeIds[bp.id]=bp}be(this.map,U[32],[bp])
},removeType:function(bp){if(typeof(bp)==U[74]){bp=this.getTypeById(bp)}if(!bp){return}az(this.types,bp);be(this.map,U[32],[bp])},initialize:function(bq){if(this.map||!bq.addMapLayer||(bq.config&&bq.config.noneType)){return false}this.map=bq;aE(bq,{getMapTypeById:a6(this,this.getTypeById),getLayerById:a6(this,this.getLayerById),getMapTypes:a6(this,this.getTypes),getCurrentMapType:a6(this,this.getCurrentType),setMapType:a6(this,this.setType),addMapType:a6(this,this.addType),removeMapType:a6(this,this.removeType)});
var bp=this.typeIds,by=this.layerIds;var bs=[{id:"map",minLevel:3,tileRender:{config:{sslImgURLs:["https://ditu-simg.aliyun.com/get_png?"],imgURLs:["http://img.ditu.aliyun.com/get_png?v=v3&"],useStaticPath:false},cla:bn},tileOrigin:{x:-180,y:-180},prj:{cla:E},maxLevel:18}];for(var bt=0;bt<bs.length;bt++){var br=bs[bt],bv=new aP(br);if(br.id){by[br.id]=bv}}var bw=bq.config.initTypes;if(!bw){bw=[{id:"map",main:"map",name:"\u5730\u56fe"}]}for(var bt=0;bt<bw.length;bt++){var bx=new a2(bw[bt]);this.addType(bx);if(bx.id){bp[bx.id]=bx
}}var bu=0;if(bu>=0&&this.types.length>bu){this.setType(this.types[bu])}if(bq.loaded){this.onMapScale()}return true},getCurrentType:function(){return this.currentType},remove:function(){var bq=this.map,bp=this.types;while(bp[0]){this.removeType(bp[0])}delete bq.getMapTypeById;delete bq.getLayerById;delete bq.getMapTypes;delete bq.getCurrentMapType;delete bq.setMapType;delete bq.addMapType;delete bq.removeMapType;o.prototype.remove.apply(this,arguments)},setType:function(bw){if(typeof(bw)==U[74]){bw=this.getTypeById(bw)
}if(!bw||bw==this.currentType){return}var bq=this.map,bs=bw.main;if(bs){bs=this.getLayerById(bs)}var bu=[],bx=[],bv=[],bz,br,bt;if(bz=this.currentType){if(bz.main){bu.push(bz.main)}if(bz.masks){bu=bu.concat(bz.masks)}}if(bw){if(bw.main){bx.push(bw.main)}if(bw.masks){bx=bx.concat(bw.masks)}}while(br=bu.pop()){for(bt=bx.length-1;bt>=0;bt--){if(bx[bt]==br){bx.splice(bt,1);break}}if(bt<0){bv.push(br)}}for(bt=bv.length-1;bt>=0;bt--){bq.removeMapLayer(this.getLayerById(bv[bt]))}if(bq.setProjection){var bp=bw.prj;if(!bp&&bs){bp=bs.getProjection()
}if(bp){bq.setProjection(bp)}}if(bq.setZoomScales){var by=bw.levels;if(!by&&bs){by=bs.getZoomLevels()}if(by){bq.setZoomScales(by)}}this.currentType=bw;for(bt=bx.length-1;bt>=0;bt--){bq.addMapLayer(this.getLayerById(bx[bt]))}be(bq,U[32],[bw])},getTypeById:function(bp){return this.typeIds[bp]},getTypes:function(){return this.types}});function av(){this.viewOverlays=[]}av.prototype=new o();T(av.prototype,{removeOverlay:function(bp){if(!bp){return}if(bp._inview){this.removeView(bp,aa(this.viewOverlays,bp))}bp.remove();
be(bp,"remove",[this.map]);this.removeFromList(bp)},remove:function(){var bp=this.map;this.clearOverlays();delete bp.addOverlay;delete bp.removeOverlay;delete bp.clearOverlays;delete bp.onOverlayChange;delete bp.getOverlaysRectangle;bg(this.overlaysDiv);delete this.overlaysDiv;o.prototype.remove.apply(this,arguments)},onMapScale:function(){var bp=this.checkView("scale");var br=this.viewOverlays;for(var bq=br.length-1;bq>=0;bq--){if(br[bq]&&(!bp||br[bq]._drawTag!=bp)){br[bq].reDraw(bp?3:2)}}},isInView:function(bp){var bq=this.drawRectangle,br=bp.getRectangle();
if(!br){return false}return bq&&this.overlapRectangle(bq,br)},getOverlays:function(){return this.overlays?this.overlays:[]},checkView:function(){var bp=this.searchViewOverlays();if(bp==null){return 0}var bt=this.viewOverlays,br,bs;if(!this.viewTag){this.viewTag=0}var bq=++this.viewTag;for(bs=bt.length-1;bs>=0;bs--){br=bt[bs];if(aa(bp,br)<0){this.removeView(br,bs)}}for(bs=bp.length-1;bs>=0;bs--){br=bp[bs];if(aa(bt,br)<0){this.addView(br,bq)}}return bq},addToList:function(bp){if(!this.overlays){this.overlays=[]
}if(aa(this.overlays,bp)>=0){return}this.overlays.push(bp);if(this.isInView(bp)){this.addView(bp)}},onProjectionChange:function(){var bp=this.overlays;if(!bp){return}for(var bq=bp.length-1;bq>=0;bq--){bp[bq].initPixel()}this.checkView("scale");var br=this.viewOverlays;for(var bq=br.length-1;bq>=0;bq--){br[bq].reDraw(3)}},init:function(){var bq=this.map;var bp=this.overlaysDiv=document.createElement("div");aE(bp,{position:U[69],zIndex:500,overflow:U[79],width:U[77]});aH(bp);bq.getGeoPanel().appendChild(bp);this.listeners=[Q(bp,U[65],this,this.onMouseEvent),Q(bp,U[31],this,this.onMouseEvent),Q(bp,"touchend",this,this.onMouseEvent),Q(bp,"touchmove",this,this.onMouseEvent),Q(bp,U[63],this,this.onMouseEvent),Q(bp,U[30],this,this.onMouseEvent),Q(bp,U[64],this,this.onMouseEvent),Q(bp,U[29],this,this.onMouseEvent),bd(bp,U[47],bh),Q(bp,U[28],this,this.onMouseEvent),Q(bq,U[41],this,this.onMapScale),Q(bq,U[33],this,this.onMapScale),Q(bq,U[45],this,this.onProjectionChange),Q(bq,U[46],this,this.onMapScale),Q(bq,U[43],this,this.onMapMove),Q(bq,U[39],this,this.onMapMove)];
this.onMapMove()},searchViewOverlays:function(){var bq=this.map,by=bq.getRectangle(),bw=this.drawRectangle;var bs=bq.getScale(),br=this.drawScale;if(!by||(bw&&bw.containsRectangle(by)&&br&&Math.abs(Math.log(br/bs)/Math.log(2))<1.5)){return null}var bx=this.map.getViewSize();this.drawRectangle=bq.getRectangle({x:-bx.x,y:-bx.y},{x:bx.x*2,y:bx.y*2});be(bq,"overlayviewchange");this.drawScale=bs;var bp=[],bv=this.overlays;if(!bv){return bp}for(var bu=bv.length-1;bu>=0;bu--){var bt=bv[bu];if(this.isInView(bt)){bp.push(bt)
}}return bp},onMapMove:function(){var bp=this.checkView("move");if(bp){var br=this.viewOverlays;for(var bq=br.length-1;bq>=0;bq--){br[bq].reDraw(1)}}},clearOverlays:function(){var bp=this.getOverlays();for(var bq=bp.length-1;bq>=0;bq--){if(!bp[bq]){continue}this.removeOverlay(bp[bq])}},removeView:function(br,bq){if(!br._inview){return}var bp=br.getContainer();bp.parentNode.removeChild(bp);bp._overlay=null;try{delete bp._overlay}catch(bs){}br._inview=false;this.viewOverlays.splice(bq,1)},removeFromList:function(bp){if(this.overlays){az(this.overlays,bp)
}},onOverlayChange:function(bp){bp.initPixel();be(bp,"geochange",[]);if(this.isInView(bp)){if(!bp._inview){this.addView(bp)}else{bp.reDraw(4)}}else{this.removeView(bp,aa(this.viewOverlays,bp))}},overlapRectangle:function(bp,bq){return(bq.min.x<bp.max.x&&bq.max.x>bp.min.x)&&(bq.min.y<bp.max.y&&bq.max.y>bp.min.y)},getEventOverlay:function(bq){var bp=bq.target;while(bp){if(bp._overlay){return bp._overlay}bp=bp.parentNode}return null},addView:function(br,bq){if(bq&&br._viewTag==bq){return}br._viewTag=bq;if(br._inview){return
}br._inview=true;var bp=br.getContainer();bp._overlay=br;this.overlaysDiv.appendChild(bp);br.reDraw(4);this.viewOverlays.push(br)},onMouseEvent:function(bu){var br=this.getEventOverlay(bu);if(!br){return false}var bt=this.map,bp=a8(bu,bt.getContainer()),bv=bt.fromContainerPixelToLatLng(bp);var bq=bu.type;if(bq==U[31]){bq=U[65]}else{if(bq=="touchmove"){bq=U[64]}else{if(bq=="touchend"){bq=U[63]}}}if(br.onMouseEvent){if(br.onMouseEvent(bq,bv,bu)){return}}be(br,bq,[bv,bu]);switch(bq){case U[28]:bc(bu);be(bt,bq,[bp,P(bu),br]);
break;case U[65]:this.mdTime=new Date().valueOf();this.mdPoint=bp;break;case U[63]:var bs=this.mdPoint;if(bs&&(new Date()).getTime()-this.mdTime<=500&&(Math.abs(bp.x-bs.x)<=2&&Math.abs(bp.y-bs.y)<=2)){if(br.onMouseEvent&&!br.onMouseEvent(U[47],bv,bu)){be(br,U[47],[bv,bu]);be(bt,U[47],[bp,P(bu),br]);bu._mapClickTriggered=true}}delete this.mdTime;delete this.mdPoint;break}},getDrawRectangle:function(){return this.drawRectangle},addOverlay:function(bp){if(!bp){return}if(!this.overlaysDiv){this.init()}var bq=this.map;
if(bp.initialize(bq)==false){return false}bp.initPixel();be(bp,"add",[bq]);this.addToList(bp)},initialize:function(bp){if(this.map){return false}this.map=bp;aE(bp,{addOverlay:a6(this,this.addOverlay),removeOverlay:a6(this,this.removeOverlay),clearOverlays:a6(this,this.clearOverlays),onOverlayChange:a6(this,this.onOverlayChange),getOverlaysRectangle:a6(this,this.getDrawRectangle)});return true}});function aG(){}aG.prototype=new o();T(aG.prototype,{close:function(){this.get().close()},open:function(bt,bs,bq,bp){var br=this.get();
if(bt){br.setLatLng(bt);if(br.bindOverlay){br.bindOverlay._infowindow=false;delete br.bindOverlay}}br.setTitle(bs);br.setContent(bq,bp&&bp.noFixContent);br.setOffset((bp&&bp.offset)?bp.offset:{x:0,y:0});this.map.addOverlay(br);return br},get:function(){var bp=this.map;if(!bp._infoWin){bp._infoWin=new aC()}return bp._infoWin},initialize:function(bp){if(this.map||!bp.addOverlay){return false}aE(bp,{openInfoWindow:a6(this,this.open),closeInfoWindow:a6(this,this.close),getInfoWindow:a6(this,this.get)});aE(ak.prototype,{openInfoWindow:w,closeInfoWindow:v});
this.map=bp;return true},remove:function(){var bq=this.map,bp=bq._infoWin;if(bp){bp.close();bp.depose()}delete bq.openInfoWindow;delete bq.closeInfoWindow;delete bq.getInfoWindow;o.prototype.remove.apply(this,arguments)}});function w(bv,br,bq){var bt=this.map;if(!bt){return}var bp=bt.getInfoWindow(),bs=this.infoWindowAnchor;bq=bq?bq:{};if(!bs){bs={x:this.getSize().x*0.5,y:0}}bq.offset={x:bs.x-this.anchor.x+this.offset.x,y:bs.y-this.anchor.y+this.offset.y};var bu=bt.openInfoWindow(this.getLatLng(),bv,br,bq);if(bu.bindOverlay){bu.bindOverlay._infowindow=false
}bu.bindOverlay=this;this._infowindow=true;return bu}function v(){if(!this._infowindow||!this.map){return}var bp=this.map.getInfoWindow();if(bp.bindOverlay==this){this._infowindow=false;delete bp.bindOverlay;bp.close()}}T(aG,{open:w,close:v});function Y(){this.action=U[27];this.enabled=true}Y.prototype=new o();T(Y.prototype,{setAction:function(bp){this.action=bp;this.check()},onDblClick:function(bp,br,bq){if(bq){return}var bt=this.map,bv=bt.fromContainerPixelToLatLng(bp),bu=bt.getScale();if(this.action==U[27]||this.action==U[26]){if(bt.panTo){bt.panTo(bv)
}else{bt.setCenter(bv)}}if(this.action==U[27]||this.action=="zoom"){if(bt.zoomIn){bt.zoomIn()}else{var bs=bu/2;if(bt.panScale){bt.panScale(bs)}else{bt.setScale(bs)}}}},setEnable:function(bp){this.enabled=!!bp;this.check()},check:function(){if(!this.enabled||this.action==U[81]){if(this.listeners){a7(this.listeners[0]);delete this.listeners}}else{if(!this.listeners){this.listeners=[Q(this.map,U[28],this,this.onDblClick)]}}},initialize:function(bp){if(this.map){return false}this.map=bp;bp.setDblClickAction=a6(this,this.setAction);
bp.setDblClickEnable=a6(this,this.setEnable);this.check();return true},remove:function(){var bp=this.map;delete bp.setDblClickAction;delete bp.setDblClickEnable;o.prototype.remove.apply(this,arguments)}});function l(){this.sad=false}l.prototype=new o();T(l.prototype,{onMouseDown:function(bp){var br=this.dragObj;if(br){this.onMouseUp(bp)}var bs=this.map,bt=bs.viewSize,bq=bs.getGeoPanel().style;br=this.dragObj={startPoint:bp,startLL:bs.fromContainerPixelToLatLng(bp),startScale:bs.getScale(),mml:Q(bs,U[63],this,this.onMouseUp),mdl:Q(bs,U[64],this,this.onMouseMove),timeout:window.setInterval(a6(this,this.onTime),256),lastTime:new Date().valueOf(),geoStart:{x:parseInt(bq.left),y:parseInt(bq.top)},lastPoint:bp}
},isDragging:function(){return !!this.dragObj},onMouseUp:function(){var bs=this.map;var br=this.dragObj;if(!br){return}var bp=!br.lastDelayTime||new Date().valueOf()-br.lastDelayTime>32;var bq=br.speed;if(!bq||(Math.abs(bq.x)<0.1&&Math.abs(bq.y)<0.1)){bp=false}this.onTime();this.dragObj=null;a7(br.mml);a7(br.mdl);if(br.moved){be(bs,U[34]);be(bs,U[37])}if(bp&&bs.slideMove){bq.x=Math.min(Math.max(bq.x,-2),2);bq.y=Math.min(Math.max(bq.y,-2),2);var bt=bs.getViewSize();bs.slideMove(bq)}},draggingEnabled:function(){return !!this.listeners
},initialize:function(bp){if(this.map||!bp.getGeoPanel){return false}this.map=bp;aE(bp,{enableDragging:a6(this,this.enableDragging),disableDragging:a6(this,this.disableDragging),draggingEnabled:a6(this,this.draggingEnabled),isDragging:a6(this,this.isDragging)});this.enableDragging();return true},remove:function(){if(this.dragObj){this.onMouseUp()}var bp=this.map;delete bp.enableDragging;delete bp.disableDragging;delete bp.draggingEnabled;delete bp.isDragging;o.prototype.remove.apply(this,arguments)},enableDragging:function(){if(!this.listeners){this.listeners=[Q(this.map,U[65],this,this.onMouseDown)]
}},disableDragging:function(){if(this.listeners){a7(this.listeners[0]);delete this.listeners}},onMouseMove:function(bx){var bv=this.dragObj,bq=this.map;if(!bv||!bq){return}if(!bv.moved){be(bq,U[35]);be(bq,U[40]);bv.moved=true}var bs=bv.geoStart,br=bv.startPoint,bw=bq.getViewSize();var bt=bq.fromContainerPixelToLatLng({x:bw.x/2-bx.x,y:bw.y/2-bx.y},bv.startLL,null,{x:0,y:0});be(bq,"drag",[bt]);if(bq.getScale()==bv.startScale){aS(bq.getGeoPanel(),{x:bs.x-br.x+bx.x,y:bs.y-br.y+bx.y})}else{bq.setCenter(bt)}if(this.sad){var bu=new Date().valueOf(),bp=bv.lastTime;
if(bu-bp>64){bv.lastDelayTime=bu}if(bu>bp){bv.speed={x:(bx.x-bv.lastPoint.x)/(bu-bp)/8,y:(bx.y-bv.lastPoint.y)/(bu-bp)/8}}bv.lastTime=bu}aE(bv,{lastPoint:bx,moveed:true})},onTime:function(){var bq=this.dragObj;if(!bq||!bq.moveed){return}var br=this.map,bp=bq.lastPoint,bt=br.getViewSize();var bs=br.fromContainerPixelToLatLng({x:bt.x/2-bp.x,y:bt.y/2-bp.y},bq.startLL,null,{x:0,y:0});br.setCenter(bs)}});function al(){}al.prototype=new o();T(al.prototype,{onMouseMove:function(bp){this.mPoint=a8(bp,this.map.getContainer());
if(!this.mmt){this.failTimes=0;this.mmt=window.setInterval(a6(this,this.onTime),16)}},onMouseDown:function(bu){this.onMouseEvent(U[65],bu);var bs=this.dragObj;if(bs){this.onMouseUp(bu)}var bt=this.map,bq=bt.getContainer();if(!bt.loaded){return}var bp=a8(bu,bq);bs=this.dragObj={startPoint:{x:bu.clientX,y:bu.clientY},startTime:new Date().valueOf(),mml:Q(document,U[64],this,this.onMouseMove),mul:Q(document,U[63],this,this.onMouseUp)};var br;if(window.getSelection){br=window.getSelection()}else{br=document.selection
}if(br){try{br.clear&&br.clear();br.removeAllRanges&&br.removeAllRanges()}catch(bu){}}if(bq.setCapture){bq.setCapture();if(bu.target&&bu.target._needUp){bs.downEvent=bu}}},onTime:function(){var bp=this.mPoint,bq=this.lPoint;if(!bp||(bq&&bq.x==bp.x&&bq.y==bp.y)){this.failTimes++;if(this.failTimes>8){window.clearInterval(this.mmt);delete this.mmt}return}this.lPoint=bp;be(this.map,U[64],[this.lPoint=bp])},onMouseEvent:function(bq,bs){bc(bs);var br=this.map;if(!br.loaded){return}var bp=a8(bs,br.getContainer());be(br,bq,[bp,P(bs)])
},onDblclick:function(bp){this.onMouseEvent(U[28],bp)},onMouseUp:function(bq){var bp=this.dragObj;if(!bp){return}this.onMouseEvent(U[63],bq);this.onTime();this.dragObj=null;a7(bp.mml);a7(bp.mul);if(document.releaseCapture){document.releaseCapture()}if((new Date()).getTime()-bp.startTime<=500&&(Math.abs(bp.startPoint.x-bq.clientX)<=2&&Math.abs(bp.startPoint.y-bq.clientY)<=2)){if(!bq._mapClickTriggered){this.onMouseEvent(U[47],bq)}if(bp.downEvent){be(bp.downEvent.target,U[63],[bq])}}},initialize:function(bq){if(this.map){return false
}var bp=bq.getContainer();this.listeners=[Q(bp,U[28],this,this.onDblclick),Q(bp,U[64],this,this.onMouseMove),Q(bp,U[65],this,this.onMouseDown),bd(bp,U[25],bc)];this.map=bq;return true},remove:function(){if(this.dragObj){this.onMouseUp()}o.prototype.remove.apply(this,arguments)}});function k(){this.moveSpeed=4;this.scaleSpeed=0.32}k.prototype=new o();T(k.prototype,{isMapKey:function(bp){if(bp.ctrlKey||bp.altKey||bp.metaKey){return false}if((bp.target.nodeName=="INPUT"&&bp.target.type=="text")||bp.target.nodeName=="TEXTAREA"){return false
}return true},getSlideObj:function(){var bp=this.slideObj;if(!bp){bp=this.slideObj={offset:{x:0,y:0},scale:0}}return bp},onKeyDown:function(br){if(!this.isMapKey(br)){return}var bt=this.getSlideObj(),bq=this.map,bs=bt.offset,bp=br.keyCode;switch(bp){case 37:bs.x=1;break;case 38:bs.y=1;break;case 39:bs.x=-1;break;case 40:bs.y=-1;break;case 187:case 107:case 61:bt.scale=-1;break;case 189:case 109:bt.scale=1;break;default:return}if(bp==this.lastCode){return}this.lastCode=bp;this.downTime=new Date().valueOf();if(bq.slideMove){bq.slideMove({x:bs.x*this.moveSpeed,y:bs.y*this.moveSpeed},true)
}if(bq.slideScale){bq.slideScale(bt.scale*this.scaleSpeed,true)}},onKeyUp:function(bq){if(!this.isMapKey(bq)){return}var bt=this.getSlideObj(),bp=this.map,bs=bt.offset,bu=bp.getViewSize();switch(bq.keyCode){case 33:case 87:case 104:this.move({x:0,y:-bu.y/2});break;case 34:case 83:case 98:this.move({x:0,y:bu.y/2});break;case 35:case 68:case 102:this.move({x:bu.x/2,y:0});break;case 36:case 65:case 100:this.move({x:-bu.x/2,y:0});break;case 37:case 39:if(bs){bs.x=0}break;case 38:case 40:if(bs){bs.y=0}break;case 187:case 107:case 61:case 189:case 109:if(!bp.slideScale||(new Date().valueOf()-this.downTime<256&&(!bp.getTargetScale||bp.getScale()==bp.getTargetScale()))){var br;
if(bt.scale<0){if(bp.zoomIn){bp.zoomIn()}else{br=bp.getScale()/2}}else{if(bp.zoomOut){bp.zoomOut()}else{br=bp.getScale()*2}}if(br){if(bp.panScale){bp.panScale(br)}else{bp.setScale(br)}}}bt.scale=0;break;default:return}this.lastCode=null;if(bp.slideMove){bp.slideMove({x:bs.x*this.moveSpeed,y:bs.y*this.moveSpeed},true)}if(bp.slideScale){bp.slideScale(bt.scale*this.scaleSpeed,true)}},move:function(bp){var br=this.map,bs=br.getViewSize();var bq=br.fromContainerPixelToLatLng({x:bs.x/2+bp.x,y:bs.y/2+bp.y});if(br.panTo){br.panTo(bq)
}else{br.setCenter(bq)}},initialize:function(bp){if(this.map){return false}this.listeners=[Q(document,"keydown",this,this.onKeyDown),Q(document,"keyup",this,this.onKeyUp)];this.map=bp;return true}});function aJ(){this.byPoint=true}aJ.prototype=new o();T(aJ.prototype,{endScale:function(){var bs=this.map,br=this.wheelObj;delete this.wheelObj;if(!br){return}if(br.timeout){window.clearInterval(br.timeout)}be(this.map,U[38]);if(this.byPoint){be(this.map,U[37])}if(bs.isStepZoom&&bs.isStepZoom()){var bt=bs.getZoomScale(bs.getScale(),br.dir);
if(bs.panScale){bs.panScale(bt,br.toPoint)}else{bs.setScale(bt);if(br.toll){var bu=bs.getViewSize(),bq=br.toPoint;var bp=bs.fromContainerPixelToLatLng({x:bu.x-bq.x,y:bu.y-bq.y},br.toll,bt);bs.setCenter(bp)}}}},onMouseWheel:function(bt){bc(bt);var bq=this.wheelObj;if(!bq){bq=this.wheelObj={distance:0}}if(this.byPoint){var bs=this.map,bp=a8(bt,bs.getContainer());aE(bq,{toPoint:bp,toll:bs.fromContainerPixelToLatLng(bp),dir:0})}if(!bq.timeout){be(this.map,U[36]);if(this.byPoint){be(this.map,U[40])}bq.timeout=window.setInterval(a6(this,this.setScale),32)
}var br=(typeof(bt.wheelDelta)==U[48])?bt.wheelDelta:(-bt.detail*40);bq.distance+=br;bq.dir=br>0?-1:1;bq.scrolled=true},initialize:function(bp){if(this.map){return false}this.listeners=[Q(bp.getContainer(),"mousewheel",this,this.onMouseWheel)];if(!document.all){this.listeners.push(Q(bp.getContainer(),"DOMMouseScroll",this,this.onMouseWheel))}this.map=bp;return true},setScale:function(){var bt=this.map,bs=bt.getScale(),br=this.wheelObj;if(!br){return}if(!br.scrolled){br.pauseTimes++;if(br.pauseTimes==4){this.endScale()
}return}var bu=Math.pow(2,br.distance/-1024);bt.setScale(bs*bu);if(br.toll){var bv=bt.getViewSize(),bq=br.toPoint;var bp=bt.fromContainerPixelToLatLng({x:bv.x-bq.x,y:bv.y-bq.y},br.toll);bt.setCenter(bp)}br.distance=0;br.scrolled=false;br.pauseTimes=0},remove:function(){if(this.wheelObj){this.endScale()}o.prototype.remove.apply(this,arguments)}});function a1(bu,br,bp,bt,bq){if(typeof(bu)!=U[67]){var bs=bu;bu=document.createElement("div");bu.innerHTML=bs}this.div=bu;bt=bt?bt:800;if(bq){ad(bu,bq)}ad(bu,{zIndex:bt,position:U[78]},true);
this.setLayout(br);this.setPosition(bp)}a1.prototype=new o();T(a1.prototype,{remove:function(){this.map.getContainer().removeChild(this.div);delete this.div;o.prototype.remove.apply(this,arguments)},initialize:function(bp){if(this.map){return false}this.map=bp;bp.getContainer().appendChild(this.div);this.setLayout(this.layout);return true}});function B(bs,br,bp,bq){var bt=this.div=document.createElement("div");if(bq){ad(bt,bq)}ad(bt,{zIndex:900,position:U[78]});this.logo=bs;this.setLayout(br);this.setPosition(bp)
}B.prototype=new o();T(B.prototype,{remove:function(){this.map.getContainer().removeChild(this.div);delete this.div;o.prototype.remove.apply(this,arguments)},initialize:function(bp){if(this.map){return false}this.map=bp;bp.getContainer().appendChild(this.div);this.setLayout(this.layout);this.onResize();this.listeners=[Q(bp,U[46],this,this.onResize)];return true},onResize:function(){var bp,bq=this.map.getViewSize().x,br=this.logo;for(bp=br.length-1;bp>=0;bp--){if(bq>=br[bp].minWidth){break}}this.div.innerHTML=bp>=0?br[bp].html:""
}});function u(){}u.prototype=new o();T(u.prototype,{onClick:function(bs){var br=bs.target,bp=bs.target.index;while(br&&br!=this.div&&!bp){br=br.parentNode;bp=br.index}if(!bp){return}var bq=this.map.getMapTypes()[bp-1];if(!bq){return}bc(bs);this.map.setMapType(bq)},showLabels:function(){var bw=this.div,bx=aL+"mtc.png";bg(bw,true);var bu=this.map.getMapTypes(),bv=this.map.getCurrentMapType();ad(bw,{left:"0px"});for(var bt=0;bt<bu.length;bt++){var bA=document.createElement("div");bA.index=bt+1;var by=(bv==bu[bt])?U[24]:"normal",bp=by==U[24]?U[23]:U[55],br=by==U[24]?40:0;
ad(bA,{position:U[69],styleFloat:U[22],cssFloat:U[22],height:"20px",margin:"2px",cursor:U[66],color:bp,display:"inline"});var bs=aY(bx,{spritePoint:{x:0,y:br+20},size:{x:2,y:20},imageSize:{x:4,y:80}});ad(bs,{position:U[69],styleFloat:U[22],cssFloat:U[22]});bA.appendChild(bs);var bq=document.createElement("div");var bz=document.createElement("div");ad(bz,{margin:"2px",marginLeft:"6px",marginTop:"3px",marginRight:"6px",fontSize:"11px",textAlign:U[26]});bz.appendChild(document.createTextNode(bu[bt].name));ad(bq,{position:U[69],styleFloat:U[22],cssFloat:U[22],height:"20px",display:"inline"});
bq.appendChild(bz);at(bq,bx,{spritePoint:{x:0,y:br},spriteSize:{x:4,y:20},imageSize:{x:4,y:80},repeat:U[70]});bA.appendChild(bq);var bs=aY(bx,{spritePoint:{x:2,y:br+20},size:{x:2,y:20},imageSize:{x:4,y:80}});ad(bs,{position:U[69],styleFloat:U[22],cssFloat:U[22]});bA.appendChild(bs);bw.appendChild(bA);ad(bq,{width:bs.offsetLeft-2+"px",height:"20px"})}this.position={x:-bw.offsetWidth-10,y:10};this.onMapResize()},initialize:function(bq){if(this.map||!bq.getMapTypes){return false}this.map=bq;var bp=this.div=document.createElement("div");
ax(bp);this.setLayout({x:1,y:0});bp.noWrap=true;ad(bp,{position:U[78],zIndex:500,height:"20px"});bq.getContainer().appendChild(bp);this.listeners=[Q(bq,U[32],this,this.showLabels),Q(bp,U[47],this,this.onClick),bd(bp,U[65],bc)];this.showLabels();return true},remove:function(){bg(this.div);delete this.div;o.prototype.remove.apply(this,arguments)}});function R(){aE(this,{levels:[{name:"\u516c\u91cc",unit:1000},{name:"\u7c73",unit:1}],padding:1,weight:2,height:8});this.setColor()}R.prototype=new o();T(R.prototype,{reDraw:function(){delete this.timeout;
var br=this.map,bq=br.getCenter();if(!bq){return}var bp=br.getBounds(),bv=br.getViewSize();var bs=d([new r(bq.la,bp.sw.lo),new r(bq.la,bp.ne.lo)])/bv.x;if(this.lastDis&&Math.abs(Math.log(this.lastDis/bs))<1/16){return}this.lastDis=bs;var bw=Math.pow(10,Math.ceil(Math.log(bs*50)/Math.log(10))),bu=bw/bs;if(bu>=250){bu/=5;bw/=5}if(bu>=200){bu/=4;bw/=4}if(bu>=100){bu/=2;bw/=2}var bx=bw,by=this.levels;for(var bt=0;bt<by.length;bt++){if(bw>=by[bt].unit){bx=bw/by[bt].unit+" "+by[bt].name;break}}this.span.innerHTML=bx;
bu=Math.round(bu);ad(this.span,{width:bu+"px"});ad(this.centerDiv,{width:bu+"px"});ad(this.rightDiv,{left:bu+this.weight+"px"});ad(this.div,{width:(bu+this.weight*2+this.padding*2)+"px"})},onMapMove:function(){if(this.timeout){return}this.timeout=window.setTimeout(a6(this,this.reDraw),1024)},setColor:function(bp,bq){this.color=bp=bp?bp:U[55];this.borderColor=bq=bq?bq:U[23];if(this.centerDiv){ad(this.centerDiv,{borderTop:U[21]+this.padding+"px "+bq,borderBottom:U[21]+this.padding+"px "+bq});ad(this.centerDiv.firstChild,{borderTop:U[21]+this.weight+"px "+bp});
ad(this.leftDiv,{border:U[21]+this.padding+"px "+bq});ad(this.leftDiv.firstChild,{borderLeft:U[21]+this.weight+"px "+bp});ad(this.rightDiv,{border:U[21]+this.padding+"px "+bq});ad(this.rightDiv.firstChild,{borderLeft:U[21]+this.weight+"px "+bp})}},initialize:function(bq){if(this.map){return false}this.map=bq;var bv=this.padding,bs=this.weight,bx=this.height;var bp=this.div=document.createElement("div");ad(bp,{position:U[78],zIndex:500,height:(12+this.height+this.padding*2)+"px"});var bw=this.span=document.createElement("div");
ad(bw,{textShadow:"0px 0px 2px #FFFFFF",left:"5px",fontSize:U[50],filter:"glow(color=#FFFFFF,strength=2)",textAlign:U[22],height:"14px"});if(window.chrome&&window.chrome.csi){ad(bw,{textShadow:""})}ad(bw,{position:U[78],zIndex:200});bp.appendChild(bw);var bu=this.leftDiv=document.createElement("div");ad(bu,{position:U[78],left:"0px",top:U[50],width:this.weight+"px",height:this.height+"px",fontSize:"0px",overflow:U[80],zIndex:50});bp.appendChild(bu);var br=document.createElement("div");ad(br,{position:U[78],left:"0px",top:"0px",width:"1px",height:this.height+"px",fontSize:"0px",overflow:U[80]});
bu.appendChild(br);var bt=this.centerDiv=document.createElement("div");ad(bt,{position:U[78],left:this.weight+this.padding+"px",top:(12+(this.height-this.weight)/2)+"px",height:this.weight+"px",fontSize:"0px",overflow:U[80],zIndex:100});bp.appendChild(bt);var br=document.createElement("div");ad(br,{position:U[78],left:"0px",top:"0px",height:"1px",width:U[77],fontSize:"0px",overflow:U[80]});bt.appendChild(br);if(document.all&&(!document.compatMode||document.compatMode=="BackCompat")){ad(bu,{width:(this.weight+this.padding*2)+"px",height:(this.height+this.padding*2)+"px"});
ad(bu.firstChild,{width:(1+this.weight)+"px"});ad(bt,{height:(this.weight+this.padding*2)+"px"});ad(bt.firstChild,{height:(1+this.weight)+"px"})}var by=this.rightDiv=bu.cloneNode(true);bp.appendChild(by);this.setLayout({x:0,y:1});this.setPosition({x:10,y:-(this.height+this.padding*2+12+25)});bq.getContainer().appendChild(bp);this.setColor(this.color,this.borderColor);this.listeners=[Q(bq,U[43],this,this.onMapMove),Q(bq,U[39],this,this.onMapMove),Q(bq,U[41],this,this.onMapMove),Q(bq,U[45],this,this.onMapMove)];
this.reDraw();return true},remove:function(){bg(this.div);delete this.lastDis;delete this.div;delete this.span;delete this.leftDiv;delete this.rightDiv;delete this.centerDiv;o.prototype.remove.apply(this,arguments)}});function b(bv,bp,br){if(br){aE(this,br)}aE(this,{map:bv,container:bp,zoomAdd:typeof(this.zoomAdd)==U[48]?parseInt(this.zoomAdd):4});var bt=this.miniMap=new a5(bp,{initControls:[ai,aI,aA,a4,aO,H,j,av,l,al],initMapTypes:[],clip:this.clip});if(this.center&&bt.disableDragging){bt.disableDragging()}if(br&&!br.hideFlag){var bq={position:U[78],fontSize:"0px",zIndex:"1000"};
this.rectWeight=1;var bs=this.rectControl=document.createElement("div");ad(bs,{borderColor:U[20],cursor:"move",MozOpacity:0.4,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=40)",opacity:0.4,backgroundColor:U[23],borderStyle:"solid"});ad(bs,bq);ad(bs,{borderWidth:this.rectWeight+"px"});var bu=document.createElement("div");ad(bu,{backgroundColor:U[20]});ad(bu,{width:"50%",height:"1px",left:"25%",top:"50%",overflow:U[80]});ad(bu,bq);bs.appendChild(bu);bu=document.createElement("div");ad(bu,{backgroundColor:U[20]});
ad(bu,{height:"50%",width:"1px",left:"50%",top:"25%",overflow:U[80]});ad(bu,bq);bs.appendChild(bu);bt.getContainer().appendChild(bs);if(this.mapType){bt.setMapType(this.mapType)}var bw=this.rectOverlay=new a3(null,{weight:10,opacity:0.4,color:U[20],bgcolor:U[23]});bw.setLineWeight(this.rectWeight)}this.enable()}T(b.prototype,{onRectMouseDown:function(bq){bc(bq);if(this.dragObject){this.onRectMouseUp(bq)}var bp=this.rectControl.style;this.dragObject={startPosition:{x:parseInt(bp.left),y:parseInt(bp.top)},startSize:{x:parseInt(bp.width),y:parseInt(bp.height)},preMove:{x:0,y:0},startPoint:{x:bq.clientX,y:bq.clientY},timeout:window.setInterval(a6(this,this.onTime),16),moveListener:Q(document,U[64],this,this.onRectMouseMove),upListener:Q(document,U[63],this,this.onRectMouseUp)}
},onMapMoveStart:function(){this.fixedNum++},onTypeChange:function(){var bp=this.map.getCurrentMapType();if(bp){this.miniMap.setMapType(bp)}},onMapMove:function(){if(this.fixedNum<=0&&!this.miniMap.isDragging()){this.returnView();return}if(this.rectOverlay){this.rectOverlay.setBounds(this.map.getBounds())}},onMapMoveEnd:function(){this.fixedNum--;if(this.fixedNum<=0){this.returnView()}},returnView:function(){var bq=this.map,bv=this.miniMap;if(!bq.loaded){return}this.fixedNum=0;var bp=this.center?this.center:bq.getCenter(),bt=this.scale?this.scale:(this.zoom?(360/256/Math.pow(2,this.zoom)):(bq.getScale()*Math.pow(2,this.zoomAdd)));
if(bv.panTo){bv.panTo(bp)}else{bv.setCenter(bp)}if(bv.panScale){bv.panScale(bt)}else{bv.setScale(bt)}var bx=bv.getViewSize(),bu=bv.fromLatLngToPixel(bp),by=bq.getRectangle();if(this.rectControl){var bz={x:(by.max.x-by.min.x)/bt-this.rectWeight,y:(by.max.y-by.min.y)/bt-this.rectWeight};var br={x:Math.min(Math.ceil(bx.x/2)+this.rectWeight*2,Math.max(10,bz.x)),y:Math.min(Math.ceil(bx.y/2)+this.rectWeight*2,Math.max(10,bz.y))};var bs=Math.floor(-br.x/2+bx.x/2)-this.rectWeight,bw=Math.floor(-br.y/2+bx.y/2)-this.rectWeight;
aS(this.rectControl,{x:bs,y:bw});aF(this.rectControl,br)}if(this.rectOverlay){this.rectOverlay.setBounds(new ao(bq.fromPixelToLatLng({x:by.min.x,y:by.max.x}),bq.fromPixelToLatLng({x:by.max.x,y:by.min.x})))}},onRectMouseUp:function(bw){bc(bw);var bt=this.dragObject;delete this.dragObject;a7(bt.moveListener);a7(bt.upListener);window.clearInterval(bt.timeout);this.onTime();var br=bt.startPosition,bs=bt.startPoint,bp={x:br.x-bs.x+bw.clientX,y:br.y-bs.y+bw.clientY},bq=bt.startSize,bv=this.map;var bu=this.miniMap.fromContainerPixelToLatLng({x:bp.x+bq.x/2,y:bp.y+bq.y/2});
if(bv.panTo){bv.panTo(bu)}else{bv.setCenter(bu)}},enable:function(){if(this.listeners){return}var bq=this.map,bp=this.miniMap;this.listeners=[Q(bq,U[43],this,this.returnView),Q(bq,U[40],this,this.onMapMoveStart),Q(bq,U[37],this,this.onMapMoveEnd),Q(bq,U[39],this,this.onMapMove),Q(bq,U[36],this,this.onMapMoveStart),Q(bq,U[38],this,this.onMapMoveEnd),Q(bq,U[41],this,this.onMapMove),Q(bq,U[46],this,this.onMapMove),Q(bp,"drag",this,this.onMapMove),Q(bp,U[34],this,this.onDragEnd),Q(bp,U[28],this,this.onDblClick)];
if(this.rectControl){this.listeners.push(Q(this.rectControl,U[65],this,this.onRectMouseDown))}this.fixedNum=0;if(!this.mapType){this.listeners.push(Q(bq,U[32],this,this.onTypeChange));this.onTypeChange()}this.returnView();if(this.rectOverlay){bp.addOverlay(this.rectOverlay)}},disable:function(){var bq,bp=this.listeners;if(!bp){return}while(bq=bp.pop()){a7(bq)}this.listeners=null},depose:function(){this.disable();this.miniMap.depose();bg(this.container,true);delete this.miniMap;delete this.map;delete this.container;
delete this.rectControl;delete this.rectOverlay},onRectMouseMove:function(bq){var bp=this.dragObject;if(!bp){return}bp.lastPoint={x:bq.clientX,y:bq.clientY};bp.moveed=true},onDragEnd:function(bp){var bt=this.rectControl,bs=this.map,br;bp=bp||{x:0,y:0};if(bt){var bq=bt.style;bp={x:parseInt(bq.left)+parseInt(bq.width)/2,y:parseInt(bq.top)+parseInt(bq.height)/2};br=this.miniMap.fromContainerPixelToLatLng(bp)}else{br=this.miniMap.getCenter()}if(bs.panTo){bs.panTo(br)}else{bs.setCenter(br)}},getMiniMap:function(){return this.miniMap
},onTime:function(){var br=this.dragObject,bq=this.miniMap;if(!br||!br.moveed){return}aS(this.rectControl,this.getDragPoint(br.lastPoint));var bs=bq.getViewSize(),bp=br.moveSize;if(bp.x!=0||bp.y!=0){bq.setCenter(bq.fromContainerPixelToLatLng({x:bs.x/2+bp.x,y:bs.y/2+bp.y}))}br.preMove.x+=bp.x;br.preMove.y+=bp.y},getDragPoint:function(bv){var bs=this.dragObject,bt=bs.startPosition,bp=bs.startPoint,bu=this.miniMap.getViewSize();var bx={x:bt.x-bp.x+bv.x,y:bt.y-bp.y+bv.y},br={x:0,y:0};var bw=bs.startSize,bq=2;if(!this.center){if(bx.x<0){bx.x=0;
br.x=-bq}if(bx.y<0){bx.y=0;br.y=-bq}if(bx.x>bu.x-bw.x-this.rectWeight*2){bx.x=bu.x-bw.x-this.rectWeight*2;br.x=bq}if(bx.y>bu.y-bw.y-this.rectWeight*2){bx.y=bu.y-bw.y-this.rectWeight*2;br.y=bq}}bs.moveSize=br;return bx},onDblClick:function(bp){var br=this.miniMap.fromContainerPixelToLatLng(bp),bq=this.map;if(bq.panTo){bq.panTo(br)}else{bq.setCenter(br)}}});function an(bq){bq=bq?bq:{};aE(this,{config:bq,layout:bq.layout?bq.layout:{x:1,y:1},pad:br=br?br:5,size:bq.size?bq.size:{x:160,y:110},btnSize:bq.btnSize?bq.btnSize:{x:15,y:15},show:!!bq.open,pad:bq.pad?bq.pad:5});
var bp=this.div=document.createElement("div"),bA=this.divs={},bz=aL+"oc.png",by={x:56,y:28};ad(bp,{position:U[78],overflow:U[80],zIndex:10000,cursor:U[76]});var bB=this.resizeDiv=document.createElement("div");ad(bB,{position:U[78],overflow:U[80]});bp.appendChild(bB);var bC=this.mapDiv=document.createElement("div");ad(bC,{zIndex:0,cursor:U[66]});var bD=this.size,br=this.pad,bv=this.divSize={x:bD.x+br*2-1,y:bD.y+br*2-1};aF(bC,bD);aS(bC,{x:br,y:br});bB.appendChild(bC);aF(bp,bv);aF(bB,bv);var bt=br*1.4,bw={x:bt,y:bt};
var bs=bA.ul=aY(bz,{spritePoint:{x:0,y:0},spriteSize:{x:7,y:7},position:{x:0,y:0},size:bw,imageSize:by});ad(bs,{position:U[78]});bB.appendChild(bs);bs=bA.ur=aY(bz,{spritePoint:{x:7,y:0},spriteSize:{x:7,y:7},position:{x:bD.x+br*2-bt-1,y:0},size:bw,imageSize:by});ad(bs,{position:U[78]});bB.appendChild(bs);bs=bA.bl=aY(bz,{spritePoint:{x:0,y:7},spriteSize:{x:7,y:7},position:{x:0,y:bD.y+br*2-bt-1},size:bw,imageSize:by});ad(bs,{position:U[78]});bB.appendChild(bs);bs=bA.br=aY(bz,{spritePoint:{x:7,y:7},spriteSize:{x:7,y:7},position:{x:bD.x+br*2-bt-1,y:bD.y+br*2-bt-1},size:bw,imageSize:by});
ad(bs,{position:U[78]});bB.appendChild(bs);var bx=bA.top=aY(bz,{spritePoint:{x:0,y:15},spriteSize:{x:28,y:7},imageSize:by,position:{x:bt,y:0},size:{x:bD.x-(bt-br)*2-1,y:bt}});ad(bx,{position:U[78],zIndex:50});bB.appendChild(bx);bx=bA.left=aY(bz,{spritePoint:{x:44,y:0},spriteSize:{x:7,y:14},imageSize:by,position:{x:0,y:bt},size:{x:bt,y:bD.y-(bt-br)*2-1}});ad(bx,{position:U[78]});bB.appendChild(bx);bx=bA.bottom=aY(bz,{spritePoint:{x:0,y:22},spriteSize:{x:28,y:5},imageSize:by,position:{x:bt,y:bD.y+br*2-bt+1},size:{x:bD.x-(bt-br)*2-1,y:bt}});
ad(bx,{position:U[78]});bB.appendChild(bx);bx=bA.right=aY(bz,{spritePoint:{x:51,y:0},spriteSize:{x:7,y:14},imageSize:by,position:{x:bD.x+br*2-bt+1,y:bt},size:{x:bt,y:bD.y-(bt-br)*2-1}});ad(bx,{position:U[78],fontSize:"0px"});bB.appendChild(bx);this.btnSPoint={open:{x:14,y:0},close:{x:29,y:0}};this.btnSSize={x:15,y:15};var bu=this.button=aY(bz,{spritePoint:this.btnSPoint.open,spriteSize:this.btnSSize,imageSize:by,position:{x:0,y:0},size:this.btnSize});ax(bu);ad(bu,{position:U[78],cursor:U[66],zIndex:10000});this.listeners=[Q(this.button,U[47],this,this.changeView),bd(this.button,U[28],bc),bd(this.button,U[65],bc)];
bp.appendChild(bu);this.setLayout(this.layout)}an.prototype=new o();T(an.prototype,{changeView:function(bq){bc(bq);if(this.show){var bp={x:0,y:0};if(Math.abs(this.direction)==3){bp.y=this.size.y}if(Math.abs(this.direction)==1){bp.x=this.size.x}if(this.mini){this.mini.disable();this.resizeTo(bp)}else{aF(this.resizeDiv,bp)}aS(this.button.firstChild,{x:-this.btnSPoint.open.x*this.btnSize.x/this.btnSSize.x,y:-this.btnSPoint.open.y*this.btnSize.y/this.btnSSize.y});this.show=false}else{var bp=this.divSize;if(this.mini){this.mini.enable();
this.resizeTo(bp)}else{aF(this.resizeDiv,bp)}aS(this.button.firstChild,{x:-this.btnSPoint.close.x*this.btnSize.x/this.btnSSize.x,y:-this.btnSPoint.close.y*this.btnSize.y/this.btnSSize.y});this.show=true}be(this,"viewchange",[this.show])},setSize:function(bp){aF(this.resizeDiv,bp);if(!document.all){aF(this.div,{x:bp.x+this.btnSize.x,y:bp.y+this.btnSize.y})}},resizeTo:function(bp){if(this.slideObj){this.resizeEnd()}var bq=this.resizeDiv.style;this.slideObj={startSize:{x:parseInt(bq.width),y:parseInt(bq.height)},endSize:bp,number:0,timeout:window.setInterval(a6(this,this.resize),16)}
},initialize:function(bp){if(this.mini){return false}this.mini=new b(bp,this.mapDiv,this.config);if(this.show){this.mini.enable();aF(this.resizeDiv,this.divSize);aS(this.button.firstChild,{x:-this.btnSPoint.close.x*this.btnSize.x/this.btnSSize.x,y:-this.btnSPoint.close.y*this.btnSize.y/this.btnSSize.y});this.setSize(this.size)}else{this.mini.disable();aF(this.resizeDiv,{x:0,y:0});aS(this.button.firstChild,{x:-this.btnSPoint.open.x*this.btnSize.x/this.btnSSize.x,y:-this.btnSPoint.open.y*this.btnSize.y/this.btnSSize.y});
this.setSize({x:0,y:0})}bp.getContainer().appendChild(this.div)},remove:function(){var bp=this.mini,bq=this.div;if(bp){bp.depose();delete this.mini}if(bq&&bq.parentNode){bq.parentNode.removeChild(bq)}o.prototype.remove.apply(this,arguments)},depose:function(){this.remove();bg(this.div);delete this.div;delete this.resizeDiv;delete this.mapDiv;delete this.button},setLayout:function(bp){t(this.div,bp,false,0);t(this.resizeDiv,bp,true);t(this.button,bp,false,this.pad+"px")},getMiniMap:function(){return this.mini?this.mini.miniMap:null
},resize:function(){var bq=this.slideObj;bq.number++;var br=25;var bp={x:bq.endSize.x-(bq.endSize.x-bq.startSize.x)*(Math.sin(Math.PI*(0.5-bq.number/br))+1)/2,y:bq.endSize.y-(bq.endSize.y-bq.startSize.y)*(Math.sin(Math.PI*(0.5-bq.number/br))+1)/2};this.setSize(bp);if(bq.number==br){this.resizeEnd()}},resizeEnd:function(){var bp=this.slideObj;window.clearInterval(bp.timeout);delete this.slideObj},isOpen:function(){return !!this.show}});function t(bt,br,bp,bs){var bq={};bs=(typeof(bs)==U[48])?(bs+"px"):"0px";if(br.x<0.5){bq.right=U[19];
bq.left=bs}else{if(br.x>0.5){bq.left=U[19];bq.right=bs}else{bq.right=U[19];bq.left=bp?bs:"50%"}}if(br.y<0.5){bq.bottom=U[19];bq.top=bs}else{if(br.y>0.5){bq.top=U[19];bq.bottom=bs}else{bq.bottom=U[19];bq.top=bp?bs:"50%"}}ad(bt,bq)}T(an,{setPosition:t});function am(bp){this.extraBtns=[];aE(this,{tipsSize:{x:42,y:18},imgFile:"lc.gif",tipsOffset:{x:10,y:0},cursorSize:{x:13,y:7},cursorPoint:{x:161,y:0},btnSize:{x:17,y:17},btnPad:{x:3,y:3},imageSize:{x:179,y:18},bgSize:{x:5,y:18},zoomHeight:9,bgPoint:{x:174,y:0},tipsStyle:{padding:"3px"},cursorOffset:{x:0,y:0}});
aE(this,bp)}am.prototype=new o();T(am.prototype,{createImg:function(bq,bp,bw,bx,bt,br,bv,bu){var bs=aY(bp,{spritePoint:bw,size:bx,position:bt,imageSize:bu||this.imageSize});bs._command=br;if(bv){bs.title=bs.alt=bv}ad(bs,{position:U[78],cursor:U[66],zIndex:50});bq.appendChild(bs);return bs},removeExtraBtn:function(bp){az(this.extraBtns,bp);this.create()},onMouseDown:function(bt){var bs=bt.target,br=this.map,bp=true;while(bs&&!bs._command&&bs!=this.div){bs=bs.parentNode}if(!bs||!bs._command){return}bc(bt);this.downTime=new Date().valueOf();
switch(bs._command){case U[18]:if(br.slideMove){br.slideMove({x:0,y:4},true)}break;case U[17]:if(br.slideMove){br.slideMove({x:0,y:-4},true)}break;case U[16]:if(br.slideMove){br.slideMove({x:4,y:0},true)}break;case U[15]:if(br.slideMove){br.slideMove({x:-4,y:0},true)}break;case U[14]:if(br.slideScale){br.slideScale(-0.32,true)}break;case U[13]:if(br.slideScale){br.slideScale(0.32,true)}break;case U[12]:this.dragObj=new F(this.zoomCursor,a6(this,this.onDrag),{container:this.div,rtp:{x:0,y:1},rtpLimit:{minY:this.zoomStart,maxY:this.zoomStart+(this.map.getZoomScales().length-1)*this.zoomHeight},interval:128});
bp=false;this.dragObj.onMouseDown(bt);break;case"zoom":br.setZoom(bs._zoom);bp=false;break;default:if(bs._command.substring(0,4)=="cmd_"){var bq=this.extraBtns[bs._command.substring(4)];if(bq&&bq.downHandle){bq.downHandle(br,bs,bt)}}bp=false;break}if(bp&&this.focusY){if(this.focusBtn){ad(this.focusBtn.firstChild,{top:"0px"})}this.focusBtn=bs;ad(bs.firstChild,{top:-this.focusY+"px"})}this.lastCommand=bs._command;var bu=this.div;if(bu.setCapture){bu.setCapture()}this.muListener=Q(document,U[63],this,this.onMouseUp)
},onZoomMouseMove:function(bt){var br=this.zoomBar,bp=a8(bt,br);var bq=Math.floor(bp.y/this.zoomHeight),bs=this.map.getZoomScales();br.title=br.alt=bs[bq]?bs[bs.length-1-bq].name:"";if(bp.x<0||bp.y<0||bp.x>60||bp.y>br.offsetHeight){a7(this.zoomLis);delete this.zoomLis;this.tipsDiv.style.display=U[81]}},onMouseOut:function(bp){if(this.focusY){if(this.focusBtn){ad(this.focusBtn.firstChild,{top:"0px"})}}},onMouseUp:function(bu){var bq=this.map;if(this.dragObj){this.dragObj.onMouseUp(bu);delete this.dragObj;return
}if(document.releaseCapture){document.releaseCapture()}a7(this.muListener);if(!this.lastCommand){return}bc(bu);switch(this.lastCommand){case U[18]:case U[17]:case U[16]:case U[15]:if(bq.slideMove){bq.slideMove()}if(!bq.slideMove||new Date().valueOf()-this.downTime<256){var bv=bq.getViewSize(),bt=this.lastCommand;var bz=(bt==U[18]?{x:0,y:-bv.y/2}:(bt==U[17]?{x:0,y:bv.y/2}:(bt==U[16]?{x:-bv.x/2,y:0}:{x:bv.x/2,y:0})));var bw=bq.fromContainerPixelToLatLng({x:bv.x/2+bz.x,y:bv.y/2+bz.y});if(bq.panTo){bq.panTo(bw)}else{bq.setCenter(bw)
}}break;case U[14]:case U[13]:if(bq.slideScale){bq.slideScale()}if(!bq.slideScale||(new Date().valueOf()-this.downTime<256&&(!bq.getTargetScale||bq.getScale()==bq.getTargetScale()))){var bs;if(this.lastCommand==U[14]){if(bq.zoomIn){bq.zoomIn()}else{bs=bq.getScale()/2}}else{if(bq.zoomOut){bq.zoomOut()}else{bs=bq.getScale()*2}}if(bs){if(bq.panScale){bq.panScale(bs)}else{bq.setScale(bs)}}}break;case"zoombar":var bx=a8(bu,this.zoomBar).y,by=Math.floor(bx/this.zoomHeight),bA=bq.getZoomScales();var bp=bA[bA.length-by-1];
if(bp){if(bq.panScale){bq.panScale(bp.scale)}else{bq.setScale(bp.scale)}}break;case U[12]:break;case U[11]:if(bq.returnToSavedPosition){bq.returnToSavedPosition()}break;default:if(this.lastCommand.substring(0,4)=="cmd_"){var br=this.extraBtns[this.lastCommand.substring(4)];if(br&&br.upHandle){br.upHandle(bq)}}break}},onMouseOver:function(bs){var br=bs.target,bq=this.map,bp=true;while(br&&!br._command&&br!=this.div){br=br.parentNode}if(!br||!br._command){return}switch(br._command){case U[18]:case U[17]:case U[16]:case U[15]:case U[14]:case U[13]:case U[11]:if(this.focusY){if(this.focusBtn){ad(this.focusBtn.firstChild,{top:"0px"})
}this.focusBtn=br;ad(br.firstChild,{top:-this.focusY+"px"})}break}},create:function(){var bN=this.map;if(!bN){return}var bA=this.div,bG=this.listeners,bs,bM=this;var by=bM.imgPath=(bM.imgPath?bM.imgPath:(aL+bM.imgFile));var bE=bM.btnSize,bF=bE.x,bB=bE.y,bK=bM.btnPad,bz=bK.x,bx=bK.y,br=bM.zoomHeight;var bO=bM.cursorPoint,bp=bM.cursorSize,bH=bM.cursorOffset,bI=bM.tipsSize;bg(bA,true);while(bG.length>3){a7(bG.pop())}var bw=0,bu=0;if(!this.hidePanBtn){this.createImg(bA,by,{x:bF,y:0},bE,{x:bF+bz,y:bu},U[18],"\u4e0a\u79fb");
bu+=bB+bx;this.createImg(bA,by,{x:bF*2,y:0},bE,{x:0,y:bu},U[16],"\u5de6\u79fb");this.createImg(bA,by,{x:bF*6,y:0},bE,{x:bF+bz,y:bu},U[11],"\u8fd4\u56de");this.createImg(bA,by,{x:bF*3,y:0},bE,{x:bF*2+bz*2,y:bu},U[15],"\u53f3\u79fb");bu+=bB+bx;this.createImg(bA,by,{x:0,y:0},bE,{x:bF+bz,y:bu},U[17],"\u4e0b\u79fb");bu+=bB+bx;bw=Math.max(bw,bF*3+bz*2)}if(this.extraBtns.length>0){bu+=4;for(var bJ=0;bJ<this.extraBtns.length;bJ++){var bt=this.extraBtns[bJ];bt._img=this.createImg(bA,bt.iconImage,bt.spritePoint,bt.size,{x:bt.position.x,y:bt.position.y+bu},"cmd_"+bJ,bt.title,bt.imageSize);
bu+=bt.size.y+(bt.marginBottom?bt.marginBottom:0)}}if(!this.hideZoomBtn){bw=Math.max(bw,bF);this.createImg(bA,by,{x:bF*4,y:0},bE,{x:(bw-bF)/2,y:bu},U[14],U[10]);bu+=bB+bx}if(!this.hideZoomBar&&bN.getZoomScales&&(bs=bN.getZoomScales())&&bs.length>0){bu-=3;bw=Math.max(bw,bF);this.zoomStart=bu;var bD=this.zoomBar=document.createElement("div"),bC=bs.length*br,bv=bM.bgSize.x;bD._command="zoombar";ad(bD,{position:U[78],cursor:U[66]});at(bD,by,{spritePoint:bM.bgPoint,size:bM.bgSize,imageSize:bM.imageSize,utf:false});
aF(bD,{x:bv,y:bC});aS(bD,{x:(bw-bv)/2,y:bu});bA.appendChild(bD);if(this.maskSize){var bq=this.zoomMask=document.createElement("div"),bL=bM.maskSize.x;ad(bq,{position:U[78],zIndex:"15"});at(bq,by,{spritePoint:bM.maskPoint,size:bM.maskSize,imageSize:bM.imageSize,repeat:"repeat-y"});aF(bq,{x:bL,y:1});aS(bq,{x:(bv-bL-1)/2,y:bC});bD.appendChild(bq)}this.zoomCursor=this.createImg(bA,by,bO,bp,{x:(bw-bp.x)/2+bH.x,y:bu},U[12]);ad(this.zoomCursor,{cursor:U[66],zIndex:20});bu+=bC;this.onScale();this.listeners=bG.concat(Q(bN,U[44],this,this.create),Q(bN,U[41],this,this.onScale),Q(bD,U[30],this,this.onZoomMouseOver))
}if(!this.hideZoomBtn){this.createImg(bA,by,{x:bF*5,y:0},bE,{x:(bw-bF)/2,y:bu},U[13],U[9]);bu+=bB+bx;bw=Math.max(bw,bF)}aF(this.div,{x:bw,y:bu})},initialize:function(bp){if(this.map){return false}this.map=bp;var bq=this.div=document.createElement("div");ax(bq);ad(bq,{position:U[78],zIndex:10000});this.listeners=[Q(bp,U[43],this,this.create),bd(bq,U[28],bc),Q(bq,U[65],this,this.onMouseDown)];Q(bq,U[30],this,this.onMouseOver);Q(bq,U[29],this,this.onMouseOut);this.create();this.setLayout({x:0,y:0});this.setPosition({x:10,y:10});
bp.getContainer().appendChild(bq);return true},remove:function(){bg(this.div);delete this.div;o.prototype.remove.apply(this,arguments)},onDrag:function(bq,bv,by){var bp=this.map;if(by==U[62]){be(bp,U[36])}var br,bw=(bv.y-this.zoomStart)/this.zoomHeight-0.5,bz=bp.getZoomScales();bw=Math.min(bz.length-1,Math.max(0,bw));var bx=Math.floor(bw),bu=Math.ceil(bw);if(bx==bu){br=bz[bz.length-bx-1].scale}else{var bt=bz[bz.length-bx-1].scale,bs=bz[bz.length-bu-1].scale;br=bs*Math.pow(Math.E,(Math.log(bt/bs)*(bu-bw)))}bp.setScale(br);
if(by=="end"){be(bp,U[38]);if(bp.isStepZoom&&bp.isStepZoom()){bp.checkScale()}}},addExtraBtn:function(bp){this.extraBtns.push(bp);this.create()},onScale:function(){if(!this.map.getZoomScales){return}var bs=this.map.getZoomScales();if(!bs||bs.length<=0){return}var bv=this.map,bw=bv.getScale(),bq=bv.getZoomIndex(bw),bu=bs[bq].scale;var bp=this.zoomHeight,bt=this.zoomStart+(bs.length-bq-1)*bp,br;if(bw>bu){br=bs[bq-1];if(br){bt+=Math.round(Math.log(bw/bu)/Math.log(br.scale/bu)*bp)}}else{if(bw<bu){br=bs[bq+1];if(br){bt-=Math.round(Math.log(bw/bu)/Math.log(br.scale/bu)*bp)
}}}ad(this.zoomCursor,{top:bt+this.cursorOffset.y+"px"});if(this.zoomMask){ad(this.zoomMask,{top:(bt-this.zoomStart+bp/2)+"px",height:bp*bs.length-bt+this.zoomStart+"px"})}this.zoomCursor.title=this.zoomCursor.alt=bs[bq].name},onZoomMouseOver:function(bv){var bu=this.tipsDiv,bw=this.zoomBar;if(!bu){var bu=this.tipsDiv=document.createElement("div"),bA=this.tipsSize,bB=this.map.getZoomScales();ad(bu,{position:U[78],width:bA.x+"px"});aS(bu,this.tipsOffset);var bz={13:"\u5e02",4:U[8],16:U[7],8:"\u7701"},bx=(this.zoomHeight-bA.y)/2,bq=bB.length;
for(var by in bz){if(!bz.hasOwnProperty(by)){continue}var bt=-1;for(var bs=bq-1;bs>=0;bs--){if(bB[bs].name==by){bt=bs;break}}if(bt<0){continue}var bp=document.createElement("div");bp._command="zoom";bp._zoom=by;bp.title=bp.alt=bz[by]+"("+by+")";ad(bp,this.tipsStyle);ad(bp,{position:U[78],fontSize:U[50],textAlign:U[26],width:bA.x+"px",height:bA.y+"px",top:bx+(bq-1-bt)*this.zoomHeight+"px",zIndex:20});var br=this.createImg(bp,this.imgPath,{x:this.btnSize.x*7,y:0},bA,{x:0,y:0},"zoom");br._zoom=by;ad(br,{zIndex:-1});
bp.appendChild(document.createTextNode(bz[by]));bu.appendChild(bp)}bw.appendChild(bu)}if(!this.zoomLis){this.zoomLis=Q(document,U[64],this,this.onZoomMouseMove)}bu.style.display=""}});function aD(bq,br,bs,bp){aE(this,{showHandle:bq,runHandle:br,text:bs,mType:"menu"});aE(this,bp)}T(aD.prototype,{getLabel:function(bp){return this.text},getIcon:function(){return this.icon?aY(this.icon,this.iconConfig):null}});function D(){this.items=[];this.imgPath=aL+"cmc.png"}D.prototype=new o();T(D.prototype,{getEventItem:function(bv){var bu,bs,br=this.items,bq=a8(bv,this.div).y,bp=0;
if(bq<=0){return null}bq-=3;for(var bt=0;bt<br.length;bt++){bs=br[bt];if(bs.mType=="line"){if(bp>0){bq-=4;bp=0}continue}if(bs.isShow==1||bs.isShow==2){var bw=bs.div.offsetHeight+1;if(bq<bw){bu=bs;break}bq-=bw;bp++}}return bu},addLine:function(bp){var bq={mType:"line"};this.addItem(bq,null,bp);return bq},getPosition:function(){return this.position},addItem:function(br,bq,bp){if(typeof(bp)!=U[48]){bp=-1}if(typeof(br)==U[74]){br=this.getItemById(br)}if(!br){return}aE(br,bq);if(bp<0){this.items.push(br)}else{this.items.splice(bp,0,br)
}return br},removeItem:function(bp){if(typeof(bp)==U[74]){bp=this.getItemById(bp)}az(this.items,bp)},hideMenu:function(){delete this.currentItem;bg(this.div,true);if(this.container&&this.container.parentNode){this.container.parentNode.removeChild(this.container)}},getLatLng:function(){return this.latlng},onClick:function(bq){bh(bq);var bp=this.getEventItem(bq);if(!bp||bp.isShow!=1){return}bp.runHandle(this);this.hideMenu()},getMap:function(){return this.map},initialize:function(bp){if(this.map){return false}this.map=bp;
bp.addContextMenuItem=a6(this,this.addItem);bp.addContextMenuLine=a6(this,this.addLine);bp.removeContextMenuItem=a6(this,this.removeItem);this.listeners=[Q(bp,U[47],this,this.onMapClick)];return true},remove:function(){this.hideMenu();var bp=this.map;delete bp.addContextMenuItem;o.prototype.remove.apply(this,arguments)},getItemById:function(bp){switch(bp){case U[26]:return new aD(function(br){var bq=br.getMap();return bq.getCenter()?1:0},function(bs){var br=bs.getMap(),bq=bs.getLatLng();if(br.panTo){br.panTo(bq)
}else{br.setCenter(bq)}},"\u5728\u6b64\u5c45\u4e2d\u653e\u7f6e\u5730\u56fe");break;case U[14]:return new aD(function(bs){var br=bs.getMap(),bq=br.getZoomIndex(br.getScale()),bt=br.getZoomScales();return bq+1<bt.length?1:2},function(bs){var br=bs.getMap(),bq=br.getZoomIndex(br.getScale()),bt=br.getZoomScales();if(bq+1<bt.length){br.panScale(bt[bq+1].scale,bs.getPosition())}},U[10]);break;case U[13]:return new aD(function(bs){var br=bs.getMap(),bq=br.getZoomIndex(br.getScale()),bt=br.getZoomScales();return bq-1>=0?1:2
},function(bt){var bs=bt.getMap(),bq=bt.getPosition(),br=bs.getZoomIndex(bs.getScale()),bu=bs.getZoomScales();if(br-1>=0){bs.panScale(bu[br-1].scale,bq)}},U[9]);break;case"zoomto":return new aD(function(bq){return 1},function(bt){var bs=bt.getMap(),bq=bt.getPosition(),br=bs.getZoomIndex(bs.getScale()),bu=bs.getZoomScales();if(window._cztn){bs.setCenter(bt.getLatLng());bs.panScale(bu[bs.getZoomIndex(360/256/Math.pow(2,window._cztn.getAttribute("_zoom")))].scale,bq)}},"",{getLabel:function(bv){var bq=["\u7f29\u653e\u5230"],bw=bv.getMap().getScale(),bt=Math.round(Math.log(360/256/bw)/Math.log(2));
var bu={4:U[8],8:"\u7701",13:"\u5e02",16:U[7]},bx=[];for(var bs in bu){if(bu.hasOwnProperty(bs)){bx.push([bs,bu[bs]])}}bx.sort(function(bz,by){return bz[0]-by[0]});for(var br=0;br<bx.length;br++){bq.push(" ");if(bt==bx[br][0]){bq.push('<a style="color:#4b4b4b">'+bx[br][1]+"</a>")}else{bq.push('<a style="color:#0088cc" _zoom="'+bx[br][0]+"\" onmouseover=\"if(window._cztn){window._cztn.style.color='#0088cc'};this.style.color='#0064c8';window._cztn=this;\" onmouseout=\"if(window._cztn){window._cztn.style.color='#0088cc'};\">"+bx[br][1]+"</a>")
}}return bq.join("")}});break}},onMouseMove:function(bq){var bp=this.getEventItem(bq);if(!bp||this.currentItem==bp){return}if(this.currentItem){at(this.currentItem.div)}this.currentItem=bp;at(this.currentItem.div,this.imgPath,{utf:false,spritePoint:{x:0,y:18}})},onMapClick:function(bM,bp,bI){this.hideMenu();if(bp!=2){return}var bL=this.map,br=bL.getViewSize(),bB=this.div,bv={x:320,y:50};aE(this,{position:bM,latlng:bL.fromContainerPixelToLatLng(bM),overlay:bI});if(!bB){var bz=this.container=document.createElement("div"),bE=this.listeners;
ax(bz);ad(bz,{position:U[78],zIndex:20000,cursor:U[76],width:"174px"});bE.push(Q(bz,U[64],this,this.onMouseMove));bE.push(Q(bz,U[65],this,this.onClick));bE.push(Q(bL,U[65],this,this.hideMenu));bB=this.div=document.createElement("div");ad(bB,{position:U[69],fontSize:U[50],padding:"0px 1px",border:" solid 1px #D0D0D0",backgroundColor:U[23],color:U[55]});bz.appendChild(bB);var bN=aY(this.imgPath,{spritePoint:{x:0,y:6},spriteSize:{x:4,y:5},position:{x:0,y:0},imageSize:bv});ad(bN,{position:U[78],top:U[77]});bz.appendChild(bN);
var bN=aY(this.imgPath,{spritePoint:{x:4,y:2},spriteSize:{x:4,y:4},position:{x:0,y:0},imageSize:bv});ad(bN,{position:U[78],left:U[77]});bz.appendChild(bN);var bN=aY(this.imgPath,{spritePoint:{x:4,y:6},spriteSize:{x:4,y:5},position:{x:0,y:0},imageSize:bv});ad(bN,{position:U[78],left:U[77],top:U[77]});bz.appendChild(bN);var bH=aY(this.imgPath,{spritePoint:{x:0,y:45},spriteSize:{x:320,y:5},imageSize:bv});ad(bH,{position:U[78],left:"4px",top:U[77]});ad(bH.firstChild,{width:U[77]});bz.appendChild(bH);var bx=aY(this.imgPath,{spritePoint:{x:316,y:0},spriteSize:{x:4,y:18},imageSize:bv});
ad(bx,{position:U[78],top:"4px",left:U[77]});ad(bx.firstChild,{height:"300%"});bz.appendChild(bx)}var bF=0,by=0,bD=0;for(var bG=0;bG<this.items.length;bG++){var bK=this.items[bG];bg(bK.div);delete bK.div;if(bK.mType=="line"){if(by>0){var bu=bK.div=aY(this.imgPath,{spritePoint:{x:0,y:0},spriteSize:{x:299,y:2},imageSize:bv});ad(bu,{position:U[69],width:U[77],fontSize:"0px",margin:"3px 0px",padding:"0px",border:"0px"});ad(bu.firstChild,{width:"107%"});bu.vAlign="top";bB.appendChild(bu);by=0}continue}bK.isShow=bK.showHandle(this);
if(bK.isShow==1||bK.isShow==2){var bu=bK.div=document.createElement("div");ad(bu,{position:U[69],width:"160px",backgroundPosition:"0px -18px",whiteSpace:U[49],margin:"0px",padding:"8px 0px 3px 10px"});ad(bu,bK.isShow==1?{cursor:U[66],color:"#4b4b4b"}:{color:"#CCCCCC"});var bA=bK.getLabel(this),bJ=bK.getIcon();if(bJ){ad(bJ,{position:U[69],styleFloat:U[22],cssFloat:U[22],width:"16px",height:"16px",marginRight:"8px"});bu.appendChild(bJ)}if(bA){var bt=document.createElement("div");ad(bt,{height:"16px",lineHeight:"16px"});
bt.innerHTML=bA;bu.appendChild(bt)}bB.appendChild(bu);bF++;by++}}if(bF==0){this.hideMenu();return}bL.getContainer().appendChild(this.container);var bq=10,bw={x:bM.x,y:bM.y},bC=ac(bB);if(bM.x+bC.x+bq>br.x){bw.x=bM.x-bC.x}if(bM.y+bC.y+bq>br.y){bw.y=bM.y-bC.y}aS(this.container,bw);var bs=this.container.lastChild;ad(bs,{height:bC.y-4+"px"});bs=bs.previousSibling;ad(bs,{width:bC.x-4+"px",top:bC.y+"px"});bs=bs.previousSibling;ad(bs,{top:bC.y+"px"});bs=bs.previousSibling.previousSibling;ad(bs,{top:bC.y+"px"})},getOverlay:function(){return this.overlay
}});function bf(){}T(bf.prototype,{change:function(){this.infowin.winSize={x:128,y:128};this.infowin.anchor={x:0,y:0}},depose:function(){var bp=this.infowin,br;if(!bp){return}var bq={overflowX:"",overflow:"",width:U[19],fontSize:U[19],fontWeight:U[19],lineHeight:U[19],color:U[19],textAlign:U[19],position:U[19],left:U[19],top:U[19],height:U[19],zIndex:U[19],marginRight:U[19]};br=bp.titleDiv;ad(br,bq);if(br.parentNode){br.parentNode.removeChild(br)}br=bp.contentDiv;ad(br,bq);if(br.parentNode){br.parentNode.removeChild(br)
}bg(bp.div,true);delete this.infowin},initialize:function(bp){var bq=bp.div;this.infowin=bp;bq.appendChild(bp.titleDiv);bq.appendChild(bp.contentDiv)}});function bi(bp){this.config=bp=bp?bp:{cSize2:{x:6,y:10},bgcolor:U[23],fixTitleHeight:true,cursorAnchor:{x:3,y:29},anchorPercent:0,imgFile:"iw.png",closePadding:8,cursorSize:{x:32,y:32},cPoint1:{x:10,y:5},cPoint2:{x:10,y:8},bOffset:[0,0],splitHeight:10,titleHeight:14,closeSize:{x:7,y:7},bHeight:[25,10],contentSize:{x:120,y:20},cSize1:{x:6,y:25}};this.imgPath=bp.imgPath?bp.imgPath:(aL+bp.imgFile)
}bi.prototype=new bf();T(bi.prototype,{change:function(){var bN=this.config,bI=bN.cSize1,bF=bN.cSize2,bu=bN.cPoint1,bs=bN.cPoint2,bt=bN.closeSize,bq=bN.cursorSize;var bx=bN.cursorAnchor,bw=bN.bHeight,bL=bN.bOffset,bE=this.divs,bM=this.infowin;if(!bM||!bE){return}var bC=bM.getContentSize(),bD=bM.getTitleSize(),bz=bN.titleHeight,bJ=bN.splitHeight||0;var bB=bt?((bN.closePadding||0)+bt.x):0;if(bD){bC.x=Math.max(bC.x,bD.x+bB);if(!bN.fixTitleHeight){bz=Math.max(bD.y,bz)}}var by={x:bC.x+bu.x+bs.x,y:bC.y+bz+bJ+bq.y+bu.y+bs.y},br=Math.max(parseInt((by.x-bq.x)*bN.anchorPercent)+(bN.anchorOffset||0),bI.x);
if(bM.winSize&&bM.winSize.x==by.x&&bM.winSize.y==by.y){return}bM.winSize=by;ad(bE.top,{width:by.x-bI.x-bF.x+"px"});var bA=by.y-bq.y+bw[1]-bI.y-bF.y,bK=Math.ceil((this.imageSize.y+2)*(bA+2)/(bI.y+bF.y+bq.y))+"px";ad(bE.left,{height:bA+"px"});ad(bE.right,{height:bA+"px",left:by.x-bF.x+"px"});ad(bE.left.firstChild,{height:bK});ad(bE.right.firstChild,{height:bK});if(bE.bg.firstChild){var bv=by.x-bI.x-bF.x,bp=Math.ceil((this.imageSize.x+1)*(bv+1)/bN.bgXSize);ad(bE.bg.firstChild,{left:-bp*(bq.x+bI.x)/this.imageSize.x+"px",width:bp+"px",height:bK})
}ad(bE.bottom1,{width:br-bI.x+"px",top:by.y-bq.y+bL[1]+"px"});ad(bE.bottom2,{left:br+bq.x+"px",width:by.x-bF.x-br-bq.x+"px",top:by.y-bq.y+bL[1]+"px"});if(bE.close){ad(bE.close,{left:by.x-bt.x-bs.x+"px"});if(bN.cfPoint){ad(bE.close.firstChild,{left:-(bI.x+bF.x)+"px",top:"0px"})}}ad(bE.container,{top:bz+bJ+bu.y+"px",width:by.x-bu.x-bs.x+"px",height:by.y-bu.y-bs.y-bz-bJ-bq.y+"px"});ad(bE.titleContainer,{width:by.x-bu.x-bs.x-bB+"px",height:bz+"px"});ad(bE.bl,{top:by.y-bq.y+bw[1]-bF.y+"px"});ad(bE.ur,{left:by.x-bF.x+"px"});
ad(bE.br,{top:by.y-bq.y+bw[1]-bF.y+"px",left:by.x-bF.x+"px"});ad(bE.pointer,{top:by.y-bq.y+bL[1]+"px",left:br+"px"});ad(bE.bg,{height:by.y-bq.y-bw[0]+bL[1]+"px",width:by.x-bI.x-bF.x+"px"});bM.anchor={x:br+bx.x,y:by.y-bq.y+bx.y};if(bN.shadowFile){var bH=by.y*0.5;var bG=by.y-bq.y-bH+bN.shadowOffset.y;ad(bE.sl,{left:bN.shadowOffset.x+"px",top:bG+"px",height:bH+"px"});ad(bE.sp1,{left:bN.shadowOffset.x+bN.shadowWidth[0]+"px",width:br-bI.x+"px",top:bG+"px",height:bH+"px"});ad(bE.sc,{left:bN.shadowOffset.x+bN.shadowWidth[0]+br-bI.x+"px",top:bG+"px",height:bH+"px"});
ad(bE.sp2,{left:bN.shadowOffset.x+bN.shadowWidth[0]+br-bI.x+bN.shadowWidth[1]+"px",width:by.x-bF.x-br-bq.x+"px",top:bG+"px",height:bH+"px"});ad(bE.sr,{left:bN.shadowOffset.x+bN.shadowWidth[0]+br-bI.x+bN.shadowWidth[1]+by.x-bF.x-br-bq.x+"px",top:bG+"px",height:bH+"px"})}},depose:function(){delete this.divs;bf.prototype.depose.apply(this,arguments)},checkEvent:function(bt){var br=this.infowin,bq=a8(bt,br.div),bs=br.winSize;var bp=this.config.clickArea||[0,0,0,0];if(bq.x<bp[0]||bq.y<bp[1]||bq.x>bs.x-bp[2]||bq.y>bs.y-bp[3]){return false
}return true},initialize:function(bJ){this.infowin=bJ;var bK=this.config,bH=bK.cSize1,bF=bK.cSize2,bu=bK.cPoint1,bs=bK.cPoint2,bp=bK.cursorSize,bv=bK.bHeight,bt=bK.closeSize;var by=bK.bgXSize||0,bq=bK.bgYSize||0;var br=Math.max(bp.x,bH.x+bF.x+(bt?bt.x:0)),bx=this.imageSize={x:br+bH.x+bF.x+by,y:bH.y+bF.y+bp.y+bv[0]+bv[1]+bq};var bL,bI,bD=bJ.div,bE=this.divs={},bH,bB=this.imgPath;bJ.setContentSize(bK.contentSize);ax(bD);bL=bE.ul=aY(bB,{spritePoint:{x:0,y:0},position:{x:0,y:0},size:bH,imageSize:bx});ad(bL,{position:U[78],zIndex:50});
bD.appendChild(bL);bL=bE.ur=aY(bB,{spritePoint:{x:bH.x,y:0},size:{x:bF.x,y:bH.y},imageSize:bx});ad(bL,{position:U[78],top:"0px",zIndex:50});bD.appendChild(bL);bL=bE.bl=aY(bB,{spritePoint:{x:0,y:bH.y},size:{x:bH.x,y:bF.y},imageSize:bx});ad(bL,{position:U[78],left:"0px",zIndex:50});bD.appendChild(bL);bL=bE.br=aY(bB,{spritePoint:bH,size:bF,imageSize:bx});ad(bL,{position:U[78],zIndex:50});bD.appendChild(bL);bI=bE.top=document.createElement("div");at(bI,bB,{spritePoint:{x:0,y:bH.y+bF.y+bp.y},imageSize:bx,repeat:U[70]});
ad(bI,{position:U[78],fontSize:"0px",left:bH.x+"px",top:"0px",height:bv[0]+"px",zIndex:50});bD.appendChild(bI);bI=bE.left=aY(bB,{spritePoint:{x:br,y:0},spriteSize:{x:bH.x,y:bH.y+bF.y+bp.y},position:{x:0,y:bH.y},imageSize:bx});ad(bI,{position:U[78],zIndex:50});bD.appendChild(bI);bI=bE.bottom1=document.createElement("div");at(bI,bB,{spritePoint:{x:0,y:bH.y+bF.y+bp.y+bv[0]},imageSize:bx,repeat:U[70]});ad(bI,{position:U[78],fontSize:"0px",overflow:U[80],left:bH.x+"px",height:bv[1]+"px",zIndex:50});bD.appendChild(bI);
bI=bE.bottom2=document.createElement("div");at(bI,bB,{spritePoint:{x:0,y:bH.y+bF.y+bp.y+bv[0]},imageSize:bx,repeat:U[70]});ad(bI,{position:U[78],fontSize:"0px",overflow:U[80],left:bH.x+"px",height:bv[1]+"px",zIndex:50});bD.appendChild(bI);bI=bE.right=aY(bB,{spritePoint:{x:br+bH.x+by,y:0},spriteSize:{x:bF.x,y:bH.y+bF.y+bp.y},position:{x:0,y:bH.y},imageSize:bx});ad(bI,{position:U[78],zIndex:50});bD.appendChild(bI);bL=bE.pointer=aY(bB,{spritePoint:{x:0,y:bH.y+bF.y},size:bp,imageSize:bx});ad(bL,{position:U[78],zIndex:50});
bD.appendChild(bL);if(by){bI=aY(bB,{spritePoint:{x:br+bH.x,y:0},spriteSize:{x:by,y:bH.y+bF.y+bp.y},position:{x:bH.x,y:bv[0]},imageSize:bx})}else{bI=document.createElement("div");ad(bI,{fontSize:"0px",overflow:U[80],left:bH.x+"px",top:bv[0]+"px"})}ad(bI,{position:U[78],zIndex:50,cursor:U[76]});if(bK.bgOpacity){aT(bI,bK.bgOpacity)}if(bK.bgcolor){ad(bI,{backgroundColor:bK.bgcolor})}bD.appendChild(bE.bg=bI);if(bK.shadowFile){var bz=bK.shadowPath?bK.shadowPath:(aL+bK.shadowFile),bC=bK.shadowWidth,bG=bK.shadowHeight;
var bw={x:bC[0]+bC[1]+bC[2],y:bG*2};bL=bE.sl=aY(bz,{spritePoint:{x:0,y:bG},size:{x:bC[0],y:bG},imageSize:bw});ad(bL,{position:U[78],zIndex:20});ad(bL.firstChild,{top:"-100%",height:"200%"});bD.appendChild(bL);bL=bE.sp1=aY(bz,{spritePoint:{x:0,y:0},spriteSize:{x:bC[0]+bC[1]+bC[2],y:bG},imageSize:bw});ad(bL,{position:U[78],zIndex:20});ad(bL.firstChild,{top:"0px",height:"200%",width:U[77]});bD.appendChild(bL);bL=bE.sc=aY(bz,{spritePoint:{x:bC[0],y:bG},size:{x:bC[1],y:bG},imageSize:bw});ad(bL,{position:U[78],height:bG+"px",zIndex:20});
ad(bL.firstChild,{top:"-100%",height:"200%"});bD.appendChild(bL);bL=bE.sp2=aY(bz,{spritePoint:{x:0,y:0},spriteSize:{x:bC[0]+bC[1]+bC[2],y:bG},imageSize:bw});ad(bL,{position:U[78],zIndex:20});ad(bL.firstChild,{top:"0px",height:"200%",width:U[77]});bD.appendChild(bL);bL=bE.sr=aY(bz,{spritePoint:{x:bC[0]+bC[1],y:bG},size:{x:bC[2],y:bG},imageSize:bw});ad(bL,{position:U[78],zIndex:20});ad(bL.firstChild,{top:"-100%",height:"200%"});bD.appendChild(bL)}var bA=bE.titleContainer=document.createElement("div");bd(bA,U[65],bh);
if(document.all){bd(bA,U[64],bh)}bd(bA,U[6],bh);bd(bA,U[25],bh);ad(bA,{position:U[78],overflow:U[80],left:bu.x+"px",top:bu.y+"px",overflow:U[80],zIndex:100,cursor:U[76]});bD.appendChild(bA);if(bK.fixTitleHeight){ad(bA,{height:bK.titleHeight+"px"})}ad(bJ.titleDiv,{fontSize:"13px",fontWeight:"bolder",lineHeight:1.2,color:U[55],textAlign:U[22],position:U[78]});if(bK.titleStyle){ad(bJ.titleDiv,bK.titleStyle)}bA.appendChild(bJ.titleDiv);var bA=bE.container=document.createElement("div");ad(bA,{position:U[78],left:bu.x+"px",overflow:U[80],zIndex:100,cursor:U[76]});
bD.appendChild(bA);ad(bJ.contentDiv,{fontSize:U[50],color:"#666666",position:U[78],textAlign:U[22],left:"0px",top:"0px"});if(bK.contentStyle){ad(bJ.contentDiv,bK.contentStyle)}bA.appendChild(bJ.contentDiv);if(bt){bL=bE.close=aY(bB,{spritePoint:{x:bH.x+bF.x,y:0},size:bt,imageSize:bx});ad(bL,{position:U[78],top:bu.y+"px",cursor:U[66],zIndex:100});bD.appendChild(bL);bL._iwe="close";if(bK.cfPoint){Q(bL,U[30],this,function(){ad(this.divs.close.firstChild,{left:-bK.cfPoint.x+"px",top:-bK.cfPoint.y+"px"})});Q(bL,U[29],this,function(){ad(this.divs.close.firstChild,{left:-(this.config.cSize1.x+this.config.cSize2.x)+"px",top:"0px"})
});Q(bL,U[63],this,function(){ad(this.divs.close.firstChild,{left:-(this.config.cSize1.x+this.config.cSize2.x)+"px",top:"0px"})})}}}});function n(){}T(n.prototype,{depose:function(){if(this.map){this.map.removeOverlay(this)}this.remove()},getContainer:function(){return this.div},getRectangle:function(){},initialize:function(bp){return true},remove:function(){var bq=this.listeners;if(bq){for(var bp=bq.length-1;bp>=0;bp--){a7(bq[bp])}}delete this.listeners;delete this.map}});function ak(br,bq,bp){if(arguments.length==0){return
}bp=bp?bp:{};aE(this,{latlng:br,offset:{x:0,y:0},anchor:{x:0,y:0}});aE(this,bp);this.zIndex=bp.zIndex?bp.zIndex:500;this.setContainer(bq);if(bp.style){ad(this.div,bp.style)}if(bp.title){this.setTitle(bp.title)}if(bp.dragSlideMap){this.dragSlideMap=true}if(bp.draggable){this.setDraggingEnabled(true)}}ak.prototype=new n();T(ak.prototype,{reDraw:function(br){if(br<2||!this.map){return}var bp=this.map.getGeoPosition(this.coord),bs=this.offset,bq=this.anchor;aS(this.div,{x:bp.x+bs.x-bq.x,y:bp.y+bs.y-bq.y})},remove:function(){if(this.dragObj){this.dragObj.onMouseUp()
}this.endDrawing();if(this.closeInfoWindow){this.closeInfoWindow()}n.prototype.remove.apply(this,arguments)},setOffset:function(bp){this.offset=bp;if(this.map){this.map.onOverlayChange(this)}},initPixel:function(bp){bp=bp?bp:(this.map?this.map.getProjection():null);if(!this.latlng||!bp){return}this.coord=bp.fromLatLngToPixel(this.latlng)},startDrawing:function(bp){bp=bp?bp:{};var bq=this.map;if(!bq||this.drawObj){return false}if(bq.startMarking){bq.startMarking()}if(bq.setCursorText){var br=bp?bp.cursorText:"";
if(!br){br="\u5de6\u952e\u5355\u51fb\u6807\u70b9"}bq.setCursorText(br,{offset:{x:10,y:10},style:(this.cursorStyle||{whiteSpace:U[49]})})}this.drawObj={cursor:this.div.style.cursor,cl:Q(bq,U[47],this,function(bs,bt){if(bt==1){this.endDrawing()}}),ml:Q(bq,U[64],this,this.onMouseMove),mml:Q(bq,U[39],this,this.onMapMove)};if(!bp.disbleSlide&&bq.startAutoSlide){this.drawObj.useSlide=true;bq.startAutoSlide({speedup:true})}ad(this.div,{cursor:""});be(this,U[5]);return true},setOpacity:function(bp){aT(this.div,this.opacity=bp)
},blur:function(){if(ak._focus!=this){return}delete ak._focus;if(this.div){ad(this.div,{zIndex:this.zIndex})}be(this,"blur")},onMapMove:function(){var bp=this.drawObj.position;if(!bp){return}this.onMouseMove(bp)},focus:function(){var bp=ak._focus;if(bp!=this){if(bp){bp.blur()}ak._focus=this;if(this.div){ad(this.div,{zIndex:this.zIndex+1})}be(this,"focus")}},getLatLng:function(){return this.latlng},onMouseMove:function(bp){this.drawObj.position=bp;this.setLatLng(this.map.fromContainerPixelToLatLng(bp))},onDrag:function(bs,bp,br){var bt=this.map,bu={x:bp.x-bs.x,y:bp.y-bs.y};
if(br==U[62]){this.dsl=this.latlng;be(this,U[35],[this.latlng]);if(this.dragSlideMap){bt.startAutoSlide({speed:0.1});this.dsmObj={center:bt.fromLatLngToPixel(bt.getCenter()),sp:bs,offset:{x:0,y:0},lis:Q(bt,U[39],this,this.onDragMapSlide)}}this.dragging=true}var bq=this.dsmObj;if(bq){bq.lp=bp;bu.x+=bq.offset.x/bt.getScale();bu.y+=bq.offset.y/bt.getScale()}var bv=bt.fromContainerPixelToLatLng(bu,this.dsl,null,{x:0,y:0});this.setLatLng(bv);if(br!=U[62]&&br!="end"){be(this,"drag",[this.latlng])}if(br=="end"){this.dragging=false;
delete this.dragObj;if(bq){this.map.endAutoSlide();a7(bq.lis);delete this.dsmObj}be(this,U[34],[this.latlng])}},getTitle:function(){return this.div.title},getDraggingEnabled:function(){return this.dragEnabled},setTitle:function(bp){this.div.title=this.div.alt=bp},isDragging:function(){return this.dragging},getOpacity:function(){return this.opacity},setDraggingEnabled:function(bp){this.dragEnabled=!!bp},onMouseEvent:function(bp,br,bq){if(this.drawObj){return}if(!this.dragging&&bp!=U[64]){bc(bq)}if(bp==U[65]&&this.dragEnabled&&!this.dragging){if(this.dragObj){this.dragObj.onMouseUp()
}this.dragObj=new F(this.div,a6(this,this.onDrag),{container:this.map.getContainer(),rtp:this.dragSlideMap?null:(this.dragRtp?this.dragRtp:{x:1,y:1}),interval:this.dragSlideMap?16:(this.dragInterval?this.dragInterval:256)});this.dragObj.onMouseDown(bq)}if(bp==U[64]){this.focus()}},onDragMapSlide:function(){var bp=this.dsmObj,br=this.map;if(!bp){return}var bq=br.fromLatLngToPixel(br.getCenter());bp.offset={x:bq.x-bp.center.x,y:bq.y-bp.center.y};this.onDrag(bp.sp,bp.lp)},setLatLng:function(bp){this.latlng=bp;if(this.map){this.map.onOverlayChange(this)
}},setContainer:function(bt){if(typeof(bt)!=U[67]){var br=bt;bt=document.createElement("div");bt.innerHTML=br}ad(bt,{position:U[78],zIndex:this.zIndex},true);var bp=this.div;if(bp&&bp!=bt){if(bp.replaceNode){bp.replaceNode(bt)}else{var bq=bp.parentNode;if(bq){bq.removeChild(bp);bq.appendChild(bt)}}}this.div=bt;if(bp){bt._overlay=bp._overlay;try{delete bp._overlay}catch(bs){}}if(this.map){this.reDraw(4)}},endDrawing:function(){var bp=this.drawObj,bq=this.map;if(!bp){return}delete this.drawObj;ad(this.div,{cursor:bp.cursor});
a7(bp.cl);a7(bp.ml);a7(bp.mml);if(bp.useSlide){bq.endAutoSlide()}if(bq.endMarking){bq.endMarking()}if(bq.setCursorText){bq.setCursorText("")}bp=null;be(this,U[4])},getRectangle:function(){if(!this.coord){return null}return new a(this.coord,this.coord)},getOffset:function(){return this.offset},getSize:function(){return this.size?this.size:{x:this.div.offsetWidth,y:this.div.offsetHeight}},initialize:function(bp){this.map=bp;return true}});function O(br,bp,bq){aE(this,{image:br,iconSize:bp,iconAnchor:bq});this.infoWindowAnchor={x:bp.x/2,y:0}
}T(O.prototype,{getCopy:function(){var bp=new O(this.image,this.iconSize,this.iconAnchor);bp.infoWindowAnchor=this.infoWindowAnchor;return bp}});function s(){if(!O._default){O._default=new O(aL+"icon/label_unselected.png",{x:49,y:59},{x:24,y:56});O._default.infoWindowAnchor={x:41,y:9}}return O._default}T(O,{getDefault:s});function p(bs,br){br=br?br:{};var bq=br.icon;bq=bq?bq:s();var bp=aY(bq.image);if(!br.zIndex){br.zIndex=500}ak.apply(this,[bs,bp,br]);this.setIcon(bq)}p.prototype=new ak();T(p.prototype,{setIcon:function(br){this.icon=br;
var bp=this.div,bq=br.iconSize;if(this.show){ab(bp,br.image)}this.anchor=br.iconAnchor;this.infoWindowAnchor=br.infoWindowAnchor;if(this.map){ad(bp,{width:bq.x+"px",height:bq.y+"px"});this.reDraw(4)}},getIcon:function(){return this.icon},getSize:function(){return this.icon.iconSize},reDraw:function(br){if(!this.show){var bs=this.div,bq=this.icon,bp=bq.iconSize;ab(bs,bq.image);ad(bs,{cursor:U[66],width:bp.x+"px",height:bp.y+"px"});this.show=true}ak.prototype.reDraw.apply(this,arguments)}});function aC(bt){this.offset={x:0,y:0};
this.autoResize=true;this.fixContents=[];var bs=this.div=document.createElement("div");var br=this.titleDiv=document.createElement("div");var bq=this.contentDiv=document.createElement("div");ad(br,{position:U[78],fontSize:U[50],MozUserSelect:"text",WebkitUserSelect:"text",cursor:U[76]});ad(bq,{position:U[78],fontSize:U[50],MozUserSelect:"text",WebkitUserSelect:"text",cursor:U[76]});bd(br,U[65],bh);bd(br,U[6],bh);bd(br,U[25],bh);bd(bq,U[65],bh);bd(bq,U[6],bh);bd(bq,U[25],bh);if(document.all){bd(br,U[64],bh);bd(bq,U[64],bh)
}Q(this,"add",this,this.changeInfoWin);var bp=bi;this.setRender(new bp());ak.apply(this,[bt,bs,{zIndex:560}])}aC.prototype=new ak();T(aC.prototype,{reDraw:function(br){if(br<2||!this.map||!this.coord){return}if(!this.inited){this.render.initialize(this);this.inited=true}this.changeInfoWin();var bp=this.map.getGeoPosition(this.coord),bq=this.anchor,bs=this.offset;aS(this.div,{x:bp.x-bq.x+bs.x,y:bp.y-bq.y+bs.y})},setOffset:function(bp){this.offset=bp;this.reDraw(4)},startDrawing:function(){},setContentSize:function(bp){this.size=bp;
if(this.inited){this.reDraw(4)}},getTitleSize:function(){var br=this.size,bt=this.titleDiv;if(this.map){var bs=bt.offsetWidth,bp=bt.offsetHeight;var bq=bt.parentNode;this.map.getContainer().appendChild(bt);bs=bt.offsetWidth;bp=bt.offsetHeight;bt.parentNode.removeChild(bt);if(bq){bq.appendChild(bt)}return{x:bs,y:bp}}},setRender:function(bp){if(this.render){this.render.depose();delete this.winSize}this.render=bp;this.inited=false;this.reDraw(4)},addFixContent:function(bp){this.contentDiv.appendChild(bp);this.fixContents.push(bp);
ad(bp,{clear:"both"});this.reDraw(4)},close:function(){if(!this.map){return}if(this.map){this.map.removeOverlay(this)}if(this.bindOverlay){this.bindOverlay._infowindow=false;delete this.bindOverlay}be(this,"close")},getDraggingEnabled:function(){},changeInfoWin:function(){if(!this.map||!this.render){return}if(this.inited){this.render.change()}},setTitle:function(bp){var bq=this.titleDiv;while(bq.firstChild){bq.removeChild(bq.firstChild)}if(typeof(bp)==U[67]){bq.appendChild(bp)}else{bq.innerHTML=bp?bp:""}},openInfoWindow:function(){},setContent:function(bp,bs){var br=this.contentDiv;
while(br.firstChild){br.removeChild(br.firstChild)}if(typeof(bp)==U[67]){br.appendChild(bp)}else{br.innerHTML="<div>"+(bp?bp:"")+"</div>"}if(!bs){for(var bq=0;bq<this.fixContents.length;bq++){br.appendChild(this.fixContents[bq]);be(this.fixContents[bq],"show",[])}}this.reDraw(4)},getContentSize:function(){var br=this.size,bt=this.contentDiv;if(this.autoResize&&this.map){var bs=bt.offsetWidth,bp=bt.offsetHeight;if(bs<br.x||bp==0){var bq=bt.parentNode;this.map.getContainer().appendChild(bt);bs=bt.offsetWidth;bp=bt.offsetHeight;
bt.parentNode.removeChild(bt);if(bq){bq.appendChild(bt)}}br={x:Math.max(bs,br.x),y:Math.max(bp,br.y)}}return br},onMouseEvent:function(bp,bt,bs){var bq=this.render;if(bq.checkEvent&&!bq.checkEvent(bs)){return true}if(!(this.map&&this.map.isDragging&&this.map.isDragging())){bc(bs)}if(bp==U[47]){var br=bs.target;while(br&&!br._iwe&&br!=this.div){br=br.parentNode}if(br&&br._iwe=="close"){this.close();return true}}},setDraggingEnabled:function(){},closeInfoWindow:function(){},endDrawing:function(){},moveIntoView:function(bB){bB=bB?bB:(this._viewPadding||5);
var br=this.map;if(!br||!this.winSize){return}var bx=br.getViewSize(),by=this.winSize,bq=br.getTargetCenter?br.getTargetCenter():br.getCenter();var bw=br.fromLatLngToContainerPixel(this.latlng,bq),bv=this.anchor,bu=this.offset;var bt=bw.x-bv.x+bu.x-bB;var bA=bw.y-bv.y+bu.y-bB;var bC=bx.x-bw.x-(by.x-bv.x)-bu.x-bB;var bp=bx.y-bw.y-(by.y-bv.y)-bu.y-bB;var bs={x:0,y:0};if(bt*bC<0){bs.x+=Math.min(bt,bC);if(bC<0){bs.x=-bs.x}}if(bA*bp<0){bs.y+=Math.min(bA,bp);if(bp<0){bs.y=-bs.y}}if(bs.x!=0||bs.y!=0){var bz=br.fromContainerPixelToLatLng({x:bx.x/2+bs.x,y:bx.y/2+bs.y},bq);
if(br.panTo){br.panTo(bz)}else{br.setCenter(bz)}}}});function aN(bs,br){if(arguments.length==0){return}if(typeof(br)!=U[67]){br={color:br}}this.zIndex=br.zIndex?br.zIndex:420;var bq=this.graphics=q(U[59]),bp=bq.getPanel();ad(bp,{zIndex:this.zIndex});if(br.title){bp.title=bp.alt=br.title}if(br.cursor){ad(bp,{cursor:br.cursor})}this.setPoints(bs);aE(this,br);if(arguments[2]){br.bgcolor=arguments[2]}if(arguments[3]){br.weight=arguments[3]}if(arguments[4]){br.opacity=arguments[4]}this.setLineColor((br.color||br.color=="")?br.color:"#0000FF");
this.setFillColor((br.bgcolor||br.bgcolor=="")?br.bgcolor:"#99FFCC");this.setLineWeight((br.weight||br.weight===0)?br.weight:3);this.setOpacity((br.opacity||br.opacity===0)?br.opacity:0.5);this.setLineStyle(br.lineStyle?br.lineStyle:"solid");this.minScale=br.minScale?br.minScale:360/256/Math.pow(2,17)}aN.prototype=new n();T(aN.prototype,{getLineColor:function(){return this.color},reDraw:function(bs){var bD=this.map,bx=this.getRectangle(),bv=bD.getOverlaysRectangle();var bz=Math.min(bx.max.y,bv.max.y);var bA=Math.max(bx.min.y,bv.min.y);
var bB=Math.min(bx.max.x,bv.max.x);var bC=Math.max(bx.min.x,bv.min.x);var bG=bA<=bz&&bC<=bB,by=this.graphics;if(bG){var bF=bD.getScale();if(bs&4||bs&1){this.drawRectangle=bv;var bu=new a(new bk(bC,bA),new bk(bB,bz));var bw=this.getSuctionPoints(bF),bt=this.showScale=bw.showScale;var bq={x:Math.floor(bC/bt),y:Math.floor(bA/bt)},bp={x:Math.ceil(bB/bt),y:Math.ceil(bz/bt)};this.painted=this.drawPoints(bw,bq,bp,by,bu.containsRectangle(bx));if(this.painted&&bs&4&&document.all){by.setLineColor(this.color);by.setFillColor(this.bgcolor);
by.setLineWeight(this.weight);by.setOpacity(this.opacity);by.setLineStyle(this.lineStyle)}}if(this.painted){var br=this.drawMinP;var bE=bD.getGeoPosition({x:br.x*this.showScale,y:br.y*this.showScale});if(this.offset){bE={x:bE.x+this.offset.x,y:bE.y+this.offset.y}}by.setPosition(bE);by.setScale(bF/this.showScale)}}else{by.clear()}if(this._isEditting){this.checkMarkers(bs&4)}},onEditDrag:function(bx){var br=this.editDragObj;if(!br){return}var bq=this.map,by=this.points,bt=br.index,bv=by.length,bw=(br.type=="point");
var bp=be(this,bw?U[3]:U[2],[bt,bx]);var bs=bp?this.color:"gray",bu=this.isLine;if(!bu||bt>0||!bw){var bB=bw?[by[bt-1>=0?(bt-1):(bv-1)],bx]:[by[bt],bx];if(!br.line1){var bA=br.line1=new aQ(bB,bs,this.weight,this.opacity);bA.setLineStyle(U[52]);bq.addOverlay(bA)}else{br.line1.setPoints(bB);br.line1.setLineColor(bs)}}if(!bu||bv>bt+1||!bw){var bz=[bx,by[bt+1<bv?(bt+1):0]];if(!br.line2){var bA=br.line2=new aQ(bz,bs,this.weight,this.opacity);bA.setLineStyle(U[52]);bq.addOverlay(bA)}else{br.line2.setPoints(bz);br.line2.setLineColor(bs)
}}br.isValid=bp},onEditPointMouseOver:function(bp){return function(bv){var bq=this.editSymbols,br,bs=this.points;if(bs.length<(this.isLine?3:4)){return}for(br=bq.length-1;br>=0;br--){if(bq[br]==bp){break}}if(br<0){return}if(!be(this,U[1],[br])){return}var bu=this.editHoverObj;if(bu){if(bu.index==br){return}else{this.endEditHover()}}var bt=new p(bs[br],{icon:new O(aL+"plo/p_close.jpg",{x:11,y:11},{x:-6,y:6})});this.map.addOverlay(bt);this.editHoverObj={mol:Q(document,U[64],this,this.onEditMouseOut),cl:Q(bt,U[47],this,this.onEditDelete),delBtn:bt,index:br}
}},onEditLineDragStart:function(bp){return function(bs){var bq=this.editSymbols,br;for(br=bq.length-1;br>=0;br--){if(bq[br]==bp){break}}if(br<0){return}if(this.editDragObj){this.endEditDrag()}this.editDragObj={dl:Q(bp.lMarker,"drag",this,this.onEditDrag),del:Q(bp.lMarker,U[34],this,this.endEditDrag),type:"line",index:br}}},getLineWeight:function(){return this.weight},isDrawing:function(){return !!this.drawObj},addPoint:function(bq,bs){if(bs&&bs!=1){return}var br=this.points,bp=br.length,bt=this.map.fromContainerPixelToLatLng(bq);
if(bp==0||!br[bp-1].equals(bt)){br.push(bt);this.setPoints(br)}},endDrawing:function(){var bp=this.drawObj,bq=this.map;if(!bp){return}delete this.drawObj;a7(bp.cl);a7(bp.dl);a7(bp.ml);if(bq.endMarking){bq.endMarking()}if(bq.setDblClickEnable){bq.setDblClickEnable(true)}if(bq.setCursorText){bq.setCursorText("")}if(bq.endAutoSlide){bq.endAutoSlide()}if(bp.preLine){bq.removeOverlay(bp.preLine);delete bp.preLine}bp=null;if(this.points.length<(this.isLine?2:3)){this.setPoints([])}be(this,U[4])},getSuctionPoints:function(bS){var bG,bN=this.sPoints,bp=Math.round(Math.log(bS/this.minScale)/Math.log(2))-1;
if(bp<0){bp=0}if(bG=bN[bp]){return bG}var bK,bv=bN.levels;for(bK=bv.length-1;bK>=0;bK--){if(bv[bK]<bp){break}}bN[bp]=bG=[];bv.splice(bK+1,0,bp);var bE,bD,bH=bN[bv[bK]],bM=bH.length,bL=0,bs=bp-bv[bK],bw,bu;var bA,by,bQ,br,bC,bz,bB,bP,bO,bF=this.disableReduce,bx=1;var bR=Math.sqrt,bq=Math.atan2,bI=Math.min,bJ=Math.max,bt=Math.atan;for(bK=0;bK<bM;bK++){bE=bH[bK].x>>bs;bD=bH[bK].y>>bs;if(bK>0&&bw==bE&&bu==bD){continue}if(!bF&&bK>0){if(bB){bP=bq(bz-bD,bE-bC);if(i(bP-bA)>=0&&i(by-bP)>=0){bO=bt(bx/bR((bz-bD)*(bz-bD)+(bE-bC)*(bE-bC)));
bQ=i(bP-bO);if(i(bQ-bA)>0){bA=bQ}br=i(bP+bO);if(i(by-br)>0){by=br}bG[bL-1]={x:(bw=bE),y:(bu=bD)};continue}bB=false}if(!bB){bB=true;bz=bu;bC=bw;bP=bq(bz-bD,bE-bC);bO=bt(bx/bR((bz-bD)*(bz-bD)+(bE-bC)*(bE-bC)));bA=i(bP-bO);by=i(bP+bO)}}bG.push({x:(bw=bE),y:(bu=bD)});bL++}bG.showScale=(1<<bp)*this.minScale;return bG},focus:function(){var bp=aN._focus;if(bp!=this){if(bp){bp.blur()}aN._focus=this;if(this.getContainer()){ad(this.getContainer(),{zIndex:this.zIndex+1})}be(this,"focus")}},setLineBorder:function(br,bp,bq){this.graphics.setLineBorder(br,bp,bq)
},setOpacity:function(bp){this.graphics.setOpacity(this.opacity=bp)},removeLMarker:function(bp){if(!bp){return}if(bp.lMarker){a7(bp.lmdLis);delete bp.lmdLis;this.map.removeOverlay(bp.lMarker);bp.lMarker.depose();delete bp.lMarker}},removePMarker:function(bp){if(!bp){return}if(bp.pMarker){a7(bp.pmdLis);delete bp.pmdLis;a7(bp.pmoLis);delete bp.pmoLis;this.map.removeOverlay(bp.pMarker);bp.pMarker.depose();delete bp.pMarker}},checkIntersection:function(by,bw,bs,bt,bu){var bp=this.map,bx=bp.fromLatLngToPixel(by[0]),bv=bp.fromLatLngToPixel(by[1]);
for(var br=bw.length-1;br>=0;br--){if(bs&&br==bw.length-1){continue}var bq=br+1<bw.length?(br+1):0;if(br==bt||(bu&&bq==bt)){continue}if(f(bx,bv,bp.fromLatLngToPixel(bw[br]),bp.fromLatLngToPixel(bw[bq]))){return true}}return false},setLineStyle:function(bp){if(!bp){return}this.graphics.setLineStyle(this.lineStyle=bp)},getContainer:function(){return this.graphics.getPanel()},onMapMove:function(bq){var bs=this.drawObj,bt=this.points,bp=bt.length,bu=this.map;if(!bs||bp<1){return}var br=[bt[bp-1],bu.fromContainerPixelToLatLng(bq)];
if(bp>1&&!this.isLine){br.push(bt[0])}if(!bs.preLine){bs.preLine=new aQ(br,this.color,this.weight,this.opacity);bs.preLine.setLineStyle(U[52]);bu.addOverlay(bs.preLine)}else{bs.preLine.setPoints(br)}be(this,"draw",[bq])},removeSymbol:function(bq){var bp=this.editSymbols,br=bp[bq];this.removePMarker(br);this.removeLMarker(br);bp.splice(bq,1)},initPixel:function(bG){this.sPoints={levels:[0]};var bL=this.points,bp=this.nPoints,bM=this.coords=new a(new bk(Number.MAX_VALUE,Number.MAX_VALUE),new bk(-Number.MAX_VALUE,-Number.MAX_VALUE));
bG=bG?bG:(this.map?this.map.getProjection():null);if((!bL&&!bp)||!bG){return}var bD,bC,bF=this.sPoints[0]=[],bO=bL?bL.length:bp.length/2,bN=0,bw,bI,bu,bt,bS=bF.showScale=this.minScale;var bz,bx,bR,br,bB,by,bA,bQ,bP,bE=this.disableReduce,bv=1;var bT=Math.sqrt,bq=Math.atan2,bH=Math.min,bK=Math.max,bs=Math.atan;for(var bJ=0;bJ<bO;bJ++){bw=bL?bL[bJ]:{la:bp[bJ*2],lo:bp[bJ*2+1]};bI=bG.fromLatLngToPixel(bw);bM.extend(bI);bD=parseInt(bI.x/bS);bC=parseInt(bI.y/bS);if(bJ>0&&bu==bD&&bt==bC){continue}if(!bE&&bJ>0){if(bA){bQ=bq(by-bC,bD-bB);
if(i(bQ-bz)>=0&&i(bx-bQ)>=0){bP=bs(bv/bT((by-bC)*(by-bC)+(bD-bB)*(bD-bB)));bR=i(bQ-bP);if(i(bR-bz)>0){bz=bR}br=i(bQ+bP);if(i(bx-br)>0){bx=br}bF[bN-1]={x:(bu=bD),y:(bt=bC)};continue}bA=false}if(!bA){bA=true;by=bt;bB=bu;bQ=bq(by-bC,bD-bB);bP=bs(bv/bT((by-bC)*(by-bC)+(bD-bB)*(bD-bB)));bz=i(bQ-bP);bx=i(bQ+bP)}}bF.push({x:(bu=bD),y:(bt=bC)});bN++}},endEditDrag:function(bp){var bs=this.editDragObj;delete this.editDragObj;if(!bs){return}a7(bs.dl);a7(bs.del);var bt=this.map,bq,br=this.points;if(bq=bs.line1){bt.removeOverlay(bq);
bq.depose();delete bs.line1}if(bq=bs.line2){bt.removeOverlay(bq);bq.depose();delete bs.line2}if(bs.isValid){if(bp){if(bs.type=="line"){br.splice(bs.index+1,0,bp)}else{br[bs.index]=bp}}this.setPoints(br);be(this,bs.type=="point"?"aftereditmove":"aftereditadd",[bs.index,bp])}else{this.checkMarkers(true)}},endEditHover:function(){var bp=this.editHoverObj;if(!bp){return}delete this.editHoverObj;a7(bp.mol);a7(bp.cl);this.map.removeOverlay(bp.delBtn);bp.delBtn.depose();delete bp.delBtn},startDrawing:function(){var bp=this.map;
if(!bp||this.drawObj){return false}if(bp.startMarking){bp.startMarking()}if(bp.startAutoSlide){bp.startAutoSlide()}if(bp.setDblClickEnable){bp.setDblClickEnable(false)}if(bp.setCursorText){bp.setCursorText("\u5de6\u952e\u5355\u51fb\u589e\u52a0\u70b9\uff0c\u53cc\u51fb\u7ed3\u675f",{offset:{x:10,y:10},style:(this.cursorStyle||{whiteSpace:U[49]})})}this.drawObj={cl:Q(bp,U[47],this,this.addPoint),dl:Q(bp,U[28],this,this.endDrawing),ml:Q(bp,U[64],this,this.onMapMove)};be(this,U[5]);return true},setFillColor:function(bp){this.graphics.setFillColor(this.bgcolor=bp)
},remove:function(){if(this.drawObj){this.endDrawing()}if(this._isEditting){this.endEditting()}n.prototype.remove.apply(this,arguments)},onEditDelete:function(){var bq=this.editHoverObj;if(!bq){return}var bp=this.points;bp.splice(bq.index,1);this.removeSymbol(bq.index);this.setPoints(bp);be(this,"aftereditdelete",[bq.index])},onMouseEvent:function(bp,bs,br){if(this.drawObj){return}if(bp==U[65]&&document.releaseCapture){br.target._needUp=true}var bq=this.map;if(bp==U[64]&&(!document.all||!bq.getTargetScale||bq.getTargetScale()==bq.getScale())){this.focus()
}},setLineColor:function(bp){this.graphics.setLineColor(this.color=bp)},setOffset:function(bp){this.offset=bp;this.reDraw(0)},drawPoints:function(bs,bt,br,bq,bp){this.drawMinP=bt;bq.init(bt,br,1);if(bs.length>=2){if(!bp){bs=h(bs,bt,br)}bq.drawPolygon(bs)}return true},onEditPointDragStart:function(bp){return function(bs){var bq=this.editSymbols,br;for(br=bq.length-1;br>=0;br--){if(bq[br]==bp){break}}if(br<0){return}if(this.editDragObj){this.endEditDrag()}this.editDragObj={dl:Q(bp.pMarker,"drag",this,this.onEditDrag),del:Q(bp.pMarker,U[34],this,this.endEditDrag),type:"point",index:br}
}},setPoints:function(bp){if(bp&&bp[0]&&typeof(bp[0])!=U[67]){this.nPoints=bp;delete this.points}else{delete this.nPoints;this.points=bp}this.sPoints=null;this.coords=null;if(this.map){this.map.onOverlayChange(this)}if(bp&&bp.length==0&&this.drawObj&&this.drawObj.preLine){this.map.removeOverlay(this.drawObj.preLine);delete this.drawObj.preLine}},blur:function(){if(aN._focus!=this){return}delete aN._focus;if(this.getContainer()){ad(this.getContainer(),{zIndex:this.zIndex})}be(this,"blur")},setLineWeight:function(bp){if(isNaN(parseInt(bp))){return
}this.graphics.setLineWeight(this.weight=bp)},getOffset:function(){return this.offset?this.offset:{x:0,y:0}},getOpacity:function(){return this.opacity},getPoints:function(){if(this.nPoints){var bs=this.nPoints,bp=bs.length,br=[];for(var bq=0;bq<bp;bq+=2){br.push(new r(bs[bq],bs[bq+1]))}delete this.nPoints;this.points=br}return this.points},getLineStyle:function(bp){return this.lineStyle},onEditMouseOut:function(bq){var bp=this.editHoverObj},checkMarkers:function(bt){this.endEditHover();var bG=this.map,bI=bG.getScale(),bB=bG.getOverlaysRectangle(),bD=this.points,bF=bD.length,bp=this.editSymbols;
var bz=aL+"plo/",by=this.editIcon,bC=this.addIcon;if(!bC){bC=this.addIcon=new O(bz+"p_add.jpg",{x:9,y:9},{x:5,y:5})}if(!bp){bp=this.editSymbols=new Array(bF)}else{if(bp.length>bF){for(var bE=bp.length-1;bE>=bF;bE--){this.removeSymbol(bE)}}else{if(bp.length<bF){for(var bE=bp.length;bE<bF;bE++){bp.push({})}}}}var bq=-1,bx=16;for(var bE=bF-1;bE>=0;bE--){if(!bp[bE]){bp[bE]={}}var bH=false,bu=false;var bA=-1;if(bB.containsPoint(bG.fromLatLngToPixel(bD[bE]))){if(bq<0&&!(this.isLine&&bE==bF-1)){var bs=bG.fromLatLngToPixel(bD[bE]),br=bG.fromLatLngToPixel(bD[bE+1<bF?(bE+1):0]);
bq=(Math.abs(bs.x-br.x)+Math.abs(bs.y-br.y))/bI}if(bA<0&&!(this.isLine&&bE==0)){var bs=bG.fromLatLngToPixel(bD[bE]),br=bG.fromLatLngToPixel(bD[bE-1>=0?(bE-1):(bF-1)]);bA=(Math.abs(bs.x-br.x)+Math.abs(bs.y-br.y))/bI}if(bq<0||bq>bx||bA<0||bA>bx){bH=true}if(bq>bx*2){bu=true}}bq=bA;if(bH){if(!bp[bE].pMarker){var bv;if(by){bv=new p(bD[bE],{icon:by,draggable:true,dragInterval:32})}else{bv=new ak(bD[bE],document.createElement("div"),{draggable:true,dragInterval:32,style:{width:"8px",height:"8px",backgroundColor:U[23],fontSize:"0px",overflow:U[80],border:"solid 1px "+this.color,cursor:U[66]},offset:{x:-4,y:-4}})
}bp[bE].pMarker=bv;bp[bE].pmdLis=Q(bv,U[35],this,this.onEditPointDragStart(bp[bE]));if(!this.editDisableDelete){bp[bE].pmoLis=Q(bv,U[30],this,this.onEditPointMouseOver(bp[bE]))}bG.addOverlay(bv)}else{if(bt){bp[bE].pMarker.setLatLng(bD[bE])}}}else{this.removePMarker(bp[bE])}if(bu&&!this.editDisableAdd){var bs=bG.fromLatLngToPixel(bD[bE]),br=bG.fromLatLngToPixel(bD[bE+1<bF?(bE+1):0]);var bw=bG.fromPixelToLatLng({x:(bs.x+br.x)/2,y:(bs.y+br.y)/2});if(!bp[bE].lMarker){var bv=bp[bE].lMarker=new p(bw,{icon:bC,draggable:true,dragInterval:32});
bp[bE].lmdLis=Q(bv,U[35],this,this.onEditLineDragStart(bp[bE]));bG.addOverlay(bv)}else{if(bt){bp[bE].lMarker.setLatLng(bw)}}}else{this.removeLMarker(bp[bE])}}},endEditting:function(){this._isEditting=false;this.endEditHover();this.endEditDrag();var bp=this.editSymbols;if(bp){for(var bq=bp.length-1;bq>=0;bq--){this.removeSymbol(bq)}}delete this.editSymbols},initialize:function(bp){this.map=bp;return true},startEditting:function(bp){bp=bp?bp:{};this._isEditting=true;this.editDisableAdd=!!bp.disableAdd;this.editDisableDelete=!!bp.disableDelete;
if(this.points.length<=1){return}if(bp.disableIntersection){if(!bp.disableAdd){Q(this,U[1],this,function(br){var bs=this.points,bq=[bs[br-1>=0?br-1:bs.length-1],bs[br+1<bs.length?br+1:0]];if(this.checkIntersection(bq,bs,this.isLine,br,true)){return false}})}Q(this,U[3],this,function(bu,br){var bv=this.points,bq=bv.length,bs,bt=this.isLine;if(!bt||bu>0){bs=[bv[bu-1>=0?(bu-1):(bq-1)],br];if(this.checkIntersection(bs,bv,bt,bu,true)){return false}}if(!bt||bq>bu+1){bs=[br,bv[bu+1<bq?(bu+1):0]];if(this.checkIntersection(bs,bv,bt,bu,true)){return false
}}return true});if(!bp.disableDelete){Q(this,U[2],this,function(bu,br){var bv=this.points,bq=bv.length,bs,bt=this.isLine;bs=[bv[bu],br];if(this.checkIntersection(bs,bv,bt,bu,false)){return false}bs=[br,bv[bu+1<bq?(bu+1):0]];if(this.checkIntersection(bs,bv,bt,bu,false)){return false}return true})}}this.checkMarkers(true)},getFillColor:function(){return this.bgcolor},getRectangle:function(){return this.coords}});function q(bq){var bp=[bl,G,aM,ah];for(var br=0;br<bp.length;br++){if(bp[br].isSupport()){return new bp[br]({shape:bq})
}}return new L(true)}function i(bp){if(bp>Math.PI){bp-=Math.PI*2}if(bp<-Math.PI){bp+=Math.PI*2}return bp}function h(bq,br,bp){bq=g(bq,br.x,false,false);bq=g(bq,bp.x,true,false);bq=g(bq,br.y,false,true);bq=g(bq,bp.y,true,true);return bq}function g(bz,bp,bs,bB){var by=[],bt=bz.length;for(var bq=0;bq<bt;bq++){var bA=bz[bq],bx=bz[((bq+1)<bt)?(bq+1):0];if(bA.x==bx.x&&bA.y==bx.y){continue}var bw=bB?bA.y:bA.x,bv=bB?bx.y:bx.x;var bu=(bs==(bw<bp)),br=(bs==(bv<bp));if(bu!=br){by.push(e(bA,bx,bp,bB))}if(br){by.push(bx)
}}return by}function f(bq,bp,bu,bt){var bs=bq.x*(bu.y-bp.y)+bp.x*(bq.y-bu.y)+bu.x*(bp.y-bq.y);var br=bq.x*(bt.y-bp.y)+bp.x*(bq.y-bt.y)+bt.x*(bp.y-bq.y);if(((bs*br)>=0)&&!(bs==0&&br==0)){return false}bs=bu.x*(bq.y-bt.y)+bt.x*(bu.y-bq.y)+bq.x*(bt.y-bu.y);br=bu.x*(bp.y-bt.y)+bt.x*(bu.y-bp.y)+bp.x*(bt.y-bu.y);if(((bs*br)>=0)&&!(bs==0&&br==0)){return false}return true}function e(bs,br,bp,bq){if(bq){return{x:(bs.x+(br.x-bs.x)/(br.y-bs.y)*(bp-bs.y)),y:bp}}else{return{x:bp,y:(bs.y+(br.y-bs.y)/(br.x-bs.x)*(bp-bs.x))}
}}T(aN,{getGraphics:q,getAngle:i,runClipping:h,clipSide:g,IsIntersection:f,intersect:e});function aQ(bq,bp){if(typeof(bp)!=U[67]){bp={color:bp}}if(arguments[2]){bp.weight=arguments[2]}if(arguments[3]){bp.opacity=arguments[3]}bp.zIndex=bp.zIndex|440;bp.bgcolor="";bp.isLine=true;aN.apply(this,[bq,bp])}aQ.prototype=new aN();T(aQ.prototype,{drawPoints:function(bD,br,bp,bJ,bq){var bv=bD.length,bE=-1,bz,bK,bt,bP=this.map,bw,bx=[],bs,bO,bM,bN,bL;var bI=bp.x,bH=bp.y,bG=br.x,bF=br.y,bC=Math.max,by=Math.min;if(!bq){bO=bG;
bM=bF;bN=bI;bL=bH}for(var bB=0;bB<bv;bB++){bz=bD[bB];if(bq||(bz.x>=bO&&bz.y>=bM&&bz.x<=bN&&bz.y<=bL)){bI=by(bI,bz.x);bH=by(bH,bz.y);bG=bC(bG,bz.x);bF=bC(bF,bz.y);if(bB==0){bs=[bz]}else{if(bE==bB-1){bs.push(bz)}else{bw=this.getIntersection(br,bp,bD[bB-1],bz);bK=bw[0];bI=by(bI,bK.x);bH=by(bH,bK.y);bG=bC(bG,bK.x);bF=bC(bF,bK.y);bs=[bK,bz]}}bt=bz;bE=bB}else{if(bB!=0&&bE==bB-1){bw=this.getIntersection(br,bp,bD[bB-1],bz);if(bK=bw[0]){bI=by(bI,bK.x);bH=by(bH,bK.y);bG=bC(bG,bK.x);bF=bC(bF,bK.y);bs.push(bK)}}if(bs){bx.push(bs);
bs=null}if(bB!=0&&bE!=bB-1){bw=this.getIntersection(br,bp,bD[bB-1],bz);if(bw.length==2){bK=bw[0];bI=by(bI,bK.x);bH=by(bH,bK.y);bG=bC(bG,bK.x);bF=bC(bF,bK.y);bK=bw[1];bI=by(bI,bK.x);bH=by(bH,bK.y);bG=bC(bG,bK.x);bF=bC(bF,bK.y);bx.push(bw)}}}}if(bG<bI||bF<bH){bJ.clear();return false}bJ.init({x:bI,y:bH},{x:bG,y:bF},1);this.drawMinP={x:bI,y:bH};if(bs){bx.push(bs)}for(var bB=bx.length-1;bB>=0;bB--){var bu=[];for(var bA=0;bA<bx[bB].length;bA++){bu.push(bx[bB][bA].x);bu.push(bx[bB][bA].y)}bJ.drawPolyline(bx[bB])}return true
},getIntersection:function(bC,bB,bu,bD){var bt,bz,bs=[],bx=bC.x,bw=bC.y,br=bB.x,bp=bB.y;if(bu.y==bD.y){if(bu.x==bD.x){return bs}if(bu.y>=bw&&bu.y<=bp){bt=bu.x<bx?-1:(bu.x>br?1:0);bz=bD.x<bx?-1:(bD.x>br?1:0);if(bt==bz){return bs}if(bt+bz<=0){bs.push({x:bx,y:bu.y})}if(bt+bz>=0){bs.push({x:br,y:bu.y})}}return bs}else{if(bu.x==bD.x){if(bu.x>=bx&&bu.x<=br){bt=bu.y<bw?-1:(bu.y>bp?1:0);bz=bD.y<bw?-1:(bD.y>bp?1:0);if(bt==bz){return bs}if(bt+bz<=0){bs.push({x:bu.x,y:bw})}if(bt+bz>=0){bs.push({x:bu.x,y:bp})}}return bs
}}var bv=(bD.y-bu.y)*(bx-bu.x)/(bD.x-bu.x)+bu.y;if(bv>=bw&&bv<=bp&&(bv-bu.y)*(bv-bD.y)<=0){(bv>bw&&bv<bp)?bs.unshift({x:bx,y:bv}):bs.push({x:bx,y:bv})}var by=(bD.y-bu.y)*(br-bu.x)/(bD.x-bu.x)+bu.y;if(by>=bw&&by<=bp&&(by-bu.y)*(by-bD.y)<=0){(by>bw&&by<bp)?bs.unshift({x:br,y:by}):bs.push({x:br,y:by})}var bq=(bD.x-bu.x)*(bp-bu.y)/(bD.y-bu.y)+bu.x;if(bq>=bx&&bq<=br&&(bq-bu.x)*(bq-bD.x)<=0){(bq>bx&&bq<br)?bs.unshift({x:bq,y:bp}):bs.push({x:bq,y:bp})}var bA=(bD.x-bu.x)*(bw-bu.y)/(bD.y-bu.y)+bu.x;if(bA>=bx&&bA<=br&&(bA-bu.x)*(bA-bD.x)<=0){(bA>bx&&bA<br)?bs.unshift({x:bA,y:bw}):bs.push({x:bA,y:bw})
}if(bs.length>=2){if(bs[0].x==bs[bs.length-1].x){bs.pop()}}return bs}});function a3(br,bq){if(br===true){return}this.bounds=br;if(!bq||typeof(bq)!=U[67]){bq={color:bq}}var bs=this.div=this.createDiv();ad(bs,{},true);if(bq.title){bs.title=bs.alt=bq.title}this.cursorStyle=bq.cursorStyle||{whiteSpace:U[49]};if(bq.cursor){ad(bs,{cursor:(this.cursor=bq.cursor)})}ad(bs,{position:U[78],zIndex:(bq.zIndex?bq.zIndex:420),fontSize:"0px",overflow:U[80]});if(arguments[2]){bq.bgcolor=arguments[2]}if(arguments[3]){bq.weight=arguments[3]
}if(arguments[4]){bq.opacity=arguments[4]}this.setLineColor((bq.color||bq.color=="")?bq.color:"#0000FF");this.setFillColor((bq.bgcolor||bq.bgcolor=="")?bq.bgcolor:"#99FFCC");this.setLineWeight((bq.weight||bq.weight===0)?bq.weight:3);this.setOpacity((bq.opacity||bq.opacity===0)?bq.opacity:0.5);this.setLineStyle(bq.lineStyle?bq.lineStyle:"solid");if(bq.image){var bp=aY(bq.image);ad(bp,{position:U[78],width:U[77],height:U[77]});this.div.appendChild(bp)}this.editSymbolNumber=8}a3.prototype=new n();T(a3.prototype,{reDraw:function(){var bq=this.map,bA=this.coords,bz=bq.getOverlaysRectangle();
var bp=Math.min(bA.max.y,bz.max.y);var bt=Math.max(bA.min.y,bz.min.y);var br=Math.min(bA.max.x,bz.max.x);var bx=Math.max(bA.min.x,bz.min.x);var bu=bt<=bp&&bx<=br,by=this.graphics;if(bu){var bw=bq.getScale(),bv=bq.getGeoPosition(new bk(bx,bt)),bs=bq.getGeoPosition(new bk(br,bp));aS(this.div,{x:bv.x-Math.ceil(this.weight/2),y:bv.y-Math.ceil(this.weight/2)});aF(this.div,{x:Math.abs(bs.x-bv.x-this.weight),y:Math.abs(bs.y-bv.y-this.weight)});ad(this.div,{display:""})}else{ad(this.div,{display:U[81]})}},setBounds:function(bp){this.bounds=bp;
if(this.map){this.map.onOverlayChange(this)}if(this._isEditting){this.checkMarkers()}},remove:function(){this.endDrawing();this.endEditting();n.prototype.remove.apply(this,arguments)},setFillColor:function(bp){ad(this.div,{backgroundColor:(this.bgcolor=bp)})},setLineWeight:function(bp){ad(this.div,{borderWidth:(this.weight=bp)+"px"})},initPixel:function(){var bp=this.bounds,br=this.map;if(!bp||!br){return}var bs=br.fromLatLngToPixel(bp.sw),bq=br.fromLatLngToPixel(bp.ne);this.coords=new a(new bk(Math.min(bs.x,bq.x),Math.min(bs.y,bq.y)),new bk(Math.max(bs.x,bq.x),Math.max(bs.y,bq.y)))
},startDrawing:function(){var bp=this.map;if(!bp||this.drawObj){return false}if(bp.startMarking){bp.startMarking()}if(bp.setCursorText){bp.setCursorText("\u62d6\u62fd\u7ed8\u5236\u77e9\u5f62",{offset:{x:10,y:10},style:this.cursorStyle})}if((this.mapDragFlag=(bp.draggingEnabled&&bp.draggingEnabled()))){bp.disableDragging()}this.drawObj={cl:Q(bp,U[65],this,this.onDrawStart)};be(this,U[5]);this.lastBounds=this.bounds;this.setBounds(null);return true},setOpacity:function(bp){aT(this.div,this.opacity=bp)},checkMarkers:function(){if(!this.bounds){if(this.editSymbols){var bp=this.editSymbols,bz,bG=this.map;
delete this.editSymbols;while(typeof(bz=bp.pop())==U[67]){if(!bz){continue}bG.removeOverlay(bz);bz.depose()}}return}var bG=this.map,bt=this.bounds,br=bG.fromLatLngToPixel(bt.sw),bq=bG.fromLatLngToPixel(bt.ne),bF,bv=this.editSymbols;var bE=Math.min(br.x,bq.x),bC=Math.min(br.y,bq.y),bD=Math.max(br.x,bq.x),bB=Math.max(br.y,bq.y);if(!bv){bv=this.editSymbols=[];bF=true}for(var bA=0;bA<9;bA++){if(bA==4||(bA%3!=1&&parseInt(bA/3)!=1&&this.editSymbolNumber==4)||(bA%3+parseInt(bA/3)!=2&&this.editSymbolNumber==2)){if(bF){bv.push(null)
}continue}var bx=parseInt(bA/3),bw=bA%3,by=bG.fromPixelToLatLng({x:bE+(bD-bE)*bx/2,y:bB+(bC-bB)*bw/2});if(bF){var bs=(bw!=1?(bw==0?"s":"n"):"")+(bx!=1?(bx==0?"w":"e"):"")+U[0];var bu=new ak(by,document.createElement("div"),{dragRtp:{x:(bx==1)?0:1,y:(bw==1)?0:1},style:{width:"8px",height:"8px",backgroundColor:U[55],cursor:bs},offset:{x:-5,y:-5},dragInterval:16});bG.addOverlay(bu);bu.setDraggingEnabled(true);bu._index=bA;Q(bu,"drag",this,this.onEditDrag(bu));Q(bu,U[35],this,function(){be(this,"editresizestart")
});Q(bu,U[34],this,function(){be(this,"editresizeend")});bv.push(bu)}else{var bu=bv[bA];if(bu&&!bu.isDragging()){bu.setLatLng(by)}}}},onDrawStart:function(bp){var bq=this.drawObj,br=this.map;var bs=bq.sp=bq.ep=this.map.fromContainerPixelToLatLng(bp);br.addOverlay(bq.preRect=this.getAuxiliary(new ao(bs,bs)));bq.ml=Q(br,U[64],this,this.onMapMove);bq.ul=Q(br,U[63],this,this.endDrawing)},onEditDrag:function(bp){return function(bt){var bu=this.editSymbols,bD=parseInt(bp._index),bs=this.bounds,bJ=this.map;var bC=bJ.fromLatLngToPixel(bs.sw),bE=bJ.fromLatLngToPixel(bs.ne),bA=bJ.fromLatLngToPixel(bt);
var bG=Math.min(bC.y,bE.y),bI=Math.min(bC.x,bE.x),bF=Math.max(bC.y,bE.y),bH=Math.max(bC.x,bE.x),bv=bA.y,bw=bA.x;if(this.datum){var bB=bJ.fromLatLngToPixel(this.datum),by=bB.x,bx=bB.y;if(bD%3==2&&bG!=bx){bF=(bF-bx)*(bv-bx)/(bG-bx)+bx;bG=bv}if(parseInt(bD/3)==0){bH=(bH-by)*(bw-by)/(bI-by)+by;bI=bw}if(bD%3==0&&bF!=bx){bG=(bG-bx)*(bv-bx)/(bF-bx)+bx;bF=bv}if(parseInt(bD/3)==2){bI=(bI-by)*(bw-by)/(bH-by)+by;bH=bw}}else{if(bD%3==2){bG=bv}if(parseInt(bD/3)==0){bI=bw}if(bD%3==0){bF=bv}if(parseInt(bD/3)==2){bH=bw}}if(bH<bI){var bw=bH;
bH=bI;bI=bw;var bq=[];for(var bD=0;bD<bu.length;bD++){var bz=this.editSymbols[(2-parseInt(bD/3))*3+bD%3];bq.push(bz);if(!bz){continue}bz._index=bD;var bw=parseInt(bD/3),bv=bD%3;var br=(bv!=1?(bv==0?"s":"n"):"")+(bw!=1?(bw==0?"w":"e"):"")+U[0];ad(bz.getContainer(),{cursor:br})}this.editSymbols=bu=bq}if(bF<bG){var bv=bF;bF=bG;bG=bv;var bq=[];for(var bD=0;bD<bu.length;bD++){var bz=this.editSymbols[parseInt(bD/3)*3+(2-bD%3)];bq.push(bz);if(!bz){continue}bz._index=bD;var bw=parseInt(bD/3),bv=bD%3;var br=(bv!=1?(bv==0?"s":"n"):"")+(bw!=1?(bw==0?"w":"e"):"")+U[0];
ad(bz.getContainer(),{cursor:br})}this.editSymbols=bu=bq}this.setBounds(new ao(bJ.fromPixelToLatLng(new bk(bI,bF)),bJ.fromPixelToLatLng(new bk(bH,bG))));be(this,"editresize")}},onMapMove:function(bp){var br=this.drawObj,bu=this.map,bt=br.sp;var bq=br.ep=this.map.fromContainerPixelToLatLng(bp);var bs=new ao(bt,bq);br.preRect.setBounds(bs);be(this,"draw",[bs])},onDrag:function(bt,br,bs){if(bs==U[62]){this.dsb=this.bounds;this.dragging=true;be(this,"editmovestart");for(var bq=0;bq<this.editSymbols.length;bq++){if(bq==4){continue
}this.map.removeOverlay(this.editSymbols[bq])}}var bp=this.map.fromContainerPixelToLatLng({x:br.x-bt.x,y:br.y-bt.y},this.dsb.sw,null,{x:0,y:0});var bu=this.map.fromContainerPixelToLatLng({x:br.x-bt.x,y:br.y-bt.y},this.dsb.ne,null,{x:0,y:0});this.setBounds(new ao(bp,bu));if(bs!=U[62]&&bs!="end"){be(this,"editmove")}if(bs=="end"){this.dragging=false;delete this.dragObj;be(this,"editmoveend");for(var bq=0;bq<this.editSymbols.length;bq++){if(bq==4){continue}this.map.addOverlay(this.editSymbols[bq])}}},startEditting:function(bp){if(!this.map||this._isEditting){return
}bp=bp?bp:{};ad(this.div,{cursor:"move"});this._isEditting=true;this.checkMarkers()},getFillColor:function(){return this.bgcolor},setLineStyle:function(bp){if(!bp){return}ad(this.div,{borderStyle:(this.lineStyle=bp)})},getOpacity:function(){return this.opacity},getLineStyle:function(bp){return this.lineStyle},setLineColor:function(bp){ad(this.div,{borderColor:(this.color=bp)})},onMouseEvent:function(bp,br,bq){if(this.drawObj){return}if(bp==U[65]&&this._isEditting&&!this.dragging){if(this.dragObj){this.dragObj.onMouseUp()
}this.dragObj=new F(this.div,a6(this,this.onDrag),{container:this.map.getContainer(),rtp:{x:1,y:1},interval:16}).onMouseDown(bq)}},getLineColor:function(){return this.color},createDiv:function(){return document.createElement("div")},getLineWeight:function(){return this.weight},setDatum:function(bp){this.datum=bp},getBounds:function(){return this.bounds},endDrawing:function(){var bq=this.drawObj,bt=this.map;if(!bq){return}delete this.drawObj;a7(bq.cl);a7(bq.ul);a7(bq.ml);if(this.mapDragFlag){bt.enableDragging()
}if(bt.endMarking){bt.endMarking()}if(bt.setCursorText){bt.setCursorText()}if(bq.preRect){bt.removeOverlay(bq.preRect);delete bq.preRect}var br,bs=bq.sp,bp=bq.ep;if(bs&&bp){br=new ao(bs,bp)}else{br=this.lastBounds}this.setBounds(br);bq=null;be(this,U[4])},getRectangle:function(){return this.coords},getAuxiliary:function(bp){return new a3(bp,{color:this.color,bgcolor:this.bgcolor,weight:this.weight,opacity:this.opacity,lineStyle:U[52]})},endEditting:function(){if(!this._isEditting){return}this._isEditting=false;
ad(this.div,{cursor:this.cursor});a7(this.editDragLis);delete this.editDragLis;var bp=this.editSymbols,bq,br=this.map;delete this.editSymbols;while(typeof(bq=bp.pop())==U[67]){if(!bq){continue}br.removeOverlay(bq);bq.depose()}},initialize:function(bp){this.map=bp;return true}});function bm(bq,bp){a3.apply(this,arguments);this.editSymbolNumber=2}bm.prototype=new a3();T(bm.prototype,{setLineColor:function(bp){this.graphics.setLineColor(this.color=bp)},getAuxiliary:function(bp){return new bm(bp,{color:this.color,bgcolor:this.bgcolor,weight:this.weight,opacity:this.opacity,lineStyle:U[52]})
},reDraw:function(){var bs=this.map,br=this.coords,bq=this.graphics,bp=bs.getGeoPosition(br.min);bq.init(bp,bs.getGeoPosition(br.max),1);bq.setPosition(bp);bq.setScale(1)},createDiv:function(){var bp=this.graphics=q(U[61]);return bp.getPanel()},setOpacity:function(bp){this.graphics.setOpacity(this.opacity=bp)},setFillColor:function(bp){this.graphics.setFillColor(this.bgcolor=bp)},setLineWeight:function(bp){this.graphics.setLineWeight(this.weight=bp)},setLineStyle:function(bp){this.graphics.setLineStyle(this.lineStyle=bp)
}});function r(bq,bp){this.la=parseFloat(bq);this.lo=parseFloat(bp)}T(r.prototype,{lat:function(){return this.la},equals:function(bp){return bp&&bp.lat()==this.la&&bp.lng()==this.lo},lng:function(){return this.lo}});function d(by){var br=0,bu=6371.004,bp=Math.PI/180;for(var bv=by.length-2;bv>=0;bv--){var bq=by[bv],bz=by[bv+1],bw,bt,bs,bx;bw=(bz.lo-bq.lo)*bp;bt=Math.PI/2-bq.la*bp;bs=Math.PI/2-bz.la*bp;bx=Math.cos(bs)*Math.cos(bt)+Math.sin(bs)*Math.sin(bt)*Math.cos(bw);bx=Math.min(Math.max(bx,-1),1);br+=bu*Math.acos(bx)*1000
}return Math.round(br)}T(r,{getDistance:d});function ao(bp,bq){this.sw=bp;this.ne=bq}T(ao.prototype,{extend:function(bq){var br=bq.lo,bt=bq.la,bp=this.sw,bs=this.ne;if(bp.lo>br){bp.lo=br}if(bs.lo<br){bs.lo=br}if(bp.la>bt){bp.la=bt}if(bs.la<bt){bs.la=bt}return this},getCenter:function(){return new r((this.sw.la+this.ne.la)/2,(this.sw.lo+this.ne.lo)/2)},containsBounds:function(bp){return(bp.sw.lo>=this.sw.lo&&bp.ne.lo<=this.ne.lo&&bp.sw.la>=this.sw.la&&bp.ne.la<=this.ne.la)},containsLatLng:function(bp){return(bp.lo>=this.sw.lo&&bp.lo<this.ne.lo&&bp.la>=this.sw.la&&bp.la<this.ne.la)
},intersects:function(bp){return(bp.ne.lo>=this.sw.lo&&bp.sw.lo<=this.ne.lo&&bp.ne.la>=this.sw.la&&bp.sw.la<=this.ne.la)},getSouthWest:function(){return this.sw},getNorthEast:function(){return this.ne}});function c(bq){var br=new ao(new r(Number.MAX_VALUE,Number.MAX_VALUE),new r(-Number.MAX_VALUE,-Number.MAX_VALUE));for(var bp=bq.length-1;bp>=0;bp--){br.extend(bq[bp])}return br}T(ao,{getLatLngBounds:c});function a5(bq,br){this.config=br=br?br:{};this.initContainer(bq);this.setViewSize();this.controls=[];if(document.createDocumentFragment){this.containerFragment=document.createDocumentFragment()
}var bu=br.initControls?br.initControls:[ai,aI,aA,I,a4,ap,bj,m,aO,H,j,av,aG,Y,l,al,D,{argu:[[{html:"&copy; 2011 <a href=\"http://ditu.aliyun.com/\" target=\"_blank\" style=\"color:#000000\">Aliyun</a>",minWidth:-1},{html:'&copy; 2011 <a href=\"http://ditu.aliyun.com/\" target=\"_blank\" style=\"color:#000000\">Aliyun</a> \u2013 Map Data &copy; <a href="http://www.autonavi.com/" target="_blank"><font color="#000000">AutoNavi</font></a> GS(2010)6011',minWidth:400}],{x:0,y:1},{x:10,y:-18},{fontSize:"11px",color:U[55],fontFamily:"Arial",height:"20px"}],cla:B}];for(var bs=0;bs<bu.length;bs++){var bt=bu[bs],bv,bp=bt.argu;this.addControl(bt.cla?new bt.cla(bp[0],bp[1],bp[2],bp[3],bp[4],bp[5]):new bt())
}if(this.containerFragment){this.container.appendChild(this.containerFragment);delete this.containerFragment;aK(10001,1)}}T(a5.prototype,{getScale:function(){return this.scale},setCenter:function(bp){if(!bp||bp.equals(this.center)){return}var bq=bp.lo;if(bq<-180||bq>180){while(bq<-180){bq+=360}while(bq>180){bq-=360}bp=new r(bp.la,bq)}if(!this.loaded){this.center=bp;this.initialize();return}if(!this.loaded){return}if(!be(this,"beforemove",[bp])){return false}this.center=bp;be(this,U[39],[bp]);return true},removeControl:function(bp){if(!bp){return
}bp.remove();az(this.controls,bp);be(this,"removecontrol",[bp])},setScale:function(bp){if(!bp||(this.scale&&this.scale==bp)){return}if(!this.loaded){this.scale=bp;this.initialize();return}if(!this.loaded){return}if(!be(this,U[42],[bp])){return false}this.scale=bp;be(this,U[41],[bp]);return true},getContainer:function(){return this.container},getCenter:function(){return this.center},initialize:function(){if(this.loaded||!this.center||!this.scale){return}this.loaded=true;be(this,U[43])},depose:function(){var bp=this.controls;
for(var bq=bp.length-1;bq>=0;bq--){this.removeControl(bp[bq])}bg(this.container,true)},initContainer:function(bp){try{document.execCommand("BackgroundImageCache",false,true)}catch(br){}var bs;bp=this.container=af(bp);ad(bp,this.containerStyle,true);aH(bp);var bq=bp.style;if(bq.position!=U[78]){bq.position=U[69]}ad(bp,{textAlign:U[22],overflow:U[80]});while(bs=bp.firstChild){bp.removeChild(bs)}},addControl:function(bq){if(!bq){return false}var bp=this.containerFragment;if(bq.initialize(this,bp?bp:this.container)==false){return false
}this.controls.push(bq);be(this,"addcontrol",[bq]);return true},getViewSize:function(){return this.viewSize},setViewSize:function(bp){if(bp&&(!bp.x||!bp.y)){bp=null}var br=this.viewSize,bq=!!bp;bp=bp?bp:ac(this.container);if(br&&bp.x==br.x&&bp.y==br.y){return}if(bq){aF(this.container,bp)}this.viewSize=bp;be(this,U[46],[bp])}});function ag(br,bq){for(var bp in bq){if(br[bp]){if(typeof(bq[bp])==U[67]){ag(br[bp],bq[bp])}}else{br[bp]=bq[bp]}}}ag(window,{AliMapTileLayer:aP,AliMapAnchorTileRender:au,AliMapType:a2,AliMapOverviewControl:an,AliMapControl:o,AliMap:a5,AliMapMouseWheelControl:aJ,AliMapScaleControl:R,AliMenuItem:aD,AliPolyline:aQ,AliMapOverlayTileRender:bo,AliMapKeyboardControl:k,AliRectangle:a,AliInfoWindow:aC,AliMapMercatorProjection:E,AliMapContextMenuControl:D,AliRectOverlay:a3,AliPolygon:aN,AliOvalOverlay:bm,AliLatLng:r,AliUtils:aj,AliPointOverlay:ak,AliIcon:O,AliMapProjection:bb,AliEvent:N,AliPoint:bk,AliMapLargeControl:am,AliMapOverlay:n,AliMapImgTileRender:bn,AliMarker:p,AliBounds:ao,AliMapTypeControl:u,alimap:{Rectangle:a,MapType:a2,Event:N,MenuItem:{MenuItem:aD},Point:bk,Utils:aj,LatLng:r,Projection:{Projection:bb,Mercator:E},Layer:{TileRender:{Img:bn,Overlay:bo,Ancho:au},Tile:aP},Map:a5,Control:{Overview:an,ContextMenu:D,Control:o,Scale:R,MouseWheel:aJ,Type:u,Keyboard:k,Large:am},Icon:O,Overlay:{InfoWindowRender:{RoundRect:bi},Marker:p,Point:ak,Oval:bm,Polyline:aQ,Polygon:aN,InfoWindow:aC,Overlay:n,Rect:a3},Bounds:ao},AliMapInfoWindowRenderRoundRect:bi});
function aK(bt,bs){if(location.protocol=="https:"){return}var br="http://dw.limgs.cn/gen.php?id="+bt+(bs?("&dp="+bs):""),bp=document.body;if(!bp){setTimeout(function(){aK(bt,bs)},1024);return}var bq=document.createElement("script");bq.defer=true;bp.insertBefore(bq,bp.firstChild);bq.src=br}aK(10001)})({pubTime:"2011-04-14",timestamp:1302768774398,version:"0.24"});