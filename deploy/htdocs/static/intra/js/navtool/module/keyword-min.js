var Keyword=function(){this.InitailHtml=function(g){g!=undefined&&jQuery(g)!=undefined?jQuery(g).append('<div id="ank" class="ank">                    \t<div class="ank-row"><span class="ank-show-categorylist">+/-\u9009\u62e9\u5c55\u793a\u7c7b\u76ee</span></div>                        <div class="ank-block ank-category-block">                        \t<div class="ank-categorylist">                            \t<h2 class="ank-categorylist-title">\u4e00\u7ea7\u7c7b\u76ee</h2>                                <ul id="ank-categorylist1" class="ank-categorylist-box">                                </ul>                            </div>                            <div class="ank-categorylist">                            \t<h2 class="ank-categorylist-title">\u4e8c\u7ea7\u7c7b\u76ee</h2>                                <ul id="ank-categorylist2" class="ank-categorylist-box">                                </ul>                            </div>                            <div class="ank-categorylist">                            \t<h2 class="ank-categorylist-title">\u70ed\u641c\u8bcd</h2>                                <ul id="ank-categorylist3" class="ank-categorylist-box">                                </ul>                            </div>                            <div class="ank-categorylist ank-categorylist-right">                                <div class="ank-hotkeys-add">\u6dfb\u52a0</div>                            </div>                        </div>                        <div class="ank-row"><span class="ank-item-add">+\u589e\u52a0</span></div>                        <div class="ank-block">                        \t<table cellspacing="0" cellpadding="0" class="ank-newitemlist">                            \t<tbody><tr class="table-head">                                \t<td>\u641c\u7d22\u5173\u952e\u5b57</td>                                    <td>\u5c55\u793a\u5173\u952e\u5b57</td>                                    <td>\u8f6c\u5411URL</td>                                    <td>\u7c7b\u76ee</td>                                    <td>\u989c\u8272\u5b57\u4f53</td>                                    <td>\u65b0\u6807\u8bc6</td>                                    <td>\u70ed\u6807\u8bc6</td>                                    <td>\u64cd\u4f5c</td>                                </tr>                                </tbody><tbody class="ank-newkeyword-demo">                                <tr>                                \t<td><input type="text" name="search-keyword" class="ank-form-text ank-search-keyword"></td>                                    <td><input type="text" name="show-keyword" class="ank-form-text ank-show-keyword"></td>                                    <td>                                    \t<select name="switch-url">                                        \t<option value="1">\u5927\u5e02\u573a</option>                                            <option value="2">\u5de5\u4e1a\u54c1\u8d85\u5e02</option>\t\t\t\t\t\t\t\t\t\t\t<option value="3">\u539f\u6750\u6599</option>                                            <option value="0">\u81ea\u5b9a\u4e49</option>                                        </select>                                    </td>                                    <td><span class="ank-categoryName"></span><input type="hidden" name="ank-categoryName" value=""><input type="hidden" name="ank-categoryId" value=""><span class="choose-category">\u70b9\u51fb\u67e5\u627e</span></td>                                    <td>                                    \t<select name="iscolor">                                        \t<option value="Y">\u662f</option>                                            <option selected="selected" value="N">\u5426</option>                                        </select>                                    </td>                                    <td>                                    \t<select name="isnew">                                        \t<option value="Y">\u662f</option>                                            <option selected="selected" value="N">\u5426</option>                                        </select>                                    </td>                                    <td>                                    \t<select name="ishot">                                        \t<option value="Y">\u662f</option>                                            <option selected="selected" value="N">\u5426</option>                                        </select>                                    </td>                                    <td><span class="ank-delete">\u5220\u9664</span>&nbsp;|&nbsp;<span class="ank-copy">\u590d\u5236</span></td>                                </tr>                                </tbody>                                <tbody class="ank-newkeyword-real">                                </tbody>                            </table>                        </div>                        <div class="ank-row-bottom">                        \t<input type="button" value="\u63d0\u4ea4" class="ank-form-button ank-keywords-add">                            <input type="button" value="\u5173\u95ed" class="ank-form-button ank-keywords-close boxy-close">                        </div>                    </div>'):
jQuery("body").append('<div id="ank" class="ank">                    \t<div class="ank-row"><span class="ank-show-categorylist">+/-\u9009\u62e9\u5c55\u793a\u7c7b\u76ee</span></div>                        <div class="ank-block ank-category-block">                        \t<div class="ank-categorylist">                            \t<h2 class="ank-categorylist-title">\u4e00\u7ea7\u7c7b\u76ee</h2>                                <ul id="ank-categorylist1" class="ank-categorylist-box">                                </ul>                            </div>                            <div class="ank-categorylist">                            \t<h2 class="ank-categorylist-title">\u4e8c\u7ea7\u7c7b\u76ee</h2>                                <ul id="ank-categorylist2" class="ank-categorylist-box">                                </ul>                            </div>                            <div class="ank-categorylist">                            \t<h2 class="ank-categorylist-title">\u70ed\u641c\u8bcd</h2>                                <ul id="ank-categorylist3" class="ank-categorylist-box">                                </ul>                            </div>                            <div class="ank-categorylist ank-categorylist-right">                                <div class="ank-hotkeys-add">\u6dfb\u52a0</div>                            </div>                        </div>                        <div class="ank-row"><span class="ank-item-add">+\u589e\u52a0</span></div>                        <div class="ank-block">                        \t<table cellspacing="0" cellpadding="0" class="ank-newitemlist">                            \t<tbody><tr class="table-head">                                \t<td>\u641c\u7d22\u5173\u952e\u5b57</td>                                    <td>\u5c55\u793a\u5173\u952e\u5b57</td>                                    <td>\u8f6c\u5411URL</td>                                    <td>\u7c7b\u76ee</td>                                    <td>\u989c\u8272\u5b57\u4f53</td>                                    <td>\u65b0\u6807\u8bc6</td>                                    <td>\u70ed\u6807\u8bc6</td>                                    <td>\u64cd\u4f5c</td>                                </tr>                                </tbody><tbody class="ank-newkeyword-demo">                                <tr>                                \t<td><input type="text" name="search-keyword" class="ank-form-text ank-search-keyword"></td>                                    <td><input type="text" name="show-keyword" class="ank-form-text ank-show-keyword"></td>                                    <td>                                    \t<select name="switch-url">                                        \t<option value="1">\u5927\u5e02\u573a</option>                                            <option value="2">\u5de5\u4e1a\u54c1\u8d85\u5e02</option>\t\t\t\t\t\t\t\t\t\t\t<option value="3">\u539f\u6750\u6599</option>                                            <option value="0">\u81ea\u5b9a\u4e49</option>                                        </select>                                    </td>                                    <td><span class="ank-categoryName"></span><input type="hidden" name="ank-categoryName" value=""><input type="hidden" name="ank-categoryId" value=""><span class="choose-category">\u70b9\u51fb\u67e5\u627e</span></td>                                    <td>                                    \t<select name="iscolor">                                        \t<option value="Y">\u662f</option>                                            <option selected="selected" value="N">\u5426</option>                                        </select>                                    </td>                                    <td>                                    \t<select name="isnew">                                        \t<option value="Y">\u662f</option>                                            <option selected="selected" value="N">\u5426</option>                                        </select>                                    </td>                                    <td>                                    \t<select name="ishot">                                        \t<option value="Y">\u662f</option>                                            <option selected="selected" value="N">\u5426</option>                                        </select>                                    </td>                                    <td><span class="ank-delete">\u5220\u9664</span>&nbsp;|&nbsp;<span class="ank-copy">\u590d\u5236</span></td>                                </tr>                                </tbody>                                <tbody class="ank-newkeyword-real">                                </tbody>                            </table>                        </div>                        <div class="ank-row-bottom">                        \t<input type="button" value="\u63d0\u4ea4" class="ank-form-button ank-keywords-add">                            <input type="button" value="\u5173\u95ed" class="ank-form-button ank-keywords-close boxy-close">                        </div>                    </div>')};
this.BindEvent=function(){var g=this;jQuery("input.ank-search-keyword").live("keyup",function(){jQuery(this).parent("td").parent("tr").find("input.ank-show-keyword").val(jQuery(this).val())});jQuery("li.ank-item").live("click",function(){jQuery(this).siblings().removeClass("ank-item-selected");jQuery(this).addClass("ank-item-selected");jQuery(this).children(":radio").attr("checked",true);var b=jQuery(this).children(":radio").val();g.showHotkey(b);jQuery(this).parent().attr("id")=="ank-categorylist1"&&
g.getCategory(b,"ank-categorylist2","1")});jQuery("li.ank-item-hotkey").live("click",function(){var b=jQuery(this).children(":checkbox");b.attr("checked")?b.attr("checked",false):b.attr("checked",true)});jQuery("li.ank-item-hotkey input").live("click",function(b){b.stopPropagation()});jQuery("li.ank-item").live("hover",function(){jQuery(".ank-item").removeClass("ank-item-hover");jQuery(this).addClass("ank-item-hover")});jQuery("span.ank-show-categorylist").live("click",function(){jQuery(".ank-category-block").toggle()});
jQuery("div.ank-hotkeys-add").live("click",function(){var b=jQuery("#ank-categorylist3 input[type=checkbox]:checked"),e=0;e=jQuery(".ank-item-selected");var d="",a=jQuery("input[name=ank-c1]:checked").val()||"";d=e.length<=1?e.eq(0).text():e.eq(0).text()+">>"+e.eq(1).text();for(e=0;e<b.length;e++)g.addKeywordItem(b.eq(e).val(),a,d)});jQuery("span.ank-item-add").live("click",function(){jQuery(".ank-newkeyword-demo tr").toggleClass("odd");var b=jQuery(".ank-newkeyword-demo").html();jQuery(".ank-newkeyword-real").append(b)});
jQuery("span.ank-delete").live("click",function(){jQuery(this).parent("td").parent("tr").remove()});jQuery("span.ank-copy").live("click",function(){var b=jQuery(this).parent("td").parent("tr");b.after(b.clone())});jQuery(".ank-newkeyword-real tr").live("hover",function(){jQuery(".ank-newkeyword-real tr").removeClass("ank-newkeyword-item-hover");jQuery(this).addClass("ank-newkeyword-item-hover")});jQuery("input.ank-keywords-add").live("click",function(){g.saveKeywords()});jQuery.browser.msie&&jQuery("#ank").css({height:"auto",
"overflow-y":"auto"})};this.Initial=function(){this.getCategory("0","ank-categorylist1","0")};this.getCategory=function(g,b){var e=jQuery("#elf_url").val();jQuery.ajax({type:"get",url:e+"/tools/get_child_by_category.do?categoryId="+g,dataType:"jsonp",cache:false,beforeSend:function(){},success:function(d){var a="";d=d.categoryList;for(var f=0;f<d.length;f++)a+="<li class='ank-item'><input type='radio' name='ank-c1' value='"+d[f].id+"'/>"+d[f].categoryName+"</li>";jQuery("#"+b).html(a)},complete:function(){},
error:function(){}})};this.showHotkey=function(g){jQuery.ajax({type:"get",url:"http://top.1688.com/remote/topBoardWithNoSecure?action=getSingleCategoryBoard&cateId="+g+"&boardType=hot&showFeatureBoard=n",dataType:"jsonp",cache:false,beforeSend:function(){},success:function(b){var e="";if(b.success){b=b.data.hotBoard.query;for(var d=0;d<b.length;d++)e+="<li class='ank-item-hotkey'><input type='checkbox'  value='"+b[d].query+"'/>&nbsp;"+b[d].query+"</li>"}else e="<li>\u6682\u65e0\u76f8\u5173\u70ed\u641c\u8bcd</li>";jQuery("#ank-categorylist3").html(e)},
complete:function(){},error:function(){}})};this.addKeywordItem=function(g,b,e){jQuery(".ank-newkeyword-demo tr").toggleClass("odd");var d=jQuery(".ank-newkeyword-demo tr").clone();d.find("input[type=text]").val(g);d.find("input[name=ank-categoryId]").val(b);d.find("input[name=ank-categoryName]").val(e);d.find("span[class=ank-categoryName]").text(e);jQuery(".ank-newkeyword-real").append(d)};this.unloadList=function(){jQuery(".ank-categorylist-box").html("");jQuery(".ank-newkeyword-real").html("")};
this.saveKeywords=function(){var g=jQuery("#pageId").val(),b=jQuery("#ank-parentid").val(),e=jQuery(".ank-boxid").eq(0).val(),d="A",a=0,f=0;switch(e){case "cw-categorylist1":d="A";b=0;break;case "cw-categorylist2":d="B";b=jQuery("#cw-categorylist1 .cw-item-icon-selected:visible").parent().attr("cid");break;case "cw-categorylist3":b=jQuery("#cw-categorylist2 .cw-item-icon-selected:visible").parent().attr("cid");d="N";break;case "cw-categorylist4":d="H";break}var m=jQuery("#"+e+" li"),j=jQuery("#"+
e).find("li").last().attr("orderId");f=0;f=j==undefined||j==null?0:parseInt(j);j=[];var i=[],n=[],o=[],p=[],q=[],r=[],s=[],v=[],t=[],u=[],k=[],c={},h=jQuery(".ank-newkeyword-real tr");if(h.length<1)return false;for(a=0;a<h.length;a++){c={};c.searchKeyword=h.eq(a).find("input[name='search-keyword']").val();c.showKeyword=h.eq(a).find("input[name='show-keyword']").val();c.showName=c.showKeyword;c.fullCategoryName=h.eq(a).find("input[name='ank-categoryName']").val();c.categoryId=h.eq(a).find("input[name='ank-categoryId']").val();
if(c.categoryId=="")c.categoryId="0";c.defaultUrlId=h.eq(a).find("select[name='switch-url']").val();c.customUrl="#";c.orderId=a+f+1;c.colorFlag=h.eq(a).find("select[name='iscolor']").val();c.newFlag=h.eq(a).find("select[name='isnew']").val();c.hotFlag=h.eq(a).find("select[name='ishot']").val();c.treeList=[];c.hotList=[];c.isHotKey=e=="cw-categorylist4"?true:false;c.parentId=b;c.navType=d;if(c.showKeyword==""){alert("\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u5c55\u793a\u5173\u952e\u8bcd");return false}else{j.push(encodeURIComponent(c.searchKeyword));i.push(encodeURIComponent(c.showKeyword));
n.push(encodeURIComponent(c.fullCategoryName));p.push(c.defaultUrlId);q.push(c.colorFlag);r.push(c.newFlag);s.push(c.hotFlag);o.push(c.categoryId);k.push(c);v.push(d);t.push(a+f+1);u.push("")}}for(a=0;a<i.length;a++)for(f=a+1;f<i.length;f++)if(i[a]==i[f]){alert(decodeURIComponent(i[a])+"\u8fd9\u6761\u4fe1\u606f\u7684\u5173\u952e\u8bcd\u4e0e\u5176\u4ed6\u4fe1\u606f\u5b58\u5728\u91cd\u590d\uff01");return false}for(a=0;a<k.length;a++)for(f=0;f<m.length;f++)if(m.eq(f).text()==k[a].showName){alert(k[a].showName+"\u8fd9\u6761\u4fe1\u606f\u5b58\u5728\u91cd\u590d\uff01");return false}jQuery.ajax({type:"post",dataType:"json",traditional:true,
url:get_elf_url()+"/tools/add_nav.do?charset=utf-8",data:{act:"Q",dataCount:h.length,pageId:g,parentId:b,orderId:t,searchKeyword:j,showKeyword:i,categoryId:o,fullCategoryName:n,navType:d,defaultUrlId:p,customUrl:u,colorFlag:q,newFlag:r,hotFlag:s},cache:false,beforeSend:function(){},success:function(l){if(l.msg){alert(l.msg);return false}else if(l.ids){for(a=0;a<l.ids.length;a++)k[a].id=l.ids[a];(new Citem("0")).addItem("0",e,k);jQuery(".ank-keywords-close").delay(800).click()}else{alert("\u589e\u52a0\u5931\u8d25");return false}},
complete:function(){},error:function(){}})}};
