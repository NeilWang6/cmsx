("TimeSelector" in jQuery.ui.datepicker)||(function(a,b){a.extend(a.ui.datepicker,{TimeSelector:function(d,c){this.father=c;this.fcon=d.parent("div.box");this.popupannel=a("div.selectime",this.fcon);if(typeof c._time=="undefined"){c._time=c.options.date}this.time=c._time;this.status="s";this.ctime=a("<div>",{"class":"time",html:'\u65f6\u95f4\uff1a<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><div class="cta"><button class="u"></button><button class="d"></button></div>'});this.button=a("<button>",{"class":"ok",html:"\u786e\u5b9a"});this.clearBtn=a("<button>",{"class":"clear",html:"\u6e05\u7a7a"});this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];this.m_a=["00","10","20","30","40","50"];this.s_a=["00","10","20","30","40","50"];this._init(d)}});a.extend(a.ui.datepicker.TimeSelector.prototype,{parseSubHtml:function(c){var e="";for(var d=0;d<c.length;d++){e+='<a href="javascript:void(0);" class="item">'+c[d]+"</a>"}e+='<a href="javascript:void(0);" class="x">x</a>';return e},showPopup:function(d){var e=this;this.popupannel.html(d);this.popupannel.removeClass("fd-hide");var c=e.status;a("span",e.ctime).removeClass("on");switch(c){case"h":a("span.h",e.ctime).addClass("on");break;case"m":a("span.m",e.ctime).addClass("on");break;case"s":a("span.s",e.ctime).addClass("on");break}},hidePopup:function(){this.popupannel.addClass("fd-hide")},render:function(){var d=this;var f=d.get("h");var c=d.get("m");var e=d.get("s");d.father._time=d.time;a("span.h",d.ctime).html(f>9?f:("0"+f));a("span.m",d.ctime).html(c>9?c:("0"+c));a("span.s",d.ctime).html(e>9?e:("0"+e));return d},set:function(c,e){var d=this;e=Number(e);switch(c){case"h":d.time.setHours(e);break;case"m":d.time.setMinutes(e);break;case"s":d.time.setSeconds(e);break}d.render()},get:function(c){var d=this;var e=d.time;switch(c){case"h":return e.getHours();case"m":return e.getMinutes();case"s":return e.getSeconds()}},add:function(){var e=this;var c=e.status;var d=e.get(c);d++;e.set(c,d)},minus:function(){var e=this;var c=e.status;var d=e.get(c);d--;e.set(c,d)},_init:function(e){var d=this;var c=d.father.widgetBaseClass+"-time";e.html("").append(d.ctime);e.append(d.button);e.append(d.clearBtn);d.render();d.popupannel.bind("click."+c,function(h){var g=a(h.target);if(g.hasClass("x")){d.hidePopup()}else{if(g.hasClass("item")){var f=Number(g.html());d.set(d.status,f);d.hidePopup()}}});d.button.bind("click."+c,function(g){var f=d.father,i=f.options,h=typeof f.dt_selected=="undefined"?f.selected:f.dt_selected;h.setHours(d.get("h"));h.setMinutes(d.get("m"));h.setSeconds(d.get("s"));d.father._setOption("date",h)._trigger("timeSelect",g,{date:h});if(i.popup&&i.closable){d.father.hide(g)}});d.clearBtn.bind("click."+c,function(g){var f=d.father;f.clear();f.hide(g)});d.ctime.bind("keyup."+c,function(g){var f=a.ui.keyCode;if(g.keyCode==f.UP||g.keyCode==f.LEFT){g.preventDefault();d.add()}if(g.keyCode==f.DOWN||g.keyCode==f.RIGHT){g.preventDefault();d.minus()}});a("button.u",d.ctime).bind("click."+c,function(){d.hidePopup();d.add()});a("button.d",d.ctime).bind("click."+c,function(){d.hidePopup();d.minus()});a("span.h",d.ctime).bind("click."+c,function(){var f=d.parseSubHtml(d.h_a);d.status="h";d.showPopup(f)});a("span.m",d.ctime).bind("click."+c,function(){var f=d.parseSubHtml(d.m_a);d.status="m";d.showPopup(f)});a("span.s",d.ctime).bind("click."+c,function(){var f=d.parseSubHtml(d.s_a);d.status="s";d.showPopup(f)})}});a.add("ui-datepicker-time")})(jQuery);
