FD.widget.ColumStat=function(B,A){this.init(B,A)};FD.widget.ColumStat.defConfig={data:[["A.\u9009\u9879\u6587\u68481",888],["B.\u9009\u9879\u6587\u68482",300]],clength:130,step:10,topclass:"fillest",ctype:0,template:['<div class="columStat"><ul>','<li class="[%topclass%]"><s>[%title%]</s><div class="[%holes0%]" style="width:0px"></div><u class="[%holes1%]">0</u><i class="[%holes2%]">0%</i></li>',"</ul></div>"],holes:["thecolum","thenum","therate"],delay:20};FD.widget.ColumStat.prototype={init:function(B,A){this.config=FD.common.applyIf(A||{},FD.widget.ColumStat.defConfig);if((this.obj=FYG(B))&&YAHOO.lang.isArray(this.config.data)){this.dataB=this.calcuDataB();this.HTML=this.genStatHTML();this.obj.innerHTML=this.HTML;this.showColumn()}},genStatHTML:function(){var A=this.config.data;var D=this.config.template[0];var C=0;while(C<A.length){var B=this.config.template[1].replace(/\[%title%\]/ig,A[C][0]).replace(/\[%holes0%\]/ig,this.config.holes[0]).replace(/\[%holes1%\]/ig,this.config.holes[1]).replace(/\[%holes2%\]/ig,this.config.holes[2]);B=B.replace(/\[%topclass%\]/ig,C==this.maxColum?this.config.topclass:"");D+=B;C++}D+=this.config.template[2];return D},calcuDataB:function(){this.totalNum=0,this.maxNum=0,this.maxColum=0;var C=this.config.data,B=[],H=0;for(var E=0;E<C.length;E++){this.totalNum+=C[E][1];if(this.maxNum<C[E][1]){this.maxNum=C[E][1];H=E}}this.maxColum=H;var G=this.config,A=this.maxNum,D=this.totalNum;for(E=0;E<C.length&&D;E++){var F=(C[E][1]*G.clength);F=F?A*G.step/F:0;B.push([(C[E][1]/D)*100,F,C[E][1]*G.clength/(G.ctype?A:D)])}return B},getDataB:function(){return this.dataB},showColumn:function(C){var J=this.config.data;var I=this.dataB;var B=this.obj;var G=FYD.getElementsByClassName(this.config.holes[0],"*",this.obj);var H=FYD.getElementsByClassName(this.config.holes[1],"*",B);var A=FYD.getElementsByClassName(this.config.holes[2],"*",B);var E=C||0;var D=0;if(E>=this.config.step){while(D<J.length){G[D].style.width=I[D][2]+"px";G[D].title=J[D][1];H[D].innerHTML=J[D][1];A[D].innerHTML=I[D][0].toFixed(1)+"%";D++}return}E++;D=J.length;while(D-->0){if(I[D][1]<=1){G[D].style.width=E*I[D][2]/this.config.step+"px"}else{if((E*I[D][1]-Math.floor(E*I[D][1]))<this.config.errorRange){G[D].style.width=E*I[D][2]/this.config.step+"px"}}H[D].innerHTML=parseInt(J[D][1]*E/this.config.step);A[D].innerHTML=(I[D][0]*E/this.config.step).toFixed(1)+"%"}var F=this;window.setTimeout(function(){F.showColumn(E)},this.config.delay)}};FD.widget.ColumStater=new function(B,A){this.init=function(D,C){return new FD.widget.ColumStat(D,C)}};
