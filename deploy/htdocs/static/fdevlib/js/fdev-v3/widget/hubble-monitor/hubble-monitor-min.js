(function(l){var a=navigator.userAgent,h=window,k=document,o=FYD,m=FYE,d=0,f=0,n=[],e=0,j=(function(){var q=[["Windows NT 5.1","WinXP"],["Windows NT 6.0","WinVista"],["Windows NT 6.1","Win7"],["Windows NT 5.2","Win2003"],["Windows NT 5.0","Win2000"],["Macintosh","Macintosh"],["Windows","WinOther"],["Ubuntu","Ubuntu"],["Linux","Linux"]],p="Other";q.forEach(function(s,r){if(a.indexOf(s[0])!=-1){p=s[1];return false}});return p})(),i=(function(){var t=navigator.userAgent,v="",r="mobile",q=v,s=v,p,w={},u=function(x){var y=0;return parseFloat(x.replace(/\./g,function(){return(y++===0)?".":""}))};if((p=t.match(/AppleWebKit\/([\d.]*)/))&&p[1]){w[q="webkit"]=u(p[1]);if((p=t.match(/Chrome\/([\d.]*)/))&&p[1]){w[s="chrome"]=u(p[1])}else{if((p=t.match(/\/([\d.]*) Safari/))&&p[1]){w[s="safari"]=u(p[1])}}if(/ Mobile\//.test(t)){w[r]="apple"}else{if((p=t.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))){w[r]=p[0].toLowerCase()}}}else{if((p=t.match(/Presto\/([\d.]*)/))&&p[1]){w[q="presto"]=u(p[1]);if((p=t.match(/Opera\/([\d.]*)/))&&p[1]){w[s="opera"]=u(p[1]);if((p=t.match(/Opera\/.* Version\/([\d.]*)/))&&p[1]){w[s]=u(p[1])}if((p=t.match(/Opera Mini[^;]*/))&&p){w[r]=p[0].toLowerCase()}else{if((p=t.match(/Opera Mobi[^;]*/))&&p){w[r]=p[0]}}}}else{if((p=t.match(/MSIE\s([^;]*)/))&&p[1]){w[q="trident"]=0.1;w[s="ie"]=u(p[1]);if((p=t.match(/Trident\/([\d.]*)/))&&p[1]){w[q]=u(p[1])}}else{if((p=t.match(/Gecko/))){w[q="gecko"]=0.1;if((p=t.match(/rv:([\d.]*)/))&&p[1]){w[q]=u(p[1])}if((p=t.match(/Firefox\/([\d.]*)/))&&p[1]){w[s="firefox"]=u(p[1])}}}}}w.core=q;w.shell=s;w._numberify=u;return w})(),c=(function(t){var s=navigator.userAgent,p,w,r,v={},u=t._numberify;if(p=s.match(/360SE/)){v[r="se360"]=3}else{if((p=s.match(/Maxthon/))&&(w=window.external)){r="maxthon";try{v[r]=u(w.max_version)}catch(q){v[r]=0.1}}else{if(p=s.match(/TencentTraveler\s([\d.]*)/)){v[r="tt"]=p[1]?u(p[1]):0.1}else{if(p=s.match(/TheWorld/)){v[r="theworld"]=3}else{if(p=s.match(/SE\s([\d.]*)/)){v[r="sougou"]=p[1]?u(p[1]):0.1}}}}}r&&(v.shell=r);return v})(i);i=FDEV.lang.merge(i,c);browserInfo=(function(){var r=i.shell,s,q,p;if("ie"===r&&(s=i[r])){q=i.trident;switch(q){case 4:p="MSIE8";break;case 5:p="MSIE9";break;default:p="MSIE"+s;break}}else{p=r?g(r):"Other"}return p})(),browserCoreInfo=(function(){var p=i.core,q;if("trident"===p&&(q=i[p])){return"Trident"+q}return g(p)||"Other"})(),screenInfo=(function(){var p=h.screen;return p?p.width+"x"+p.height:""})();function g(p){return !p?p:p.substr(0,1).toUpperCase()+p.substr(1).toLowerCase()}var b=function(q,p){this.init.apply(this,arguments)};b.prototype={init:function(p){var s=p||{},t=s.apiUrl||"http://igw.monitor.taobao.com/monitor-gw/receive.do",q="appId" in s?s.appId:0,r="sampleRate" in s?s.sampleRate:10000;if(!q){return}d=h.g_hb_monitor_st;if(!d){return}f=+new Date;n=s.sections||[];e=f;if(n.length>0){this.monitorSection(n[0])}m.on(h,"load",function(){this.sendData(+new Date,t,q)},this,true)},monitorSection:function(q){var p=o.query("#"+q+" img");if(!p||!p.length){return}m.on(p,"load",function(){var r=+new Date;if(r>e){e=r}})},sendData:function(s,r,p){var q=[r,"?page_id=",p,"&os=",j,"&bt=",browserInfo,"&bct=",browserCoreInfo,"&scr=",screenInfo,"&fl=",(s-d),"&dl=",(f-d)];if(n.length>0){q.push("&sl="+(e-f))}setTimeout(function(){new Image().src=q.join("")},1000)}};l.HubbleMonitor=b})(FD.widget);
