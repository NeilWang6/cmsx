(function(l){l.block=function(o,p){d(o,p)};l.unblock=function(o){h(o)};l.block.defaults={css:{},overlayCSS:{backgroundColor:"#000",opacity:0.3},baseZ:10000,iframe:false,fixed:false,center:true,allowBodyStretch:true,constrainTabKey:true,showOverlay:true,focusInput:true,focusIndex:0,applyPlatformOpacityRules:true,onUnblock:null};l.block.cache={};var k=YAHOO.env.ua,f=k.ie==6,b=pageTop=pageLeft=null,e,g=[];function d(o,q){q=FD.common.applyIf(q||{},l.block.defaults);q.css=FD.common.applyIf(q.css||{},l.block.defaults.css);q.overlayCSS=FD.common.applyIf(q.overlayCSS||{},l.block.defaults.overlayCSS);if(b){h()}if(o.parentNode){var s={};s.el=o;s.parent=o.parentNode;s.display=o.style.display;s.position=o.style.position;l.block.cache.history=s}var t,r,p,u=q.baseZ;if(f){var v=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank";if(q.iframe){t=document.createElement("iframe");FYD.addClass(t,"blockui");FYD.setStyle(t,"z-index",u++);FYD.setStyle(t,"display","none");FYD.setStyle(t,"margin","0");FYD.setStyle(t,"padding","0");FYD.setStyle(t,"width","100%");FYD.setStyle(t,"height","100%");FYD.setStyle(t,"top","0");FYD.setStyle(t,"left","0");FYD.setStyle(t,"border","0 none");FYD.setAttribute(t,"src",v)}}if(q.showOverlay){r=document.createElement("div");FYD.addClass(r,"blockui");FYD.addClass(r,"blockoverlay");FYD.setStyle(r,"position","fixed");FYD.setStyle(r,"z-index",u++);FYD.setStyle(r,"display","none");FYD.setStyle(r,"margin","0");FYD.setStyle(r,"padding","0");FYD.setStyle(r,"width","100%");FYD.setStyle(r,"height",f?FYD.getDocumentHeight():"100%");FYD.setStyle(r,"top","0");FYD.setStyle(r,"left","0");FYD.setStyle(r,"border","0 none")}p=document.createElement("div");FYD.addClass(p,"blockui");FYD.addClass(p,"blockmsg");FYD.setStyle(p,"z-index",u);FYD.setStyle(p,"display","none");FYD.setStyle(p,"position",(q.fixed&&!f)?"fixed":"absolute");for(prop in q.css){FYD.setStyle(p,prop,q.css[prop])}if(r&&!q.applyPlatformOpacityRules||!(k.gecko>0&&/Linux/.test(navigator.platform))){for(prop in q.overlayCSS){FYD.setStyle(r,prop,q.overlayCSS[prop])}}if(t){FYD.setStyle(t,"opacity",0)}if(t){document.body.appendChild(t)}if(r){document.body.appendChild(r)}if(0<k.ie&&k.ie<8){c(g)}document.body.appendChild(p);if(f){FYD.batch([t,r,p],function(w){if(w){var x=w.style;if(w==t||w==r){FYD.setStyle(w,"position","absolute")}else{if(w==p&&!q.center){x.top=(q.css&&q.css.top)?parseInt(q.css.top):0;x.left=(q.css&&q.css.left)?parseInt(q.css.left):0}}}});if(q.fixed){FYE.on(window,"scroll",i,[t,r,p],q)}}p.appendChild(o);FYD.setStyle([t,r,p,o],"display","block");FYE.on(window,"resize",m,[t,r,p],q);m.call(q,null,[t,r,p]);if(q.constrainTabKey&&q.showOverlay){j(true)}b=p;g=FYS("input,textarea",p).filter(function(w){return(!w.disabled&&w.type!=="hidden"&&(w.offsetWidth>0||w.offsetHeight>0))?true:false});if(q.focusInput&&g.length){e=q.focusIndex;g[e].focus()}if(q.onBlock){q.onBlock()}}function h(q){if(!b){return}FYE.removeListener(window,"resize",a);FYE.removeListener(window,"scroll",i);FYE.removeListener(window,"resize",m);q=q||{};j(false,q);b=pageLeft=pageTop=null;g=[];var r=l.block.cache.history;if(0<k.ie&&k.ie<8){c(g)}if(r){r.el.style.display=r.display;r.el.style.position=r.position;if(r.parent){r.parent.appendChild(r.el)}r=null}var p=FYS("div.blockui,iframe.blockui");for(var o=0;o<p.length;o++){if(p[o].parentNode){p[o].parentNode.removeChild(p[o])}}if(typeof q.onUnblock=="function"){q.onUnblock()}}function j(o){if(!o&&!b){return}o?FYE.addListener(document,"keydown",n):$E.removeListener(document,"keydown",n)}function n(o){if(o.keyCode&&o.keyCode==9){FYE.preventDefault(o);if(g.length){o.shiftKey?e--:e++;if(o.shiftKey&&e<0){e=g.length-1}if(!o.shiftKey&&e==g.length){e=0}g[e].focus()}}}function m(p,o){if(this.center){a.call(o[2],null,this)}if(f){FYD.setStyle([o[0],o[1]],"width",FYD.getDocumentWidth()+"px");FYD.setStyle([o[0],o[1]],"height",FYD.getDocumentHeight()+"px")}}function i(r,q){var o=FYD.getDocumentScrollTop(),p=FYD.getDocumentScrollLeft();FYD.setStyle(q[2],"top",o+pageTop+"px");FYD.setStyle(q[2],"left",p+pageLeft+"px")}function a(s,o){var r=FYD.getRegion(this);pageLeft=(FYD.getViewportWidth()-r.width)/2;pageTop=(FYD.getViewportHeight()-r.height)/2;var q=((o.fixed&&!f)?0:FYD.getDocumentScrollLeft())+pageLeft,p=((o.fixed&&!f)?0:FYD.getDocumentScrollTop())+pageTop;if(q<0){q=0}if(p<0){p=0}FYD.setStyle(this,"left",q+"px");FYD.setStyle(this,"top",p+"px")}function c(p){for(var o=0;o<p.length;o++){if(p[o].type=="checkbox"||p[o].type=="radio"){p[o].defaultChecked=p[o].checked}}}})(FD.widget);
